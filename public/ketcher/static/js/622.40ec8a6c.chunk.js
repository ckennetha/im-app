"use strict";(self.webpackChunkketcher_react_app=self.webpackChunkketcher_react_app||[]).push([[622],{25622:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ud});var r,o,i,a=n(97850),l=n(7114),c=n(78335),s=n(60471),u=n(55830),d=n(32876),p=n(24530),m=n(94044),f=n(10650),h=n(39506),v=n(97348),g=n(14788),b=n(25973),y=n(73140),x=n(45025),A=n(28222),w=n(72328),C=n(27182),M=n(14150),k=n(9913),S=n(63770),I=n(13677),O=n(93895),D=n(40528),P=n(17141),E=n(79684),N=n(70055),j=n(46944),Y=n(26899),L=n(41705),F=n(94300),T=n(345),B=n(74412),z=n(92099),R=n(48183),q=n(22380),H=n.n(q),_=n(97466),U=n(88818),V=n(59962),K=n(85420),W=n(45841),Z=n(61790),G=n.n(Z),Q=n(81515),X=n(82144),J=n(25907),$=n(10694),ee=n(40694),te=n(37209),ne=n.n(te),re=n(41047),oe=n.n(re),ie=n(20228),ae=n(8422);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Monomer="monomer",e.Preset="preset",e.Bond="bond",e.AmbiguousMonomer="ambiguousMonomer"}(r||(r={})),function(e){e.Library="library",e.ChainStart="chainStart",e.ChainMiddle="chainMiddle",e.ChainEnd="chainEnd"}(o||(o={})),function(e){e.nanoMol="nM",e.microMol="\u03bcM",e.milliMol="mM"}(i||(i={}));var se=(0,L.A)((0,L.A)((0,L.A)({},i.nanoMol,Math.pow(10,9)),i.microMol,Math.pow(10,6)),i.milliMol,Math.pow(10,3)),ue={activeTool:"select",editor:void 0,editorLayoutMode:void 0,editorLineLength:f.SettingsManager.editorLineLength,preview:{type:r.Monomer,monomer:void 0,style:{}},position:void 0,isContextMenuActive:!1,isMacromoleculesPropertiesWindowOpened:!1,macromoleculesProperties:void 0,unipositiveIonsMeasurementUnit:i.milliMol,oligonucleotidesMeasurementUnit:i.microMol,unipositiveIonsValue:140,oligonucleotidesValue:200},de=(0,T.Z0)({name:"editor",initialState:ue,reducers:{selectTool:function(e,t){e.activeTool=t.payload},setPosition:function(e,t){e.position=t.payload},createEditor:function(e,t){var n,r,o=new f.CoreEditor({theme:t.payload.theme,canvas:t.payload.canvas,monomersLibraryUpdate:t.payload.monomersLibraryUpdate});e.editor=o,null===(n=(r=t.payload).onInit)||void 0===n||n.call(r,o)},destroyEditor:function(e){var t,n;e.editorLayoutMode=null===(t=e.editor)||void 0===t?void 0:t.mode.modeName,null===(n=e.editor)||void 0===n||n.switchToMicromolecules(),e.editor=void 0},showPreview:function(e,t){e.preview=t.payload||{monomer:void 0,style:""}},setContextMenuActive:function(e,t){e.isContextMenuActive=t.payload},setMacromoleculesPropertiesWindowVisibility:function(e,t){e.isMacromoleculesPropertiesWindowOpened=t.payload},toggleMacromoleculesPropertiesWindowVisibility:function(e){e.isMacromoleculesPropertiesWindowOpened=!e.isMacromoleculesPropertiesWindowOpened},setMacromoleculesProperties:function(e,t){e.macromoleculesProperties=t.payload},setUnipositiveIonsMeasurementUnit:function(e,t){e.unipositiveIonsMeasurementUnit=t.payload},setOligonucleotidesMeasurementUnit:function(e,t){e.oligonucleotidesMeasurementUnit=t.payload},setEditorLineLength:function(e,t){e.editorLineLength=ce(ce({},e.editorLineLength),t.payload)},setUnipositiveIonsValue:function(e,t){e.unipositiveIonsValue=t.payload},setOligonucleotidesValue:function(e,t){e.oligonucleotidesValue=t.payload}}}),pe=de.actions,me=pe.selectTool;pe.setPosition;var fe,he,ve=pe.createEditor,ge=pe.destroyEditor,be=pe.showPreview,ye=pe.setContextMenuActive,xe=pe.setMacromoleculesPropertiesWindowVisibility,Ae=pe.toggleMacromoleculesPropertiesWindowVisibility,we=pe.setMacromoleculesProperties,Ce=pe.setUnipositiveIonsMeasurementUnit,Me=pe.setOligonucleotidesMeasurementUnit,ke=pe.setEditorLineLength,Se=pe.setUnipositiveIonsValue,Ie=pe.setOligonucleotidesValue,Oe=function(e){return e.editor.preview},De=function(e){return e.editor.activeTool},Pe=function(e){return e.editor.editor},Ee=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isSequenceEditInRNABuilderMode},Ne=function(e){return e.editor.editorLayoutMode},je=function(e){var t;return null===(t=e.editor.editor)||void 0===t?void 0:t.isHandToolSelected},Ye=function(e){var t;return null===(t=e.editor.editor)||void 0===t||null===(t=t.drawingEntitiesManager)||void 0===t?void 0:t.hasAntisenseChains},Le=function(e){return e.editor.isContextMenuActive},Fe=function(e){return e.editor.isMacromoleculesPropertiesWindowOpened},Te=function(e){return e.editor.macromoleculesProperties},Be=function(e){return e.editor.unipositiveIonsMeasurementUnit},ze=function(e){return e.editor.oligonucleotidesMeasurementUnit},Re=function(e){return e.editor.unipositiveIonsValue},qe=function(e){return e.editor.oligonucleotidesValue},He=function(e){return e.editor.editorLineLength},_e=de.reducer,Ue="FAVORITES",Ve="PEPTIDE",Ke="CHEM",We="RNA";!function(e){e.SUGARS="Sugars",e.BASES="Bases",e.PHOSPHATES="Phosphates",e.PEPTIDES="Amino acids",e.NUCLEOTIDES="Nucleotides"}(fe||(fe={})),function(e){e.R="R",e.A="A",e.C="C",e.G="G",e.T="T",e.U="U",e.X="X",e.P="P"}(he||(he={}));var Ze={R:fe.SUGARS,A:fe.BASES,C:fe.BASES,G:fe.BASES,T:fe.BASES,U:fe.BASES,X:fe.BASES,P:fe.PHOSPHATES},Ge="favoriteItemsUniqueKeys",Qe="ketcher_custom_presets",Xe="thymine",Je="uracil",$e=1,et=2,tt=new(function(){function e(){(0,z.A)(this,e),this.localStorage=window.localStorage}return(0,R.A)(e,[{key:"getItem",value:function(e){var t=this.localStorage.getItem(e);return t?JSON.parse(t):null}},{key:"setItem",value:function(e,t){this.localStorage.setItem(e,JSON.stringify(t))}},{key:"removeItem",value:function(e){this.localStorage.removeItem(e)}}]),e}());function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=(0,L.A)((0,L.A)({},f.MonomerGroups.PEPTIDES,f.KetMonomerClass.AminoAcid),f.MonomerGroups.BASES,f.KetMonomerClass.Base),it={monomers:[],favorites:{},searchFilter:"",selectedTabIndex:et};function at(e){var t;return(0,f.isAmbiguousMonomerLibraryItem)(e)?e.id||e.label:"".concat(e.props.MonomerName,"___").concat(null===(t=e.props)||void 0===t?void 0:t.Name)}function lt(e){var t,n,r;return"".concat(e.name,"_").concat((null===(t=e.base)||void 0===t?void 0:t.label)||".","_").concat((null===(n=e.sugar)||void 0===n?void 0:n.label)||".","_").concat((null===(r=e.phosphate)||void 0===r?void 0:r.label)||".")}var ct=(0,T.Z0)({name:"library",initialState:it,reducers:{loadMonomerLibrary:function(e,t){var n=t.payload.map((function(e){return rt(rt({},e),{},{props:rt({},e.props)})}));e.monomers=n},setFavoriteMonomersFromLocalStorage:function(e){var t={},n=tt.getItem(Ge);n&&Array.isArray(n)&&(e.monomers.forEach((function(e){var r=at(e);n.find((function(e){return e===r}))&&(t[r]=rt(rt({},e),{},{favorite:!0}))})),e.favorites=t)},clearFavorites:function(e){e.favorites={}},toggleMonomerFavorites:function(e,t){var n=at(t.payload),r=tt.getItem(Ge)||[];e.favorites[n]?(delete e.favorites[n],tt.setItem(Ge,r.filter((function(e){return e!==n})))):(e.favorites[n]=rt(rt({},t.payload),{},{favorite:!0}),r.push(n),tt.setItem(Ge,r))},setSearchFilter:function(e,t){e.searchFilter=t.payload},setSelectedTabIndex:function(e,t){e.selectedTabIndex=t.payload}}}),st=function(e,t){return e.filter((function(e){var n;return!e.isAmbiguous&&(null===(n=e.props)||void 0===n?void 0:n.MonomerType)===t}))},ut=function(e,t){var n=e.filter((function(e){if(!(0,f.isAmbiguousMonomerLibraryItem)(e))return!1;var n=new f.AmbiguousMonomer(e,void 0,!1);return ot[t]===n.monomerClass}));if(0===n.length)return[];var r=[];t===f.MonomerGroups.BASES?r=[{groupTitle:"Ambiguous DNA Bases",groupItems:n.filter((function(e){return(0,f.isAmbiguousMonomerLibraryItem)(e)&&e.options.find((function(e){return e.templateId.toLowerCase().includes(Xe)}))}))},{groupTitle:"Ambiguous RNA Bases",groupItems:n.filter((function(e){return(0,f.isAmbiguousMonomerLibraryItem)(e)&&e.options.find((function(e){return e.templateId.toLowerCase().includes(Je)}))}))},{groupTitle:"Ambiguous Bases",groupItems:n.filter((function(e){return(0,f.isAmbiguousMonomerLibraryItem)(e)&&e.options.every((function(e){return!e.templateId.toLowerCase().includes(Xe)&&!e.templateId.toLowerCase().includes(Je)}))}))}]:r.push({groupTitle:"Ambiguous ".concat(t),groupItems:n});var o=["X","N"];return r.forEach((function(e){e.groupItems.sort((function(e,t){return e.label.localeCompare(t.label)})),e.groupItems.sort((function(e){return o.includes(e.label)?-1:1}))})),r},dt=function(e){return e.filter((function(e){return e.favorite&&!e.isAmbiguous}))},pt=(0,B.Mz)((function(e){return e.library}),(function(e){var t=e.searchFilter,n=e.monomers,r=e.favorites,o=t.toLowerCase(),i=function(){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),i=t.toLowerCase(),a=null===n||void 0===n||null===(e=n.base)||void 0===e?void 0:e.toLowerCase(),l=null!==n&&void 0!==n&&n.modifications?Object.values(n.modifications).map((function(e){return e.toLowerCase()})).join(" "):"";if("/"===r)return Boolean(a||l);if(r.includes("/")){var c=r.split("/");if(c.length>3||3===c.length&&""!==c[2])return!1;if(3===c.length&&""!==c[1]){var s=c[1],u=a&&a.length===s.length&&Array.from(a).every((function(e,t){return e===s[t]})),d=!!l&&l.split(" ").some((function(e){return e.length===s.length&&Array.from(e).every((function(e,t){return e===s[t]}))}));return u||d}var p=c[0],m=c[1];if(r.startsWith("/")&&r.length>1){var f=r.slice(1);return a&&a.startsWith(f)||l&&l.split(" ").some((function(e){return e.startsWith(f)}))}if(r.endsWith("/")&&r.length>1){var h=r.slice(0,-1),v=r[r.length-2];return a&&a.endsWith(h)&&a[a.length-1]===v||l&&l.split(" ").some((function(e){return e.endsWith(h)&&e[e.length-1]===v}))}var g=a&&a.startsWith(m)&&a.endsWith(p),b=!!l&&l.split(" ").some((function(e){return e.startsWith(m)&&e.endsWith(p)}));return g||b}var y=!!a&&a.includes(r),x=!!l&&l.includes(r);return o.includes(r)||i.includes(r)||y||x};return n.filter((function(e){if(e.isAmbiguous){var t=e.label,n=e.id,r=e.idtAliases,a=e.monomers;return i(t,n,r,o)||a.some((function(e){var t=e.monomerItem.props,n=t.Name,r=t.MonomerName,a=t.idtAliases;return i(n,r,a,o)}))}var l=e.props,c=l.Name,s=l.MonomerName,u=l.idtAliases;return i(c,s,u,o)})).map((function(e){return rt(rt({},e),{},{favorite:!!r[at(e)]})}))})),mt=function(e){var t=e.reduce((function(e,t){var n=t.props.MonomerNaturalAnalogCode||"Z";return e[n]||(e[n]=[]),e[n].push(rt(rt({},t),{},{label:t.props.MonomerName})),e}),{}),n=Object.entries(t).reduce((function(e,t){var n=(0,a.A)(t,2),r=n[0],o=n[1].sort((function(e,t){return e.label.localeCompare(t.label)})),i=o.findIndex((function(e){return e.label===r}));if(-1!==i){var l=o.splice(i,1);o.unshift(l[0])}return e[r]=o,e}),{});return Object.keys(n).sort((function(e,t){return e.localeCompare(t)})).reduce((function(e,t){var r={groupTitle:"Z"===t?"No natural analogue":t,groupItems:[]};return n[t].forEach((function(e){r.groupItems.push(rt(rt({},e),{},{props:rt({},e.props)}))})),r.groupItems.length&&e.push(r),e}),[])},ft=function(e){return e.library.selectedTabIndex},ht=ct.actions,vt=ht.loadMonomerLibrary,gt=ht.setFavoriteMonomersFromLocalStorage;ht.clearFavorites;var bt=ht.toggleMonomerFavorites,yt=ht.setSearchFilter,xt=ht.setSelectedTabIndex,At=ct.reducer,wt=(0,T.Z0)({name:"modal",initialState:{name:null,isOpen:!1,additionalProps:null,errorTooltipText:"",errorModalText:"",errorModalTitle:""},reducers:{openModal:function(e,t){"string"===typeof t.payload?e.name=t.payload:(e.name=t.payload.name,e.additionalProps=t.payload.additionalProps),e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1,e.additionalProps=null},openErrorTooltip:function(e,t){e.errorTooltipText=t.payload},closeErrorTooltip:function(e){e.errorTooltipText=""},openErrorModal:function(e,t){if("string"===typeof t.payload)e.errorModalText=t.payload;else{var n=t.payload,r=n.errorMessage,o=n.errorTitle;e.errorModalText=r,e.errorModalTitle=o}},closeErrorModal:function(e){e.errorModalText=""}}}),Ct=wt.actions,Mt=Ct.openModal,kt=Ct.closeModal,St=Ct.openErrorTooltip,It=Ct.closeErrorTooltip,Ot=Ct.openErrorModal,Dt=Ct.closeErrorModal,Pt=function(e){return e.modal.name},Et=function(e){return e.modal.isOpen},Nt=function(e){return e.modal.additionalProps},jt=function(e){return e.modal.errorTooltipText},Yt=function(e){return e.modal.errorModalText},Lt=function(e){return e.modal.errorModalTitle},Ft=wt.reducer;function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bt,zt=function(){return tt.getItem(Qe)},Rt=function(e){var t,n=zt();return null!==(t=null===n||void 0===n?void 0:n.findIndex((function(t){return t.name===e})))&&void 0!==t?t:-1},qt=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=zt()||[],r=Rt(t.nameInList);t.nameInList=t.name,r>-1?(n.splice(r,1,t),tt.setItem(Qe,n)):tt.setItem(Qe,[].concat((0,F.A)(n),[t]))};function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Presets="Presets"}(Bt||(Bt={}));var Ut={activePreset:null,sequenceSelection:void 0,sequenceSelectionName:void 0,isSequenceFirstsOnlyNucleoelementsSelected:void 0,activePresetMonomerGroup:null,groupItemValidations:(0,L.A)((0,L.A)((0,L.A)({},fe.BASES,[]),fe.SUGARS,[]),fe.PHOSPHATES,[]),presetsDefault:[],presetsCustom:[],activeRnaBuilderItem:null,activeMonomerKey:null,isEditMode:!1,uniqueNameError:"",invalidPresetError:"",activePresetForContextMenu:null},Vt=(0,L.A)((0,L.A)((0,L.A)({},fe.BASES,"base"),fe.SUGARS,"sugar"),fe.PHOSPHATES,"phosphate"),Kt=(0,T.Z0)({name:"rna-builder",initialState:Ut,reducers:{createNewPreset:function(e){e.activePreset={base:void 0,sugar:void 0,phosphate:void 0,name:"",nameInList:""}},setActivePreset:function(e,t){e.activePreset=_t(_t({},t.payload),{},{nameInList:t.payload.name})},setSequenceSelection:function(e,t){e.sequenceSelection=(0,F.A)(t.payload)},setSequenceSelectionName:function(e,t){e.sequenceSelectionName=t.payload},setIsSequenceFirstsOnlyNucleoelementsSelected:function(e,t){e.isSequenceFirstsOnlyNucleoelementsSelected=t.payload},setActivePresetForContextMenu:function(e,t){e.activePresetForContextMenu=t.payload},setActivePresetName:function(e,t){e.activePreset.name=t.payload},setActiveRnaBuilderItem:function(e,t){e.activeRnaBuilderItem=t.payload},recalculateRnaBuilderValidations:function(e,t){var n=function(e,t){var n,r,o=[],i=[],a=[];return t&&(null!==e&&void 0!==e&&e.sugar||null!==e&&void 0!==e&&e.phosphate||null!==e&&void 0!==e&&e.base)?(null!==e&&void 0!==e&&e.phosphate&&o.push("R2"),null!==e&&void 0!==e&&e.base&&o.push("R3"),a.push("R1"),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&!("R3"in e.sugar.props.MonomerCaps)&&a.push("DISABLED"),i.push("R1"),null!==e&&void 0!==e&&null!==(r=e.sugar)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&!("R2"in e.sugar.props.MonomerCaps)&&i.push("DISABLED"),{sugarValidations:o,phosphateValidations:i,baseValidations:a}):{sugarValidations:o,phosphateValidations:i,baseValidations:a}}(t.payload.rnaPreset,t.payload.isEditMode),r=n.sugarValidations,o=n.phosphateValidations,i=n.baseValidations;e.groupItemValidations[fe.SUGARS]=r,e.groupItemValidations[fe.BASES]=i,e.groupItemValidations[fe.PHOSPHATES]=o},setActivePresetMonomerGroup:function(e,t){e.activePresetMonomerGroup=t.payload},savePreset:function(e,t){var n=_t({},t.payload);if(qt(function(e){var t=["sugar","base","phosphate"],n=H()(e,t);n.templates=[];for(var r=0,o=t;r<o.length;r++){var i,a=e[o[r]],l=(null===a||void 0===a||null===(i=a.props)||void 0===i?void 0:i.id)||(null===a||void 0===a?void 0:a.id);l&&n.templates.push({$ref:a.isAmbiguous?(0,f.setAmbiguousMonomerTemplatePrefix)(l):(0,f.setMonomerTemplatePrefix)(l)})}return n}(n)),n.nameInList){var r=e.presetsCustom.findIndex((function(e){return e.name===n.nameInList}));n.nameInList=n.name,-1===r?e.presetsCustom.push(n):e.presetsCustom.splice(r,1,n)}else e.presetsCustom.push(n);e.activePreset&&(e.activePreset.nameInList=n.name)},deletePreset:function(e,t){var n=t.payload;!function(e){if(e){var t=zt(),n=Rt(e);t&&(t.splice(n,1),t.length?tt.setItem(Qe,t):tt.removeItem(Qe))}}(n.name);var r=e.presetsCustom.findIndex((function(e){return e.name===n.name}));e.presetsCustom.splice(r,1),n.nameInList&&(e.activePreset=null)},setIsEditMode:function(e,t){e.isEditMode=t.payload},setUniqueNameError:function(e,t){e.uniqueNameError=t.payload},setInvalidPresetError:function(e,t){e.invalidPresetError=t.payload},setDefaultPresets:function(e,t){var n=t.payload[0];n&&(e.presetsDefault.find((function(e){return e.name===n.name}))||(e.presetsDefault=t.payload))},setCustomPresets:function(e,t){e.presetsCustom=t.payload},setFavoritePresetsFromLocalStorage:function(e){var t=tt.getItem(Ge);t&&Array.isArray(t)&&(e.presetsDefault=e.presetsDefault.map((function(e){var n="".concat(e.name,"_").concat(f.MONOMER_CONST.RNA);return t.find((function(e){return e===n}))?_t(_t({},e),{},{favorite:!0}):e})))},clearFavorites:function(e){e.presetsDefault=[]},setActiveMonomerKey:function(e,t){e.activeMonomerKey=t.payload},togglePresetFavorites:function(e,t){var n=e.presetsDefault.findIndex((function(e){return e.name===t.payload.name})),r=e.presetsCustom.findIndex((function(e){return e.name===t.payload.name}));if(n>=0){var o=e.presetsDefault[n].favorite;e.presetsDefault[n].favorite=!o}else if(r>=0){!function(e){if(e){var t=zt(),n=Rt(e);t&&n>-1&&(t[n].favorite=!t[n].favorite,tt.setItem(Qe,t))}}(e.presetsCustom[r].name);var i=e.presetsCustom[r].favorite;return void(e.presetsCustom[r].favorite=!i)}var a="".concat(t.payload.name,"_").concat(f.MONOMER_CONST.RNA),l=tt.getItem(Ge)||[];l.some((function(e){return e===a}))?tt.setItem(Ge,l.filter((function(e){return e!==a}))):(l.push(a),tt.setItem(Ge,l))}}}),Wt=function(e){return e.rnaBuilder.activeRnaBuilderItem},Zt=function(e){return e.rnaBuilder.groupItemValidations},Gt=function(e){return e.rnaBuilder.activePreset},Qt=function(e){return e.rnaBuilder.sequenceSelection},Xt=function(e){return e.rnaBuilder.sequenceSelectionName},Jt=function(e){return e.rnaBuilder.isSequenceFirstsOnlyNucleoelementsSelected},$t=function(e,t){if(Vt[t]&&e)return e[Vt[t]]},en=function(e){return e.rnaBuilder.activePresetMonomerGroup},tn=function(e){return Boolean(e.name&&e.sugar&&(e.base||e.phosphate))},nn=function(e){return e.rnaBuilder.isEditMode},rn=function(e){var t,n,r,o,i,a;if(!e)return"";var l=(null===(t=e.sugar)||void 0===t?void 0:t.label)||(null===(n=e.sugar)||void 0===n?void 0:n.props.MonomerName)||"",c=(null===(r=e.base)||void 0===r?void 0:r.label)||(null===(o=e.base)||void 0===o?void 0:o.props.MonomerName)||"",s=(null===(i=e.phosphate)||void 0===i?void 0:i.label)||(null===(a=e.phosphate)||void 0===a?void 0:a.props.MonomerName)||"",u=l;return u+=l&&s||(l||s)&&c?"(".concat(c,")"):c,u+=s},on=function(e){return e.rnaBuilder.uniqueNameError},an=function(e){return e.rnaBuilder.invalidPresetError},ln=function(e){var t=e.rnaBuilder.activePreset;return t&&!t.nameInList&&!t.name&&!t.sugar&&!t.base&&!t.phosphate},cn=function(e){return e.rnaBuilder.activePresetForContextMenu},sn=function(e){return e.filter((function(e){return e.favorite}))},un=function(e){return e.rnaBuilder.activeMonomerKey},dn=function(e){var t=e.rnaBuilder,n=t.presetsDefault,r=void 0===n?[]:n,o=t.presetsCustom,i=void 0===o?[]:o;return[].concat((0,F.A)(r),(0,F.A)(i))},pn=function(e){var t,n=e.library.searchFilter,r=dn(e),o=null!==(t=function(e){return e.editor.position}(e))&&void 0!==t?t:h.vr.Library,i=n.toLowerCase();return r.filter((function(e){var t,n,r,a,l,c,s,u,d=null===(t=e.name)||void 0===t?void 0:t.toLowerCase(),p=null===(n=e.sugar)||void 0===n||null===(n=n.label)||void 0===n?void 0:n.toLowerCase(),m=null===(r=e.phosphate)||void 0===r||null===(r=r.label)||void 0===r?void 0:r.toLowerCase(),f=null===(a=e.base)||void 0===a||null===(a=a.label)||void 0===a?void 0:a.toLowerCase(),v=null===(l=e.idtAliases)||void 0===l||null===(l=l.base)||void 0===l?void 0:l.toLowerCase(),g=null===(c=e.idtAliases)||void 0===c?void 0:c.modifications,b=v;if(null!==(s=e.name)&&void 0!==s&&s.includes("MOE")&&v){var y,x,A,w=v,C=null!==(y=null===g||void 0===g?void 0:g.endpoint5)&&void 0!==y?y:"5".concat(w),M=null!==(x=null===g||void 0===g?void 0:g.internal)&&void 0!==x?x:"i".concat(w),k=null!==(A=null===g||void 0===g?void 0:g.endpoint3)&&void 0!==A?A:"3".concat(w);switch(o){case h.vr.Library:b="".concat(C,", ").concat(M);break;case h.vr.ChainStart:b=C;break;case h.vr.ChainMiddle:b=M;break;case h.vr.ChainEnd:b=k}}var S=(i.match(/\//g)||[]).length,I=i.split("/");if(S>=2&&void 0!==I[2]&&""!==I[2])return!1;if(i.startsWith("/")&&i.length>1){var O,D=i.slice(1);return(null===(O=b)||void 0===O?void 0:O.toLowerCase().startsWith(D))||(null===v||void 0===v?void 0:v.startsWith(D))||g&&Object.values(g).some((function(e){return null===e||void 0===e?void 0:e.toLowerCase().startsWith(D)}))}if(i.endsWith("/")&&i.length>1){var P,E=i.slice(0,-1),N=i[i.length-2];return(null===(P=b)||void 0===P?void 0:P.toLowerCase().endsWith(E))&&b[b.length-1]===N||(null===v||void 0===v?void 0:v.endsWith(E))&&v[v.length-1]===N||g&&Object.values(g).some((function(e){return(null===e||void 0===e?void 0:e.toLowerCase().endsWith(E))&&e[e.length-1]===N}))}return"/"===i?!!e.idtAliases:(null===d||void 0===d?void 0:d.includes(i))||(null===p||void 0===p?void 0:p.includes(i))||(null===m||void 0===m?void 0:m.includes(i))||(null===f||void 0===f?void 0:f.includes(i))||(null===(u=b)||void 0===u?void 0:u.toLowerCase().includes(i))}))},mn=Kt.actions,fn=mn.setActivePreset,hn=mn.setSequenceSelection,vn=mn.setSequenceSelectionName,gn=mn.setIsSequenceFirstsOnlyNucleoelementsSelected;mn.setActivePresetName;var bn=mn.setActiveRnaBuilderItem,yn=mn.setActiveMonomerKey,xn=mn.recalculateRnaBuilderValidations,An=mn.setActivePresetMonomerGroup,wn=mn.savePreset,Cn=mn.deletePreset,Mn=mn.createNewPreset,kn=mn.setIsEditMode,Sn=mn.setUniqueNameError,In=mn.setInvalidPresetError,On=mn.setDefaultPresets,Dn=mn.setCustomPresets,Pn=mn.setActivePresetForContextMenu,En=mn.togglePresetFavorites,Nn=mn.setFavoritePresetsFromLocalStorage,jn=mn.clearFavorites,Yn=Kt.reducer;var Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,T.U1)({reducer:{editor:_e,modal:Ft,library:At,rnaBuilder:Yn},middleware:function(e){return e({serializableCheck:!1})},preloadedState:e})}(),Fn={colorA:{regular:"#CCCBD6",hover:"#B8BBCC"},colorCM:{regular:"#FFE34C",hover:"#FFD700"},colorDQ:{regular:"#AD4551",hover:"#AB0014"},colorEN:{regular:"#93F5F5",hover:"#00F0F0"},colorFY:{regular:"#5656BF",hover:"#2626BF"},colorGX:{regular:"#E1E6ED",hover:"#CAD3E0"},colorH:{regular:"#BFC9FF",hover:"#99AAFF"},colorILV:{regular:"#50E576",hover:"#00D936"},colorKR:{regular:"#365CFF",hover:"#002CEB"},colorP:{regular:"#F2C5B6",hover:"#FFA98C"},colorST:{regular:"#FFC44C",hover:"#FFAA00"},colorW:{regular:"#99458B",hover:"#7F006B"},colorU:{regular:"#99458B",hover:"#7F006B"},chem:{regular:"#333333",hover:"#555555"},default:{regular:"#CCCBD6",hover:"#B8BBCC"}},Tn={D:{regular:"#FF8C69",hover:"#0097A8"},E:{regular:"#DC143C",hover:"#0097A8"},K:{regular:"#B0E0E6",hover:"#0097A8"},H:{regular:"#007FFF",hover:"#0097A8"},O:{regular:"#2A52BE",hover:"#0097A8"},R:{regular:"#0A12FF",hover:"#0097A8"},Q:{regular:"#EDB4ED",hover:"#0097A8"},Y:{regular:"#D65CBC",hover:"#0097A8"},U:{regular:"#CA7DE3",hover:"#0097A8"},S:{regular:"#9966CC",hover:"#0097A8"},C:{regular:"#BF00FF",hover:"#0097A8"},N:{regular:"#800080",hover:"#0097A8"},T:{regular:"#FF00FF",hover:"#0097A8"},L:{regular:"#7FFF00",hover:"#0097A8"},I:{regular:"#4CBB17",hover:"#0097A8"},F:{regular:"#008A00",hover:"#0097A8"},A:{regular:"#008080",hover:"#0097A8"},P:{regular:"#D2D900",hover:"#0097A8"},G:{regular:"#BDB76B",hover:"#0097A8"},M:{regular:"#FFF600",hover:"#0097A8"},V:{regular:"#FFD700",hover:"#0097A8"}},Bn={color:{background:{canvas:"#F5F5F5",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"rgba(94,94,94,.8)"},border:{primary:"#CAD3DD",secondary:"#7C7C7F"},text:{primary:"#333333",secondary:"#167782",light:"#585858",dark:"#000000",error:"#FF4A4A",lightgrey:"#7C7C7F"},tab:{regular:"#FFFFFF",active:"#E1E5EA",hover:"#00838F",content:"#EFF2F5"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#167782",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(113, 113, 113, 0.4)"},secondary:{active:"#585858",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},group:{active:"#167782",hover:"#2E858F"},transparent:{active:"transparent"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{primary:"#FFFFFF",default:"#EFF2F5",hover:"#DDDDDD",disabled:"#eff2f5"},border:{regular:"#cad3dd",active:"#FFFFFF",hover:"#43b5c0",focus:"#EFF2F5",error:"#FF4A4A"}},icon:{grey:"#B4B9D6",hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"},editMode:{sequenceInRNABuilder:"#99d7dc"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:"Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',\nArial, sans-serif",roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}},monomer:{color:{A:Fn.colorA,C:Fn.colorCM,M:Fn.colorCM,D:Fn.colorDQ,Q:Fn.colorDQ,E:Fn.colorEN,N:Fn.colorEN,F:Fn.colorFY,Y:Fn.colorFY,G:Fn.colorGX,X:Fn.colorGX,H:Fn.colorH,I:Fn.colorILV,L:Fn.colorILV,V:Fn.colorILV,K:Fn.colorKR,R:Fn.colorKR,P:Fn.colorP,S:Fn.colorST,T:Fn.colorST,W:Fn.colorW,U:Fn.colorU,CHEM:Fn.chem,default:Fn.default}},peptide:{color:{D:Tn.D,E:Tn.E,K:Tn.K,H:Tn.H,O:Tn.O,R:Tn.R,Q:Tn.Q,Y:Tn.Y,U:Tn.U,S:Tn.S,C:Tn.C,N:Tn.N,T:Tn.T,L:Tn.L,I:Tn.I,F:Tn.F,A:Tn.A,P:Tn.P,G:Tn.G,M:Tn.M,V:Tn.V}},border:{regular:"1px solid #CAD3DD",small:"1px solid #E1E5EA",radius:{regular:"4px"}},shadow:{regular:"0px 1px 1px rgba(197, 203, 207, 0.7)",mainLayoutBlocks:"0px 2px 5px rgba(103, 104, 132, 0.15)"},outline:{small:"1px solid #B4B9D6",medium:"2px solid #B4B9D6",color:"#B4B9D6",selected:{color:"#167782",small:"1px solid #167782",medium:"2px solid #167782"},grey:{small:"1px solid #585858"}},transition:{regular:"all .3s"},zIndex:{base:0,toolbar:10,sticky:100,overlay:200,modal:1e3,critical:9999}},zn=function(e){return(0,u.AH)({all:"unset",".Ketcher-polymer-editor-root":{all:"unset",fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) div":{boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) input":{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) h1":{fontSize:96},":where(.Ketcher-polymer-editor-root) h2":{fontSize:60},":where(.Ketcher-polymer-editor-root) h3":{fontSize:48},":where(.Ketcher-polymer-editor-root) h4":{fontSize:34},":where(.Ketcher-polymer-editor-root) h5":{fontSize:24},":where(.Ketcher-polymer-editor-root) h6":{fontSize:20,fontWeight:e.ketcher.font.weight.bold},":where(.Ketcher-polymer-editor-root) p":{fontSize:e.ketcher.font.size.regular},":where(.Ketcher-polymer-editor-root) button":{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")};var Rn="254px",qn=(0,Y.A)("div",{target:"e1vkl5kv5"})("width:",Rn,";height:calc(100% - 16px);display:flex;flex-direction:column;background-color:",(function(e){return e.theme.ketcher.color.background.primary}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.mainLayoutBlocks}),";border-radius:4px;z-index:",(function(e){return e.theme.ketcher.zIndex.toolbar}),";"),Hn=(0,Y.A)("div",{target:"e1vkl5kv4"})({name:"n1y6qf",styles:"padding:10px 0 10px 8px;position:relative;display:flex;align-items:center;gap:8px"}),_n=(0,Y.A)("div",{target:"e1vkl5kv3"})("height:24px;display:flex;flex-grow:1;gap:4px;align-items:center;padding:4px;background-color:",(function(e){return e.theme.ketcher.color.input.background.default}),";border-radius:4px;&:hover,&:has(input:focus){outline:",(function(e){return e.theme.ketcher.outline.selected.small}),";}"),Un=(0,Y.A)("button",{target:"e1vkl5kv2"})("height:24px;display:flex;align-items:center;gap:2px;border:none;border-radius:4px 0 0 4px;cursor:pointer;background-color:#e2e5e9;text-transform:none;font-weight:",(function(e){return e.theme.ketcher.font.weight.regular}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";color:",(function(e){return e.theme.ketcher.color.text.secondary}),";"),Vn=(0,Y.A)(h.In,{target:"e1vkl5kv1"})("height:16px;width:16px;color:",(function(e){return e.theme.ketcher.color.text.secondary}),";"),Kn=(0,Y.A)(h.pd,{target:"e1vkl5kv0"})({name:"pmmg8c",styles:"flex-grow:1;padding:0;margin:0;background-color:transparent;border:none;outline:none;&:hover{outline:none;}&:focus{outline:none;}"});var Wn=(0,Y.A)("div",{target:"e1pv9pa10"})((function(e){return{width:e.fullWidth?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:e.withPaddingRight?"12px":0}}),""),Zn=(0,Y.A)("div",{target:"e1pv9pa9"})((function(e){return{height:"100%",width:"100%",position:"relative",padding:"12px",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",containerType:"size",overflow:"clip"}}),""),Gn=(0,Y.A)("div",{target:"e1pv9pa8"})((function(e){return{height:"100%",width:"100%",position:"relative",paddingBottom:0,backgroundColor:e.theme.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"3px"}}),""),Qn=(0,Y.A)("div",{target:"e1pv9pa7"})((function(e){var t=e.hide;return{height:"100%",width:"fit-content",display:void 0!==t&&t?"none":"flex",flexDirection:"column"}}),""),Xn=(0,Y.A)(Qn,{target:"e1pv9pa6"})(""),Jn=(0,Y.A)(Qn,{target:"e1pv9pa5"})(""),$n=(0,Y.A)("div",{target:"e1pv9pa4"})((function(e){var t=e.shortened,n=void 0!==t&&t,r=e.theme;return{height:"36px",width:n?"calc(100% - ".concat(Rn,")"):"calc(100%)",marginBottom:"6px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FFFFFF",boxShadow:r.ketcher.shadow.mainLayoutBlocks,borderRadius:"4px"}}),""),er=(0,Y.A)("div",{target:"e1pv9pa3"})({name:"1gavlve",styles:"&:not(:empty){margin-bottom:15px;}"}),tr=(0,Y.A)("div",{target:"e1pv9pa2"})({name:"149k9u4",styles:"height:100%;width:100%;position:relative"}),nr=(0,Y.A)("div",{target:"e1pv9pa1"})({name:"0",styles:""}),rr=(0,Y.A)("div",{target:"e1pv9pa0"})({name:"1k18kha",styles:"height:40px"}),or=function(e){var t=e.children,n={Left:null,Main:null,Right:null,Top:null,Bottom:null,InsideRoot:null};return s.Children.forEach(t,(function(e){e.type===Xn?n.Left=e:e.type===Jn?n.Right=e:e.type===$n?n.Top=e:e.type===er?n.Bottom=e:e.type===tr?n.Main=e:e.type===nr&&(n.InsideRoot=e)})),(0,l.FD)(Zn,{children:[(0,l.FD)(Wn,{fullWidth:!0,withPaddingRight:!0,children:[n.Top,(0,l.FD)(Gn,{children:[n.Left,(0,l.Y)(rr,{}),n.Main]}),n.Bottom]}),(0,l.Y)(Wn,{children:n.Right}),n.InsideRoot]})};or.Left=Xn,or.Top=$n,or.Bottom=er,or.Right=Jn,or.Main=tr,or.InsideRoot=nr;var ir=(0,Y.A)("div",{target:"e19unl0y1"})({name:"1g3to66",styles:"background-color:#e1e5ea;flex-grow:1;overflow-y:auto;height:100%"}),ar=(0,Y.A)(P.A,{target:"e19unl0y0"})({name:"jwg7h4",styles:"height:100%;width:100%;align-items:start"}),lr=function(e){var t=e.children,n=e.value,r=e.index;return(0,l.Y)(ir,{role:"tabpanel",hidden:n!==r,id:r.toString(),children:n===r&&(0,l.Y)(ar,{children:t})})};var cr=(0,Y.A)(v.A,{shouldForwardProp:function(e){return"isLayoutToRight"!==e},target:"e1rrs7vg3"})("height:32px;min-height:32px;list-style-type:none;margin:0;padding:4px 8px 0 8px;border-bottom:",(function(e){var t=e.theme;return"1px solid ".concat(t.ketcher.color.border.primary)}),";overflow:unset;& .MuiTabs-scroller,& .MuiTabs-flexContainer{height:100%;overflow:unset!important;}& .MuiTabs-flexContainer{justify-content:",(function(e){return e.isLayoutToRight?"flex-end":"flex-start"}),";padding-right:",(function(e){return e.isLayoutToRight?"16px":"0"}),";}& .MuiTabs-indicator{display:none;}"),sr=(0,Y.A)(g.A,{shouldForwardProp:function(e){return"isLayoutToRight"!==e},target:"e1rrs7vg2"})("min-height:24px;min-width:0;position:relative;padding:7px 12px;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";text-transform:none;cursor:pointer;text-align:center;background-color:",(function(e){return e.theme.ketcher.color.tab.regular}),";color:",(function(e){return e.theme.ketcher.color.text.light}),";list-style-type:none;margin-left:1px;align-items:center;flex:",(function(e){return e.isLayoutToRight?void 0:"1 1 auto;"}),";border:1px solid transparent;border-bottom:none;border-radius:4px 4px 0 0;&:first-of-type{margin-left:0;}&:hover{background-color:",(function(e){return e.theme.ketcher.color.tab.regular}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";border-color:",(function(e){return e.theme.ketcher.color.border.primary}),";}&.Mui-selected{background-color:",(function(e){return e.theme.ketcher.color.tab.active}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";border-color:",(function(e){return e.theme.ketcher.color.border.primary}),";margin-bottom:-1px;padding-bottom:8px;&::after{content:'';position:absolute;left:0;bottom:-1px;height:1px;background-color:",(function(e){return e.theme.ketcher.color.tab.active}),";}}&[data-tab='Favorites']{font-size:16px;color:#faa500;}"),ur=(0,Y.A)(g.A,{target:"e1rrs7vg1"})({name:"2934o7",styles:"width:0;height:0;min-width:0;min-height:0;padding:0;margin:0;visibility:hidden"}),dr=(0,Y.A)("div",{target:"e1rrs7vg0"})({name:"2r6rpv",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%;height:100%"});function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fr=(0,s.memo)((function(e){var t=e.tabs,n=e.selectedTabIndex,r=e.isLayoutToRight,o=e.onChange,i=t[n],a=null===i||void 0===i?void 0:i.component,c=null===i||void 0===i?void 0:i.props;return(0,l.FD)(l.FK,{children:[(0,l.FD)(cr,{value:n,onChange:o,isLayoutToRight:r,children:[t.map((function(e,t){return(0,l.Y)(sr,mr({label:e.caption,title:e.tooltip,isLayoutToRight:r,"data-testid":e.testId,"data-tab":e.tooltip},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),t)})),(0,l.Y)(ur,{value:-1})]}),i&&(0,l.Y)(lr,{value:n,index:n,children:(0,l.Y)(dr,{children:(0,l.Y)(a,mr({},c))})})]})})),hr=function(){};function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var br=function(e,t,n){var r=new Map(e.map((function(e){return[(0,f.isAmbiguousMonomerLibraryItem)(e)?(0,f.setAmbiguousMonomerTemplatePrefix)(e.id):(0,f.setMonomerTemplatePrefix)(at(e)),e]})));return t.filter((function(e){return e.templates.every((function(e){return Boolean(r.get(e.$ref))}))})).map((function(e){var t=new Map(e.templates.map((function(e){var t=r.get(e.$ref),n=(0,f.monomerFactory)(t);return[(0,a.A)(n,3)[2],t]}))),o=t.get(f.KetMonomerClass.Sugar),i=t.get(f.KetMonomerClass.Base),l=t.get(f.KetMonomerClass.Phosphate),c={base:i?gr(gr({},i),{},{label:i.label}):void 0,name:e.name,phosphate:l?gr(gr({},l),{},{label:l.label}):void 0,sugar:o?gr(gr({},o),{},{label:o.label}):void 0,favorite:e.favorite,default:n||e.default};return e.idtAliases?gr(gr({},c),{},{idtAliases:e.idtAliases}):c}))},yr=function(e){return Object.entries(e).filter((function(e){var t=(0,a.A)(e,2);t[0];var n=t[1];return Boolean(n)})).map((function(e){return(0,a.A)(e,1)[0]}))},xr=function(){return(0,c.wA)()},Ar=c.d4;function wr(){var e,t=f.ketcherProvider.getKetcher(),n=(null===t||void 0===t||null===(e=t.editor)||void 0===e?void 0:e.struct().isBlank())?f.DEFAULT_LAYOUT_MODE:f.HAS_CONTENT_LAYOUT_MODE,r=Ar(Pe),o=Ar(Ne),i=(0,s.useState)(o||n),l=(0,a.A)(i,2),c=l[0],u=l[1],d=(0,s.useCallback)((function(e){u(e)}),[u]);return(0,s.useEffect)((function(){return null===r||void 0===r||r.events.layoutModeChange.add(d),function(){null===r||void 0===r||r.events.layoutModeChange.remove(d)}}),[d,null===r||void 0===r?void 0:r.events.layoutModeChange]),c}var Cr=s.createContext({}),Mr=(0,s.createContext)({width:0,height:0}),kr=function(e){var t=e.children,n=e.rootRef,r=e.isMacromoleculesEditorTurnedOn,o=(0,s.useState)({width:0,height:0}),i=(0,a.A)(o,2),c=i[0],u=i[1],d=(0,s.useCallback)((function(){if(null!==n&&void 0!==n&&n.current){var e=n.current.getBoundingClientRect(),t=e.width,r=e.height;u({width:t,height:r})}}),[n]),p=(0,s.useCallback)((0,m.debounce)(d,100),[d]);return(0,s.useEffect)((function(){d()}),[r]),(0,s.useEffect)((function(){return p(),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),(0,l.Y)(Mr.Provider,{value:c,children:t})},Sr=function(){return(0,s.useContext)(Mr).height<720};var Ir=(0,Y.A)("div",{target:"e719szw2"})("background:white;height:48px;text-align:center;cursor:",(function(e){return e.disabled?"default":"pointer"}),";opacity:",(function(e){return e.disabled?"0.4":"1"}),";display:flex;justify-content:space-between;align-items:center;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";position:relative;overflow:hidden;border-radius:4px;box-shadow:0 2px 5px 0 rgba(103, 104, 132, 0.149);margin:0;user-select:none;border-color:#167782;border-width:",(function(e){return e.selected?"2px 2px 2px":"0px"}),";border-style:solid;box-sizing:border-box;z-index:",(function(e){return e.selected?2:void 0}),";.hidden & .star{visibility:hidden!important;}&:hover{outline:1px solid #b4b9d6;>.star{visibility:visible;opacity:1;}}&::after{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:8px;border-bottom:",(function(e){return e.isVariantMonomer?"1px solid #CAD3DD":"none"}),";background:",(function(e){var t,n,r,o,i,a,l=e.code,c=e.theme,s=e.item;return s?"PEPTIDE"===(null===(n=s.props)||void 0===n?void 0:n.MonomerType)&&null!==(r=c.ketcher.peptide.color[l])&&void 0!==r&&r.regular?null===(a=c.ketcher.peptide.color[l])||void 0===a?void 0:a.regular:(null===(o=c.ketcher.monomer.color[l])||void 0===o?void 0:o.regular)||(null===(i=c.ketcher.monomer.color.default)||void 0===i?void 0:i.regular):null===(t=c.ketcher.monomer.color.default)||void 0===t?void 0:t.regular}),";},>span{position:absolute;bottom:",(function(e){return e.selected?"4px":"6px"}),";left:",(function(e){return e.selected?"4px":"6px"}),";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:85%;}>.star{color:#e1e5ea;position:absolute;top:12px;right:3px;font-size:15px;opacity:0;transition:0.2s ease;flex-shrink:0;&.visible{visibility:visible;opacity:1;}&:active{transform:scale(1.4);}&:hover,&.visible{color:#faa500;}}"),Or=(0,Y.A)("div",{target:"e719szw1"})("display:flex;justify-content:center;align-items:center;height:15px;width:",(function(e){return e.monomersAmount>=10?"20px":"15px"}),";border-radius:",(function(e){return e.monomersAmount>=10?"20px":"50%"}),";border:1px solid #cceaee;position:absolute;bottom:",(function(e){return e.selected?"4px":"6px"}),";left:",(function(e){return e.selected?"18px":"20px"}),";font-size:12px;line-height:12px;"),Dr=(0,Y.A)("span",{target:"e719szw0"})({name:"rnnx2x",styles:"font-size:12px"}),Pr=function(e,t){var n,r,o,i=Ar(Ee),l=(0,c.d4)(Jt),u=(0,s.useState)(!1),d=(0,a.A)(u,2),p=d[0],m=d[1];return(0,s.useEffect)((function(){if(!i)return m(!1);var n;if(t===f.MonomerGroups.BASES)m(!(null!==e&&void 0!==e&&null!==(n=e.props)&&void 0!==n&&null!==(n=n.MonomerCaps)&&void 0!==n&&n.R1));else if(t===f.MonomerGroups.PHOSPHATES){var r,o;m(!(null!==e&&void 0!==e&&null!==(r=e.props)&&void 0!==r&&null!==(r=r.MonomerCaps)&&void 0!==r&&r.R1&&null!==e&&void 0!==e&&null!==(o=e.props)&&void 0!==o&&null!==(o=o.MonomerCaps)&&void 0!==o&&o.R2))}else if(t===f.MonomerGroups.SUGARS){var a,c,s,u,d;if(l)m(!(null!==e&&void 0!==e&&null!==(a=e.props)&&void 0!==a&&null!==(a=a.MonomerCaps)&&void 0!==a&&a.R3&&null!==e&&void 0!==e&&null!==(c=e.props)&&void 0!==c&&null!==(c=c.MonomerCaps)&&void 0!==c&&c.R2));else m(!(null!==e&&void 0!==e&&null!==(s=e.props)&&void 0!==s&&null!==(s=s.MonomerCaps)&&void 0!==s&&s.R3&&null!==e&&void 0!==e&&null!==(u=e.props)&&void 0!==u&&null!==(u=u.MonomerCaps)&&void 0!==u&&u.R2&&null!==e&&void 0!==e&&null!==(d=e.props)&&void 0!==d&&null!==(d=d.MonomerCaps)&&void 0!==d&&d.R1))}}),[t,i,l,null===e||void 0===e||null===(n=e.props)||void 0===n||null===(n=n.MonomerCaps)||void 0===n?void 0:n.R1,null===e||void 0===e||null===(r=e.props)||void 0===r||null===(r=r.MonomerCaps)||void 0===r?void 0:r.R2,null===e||void 0===e||null===(o=e.props)||void 0===o||null===(o=o.MonomerCaps)||void 0===o?void 0:o.R3,m]),p};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr=function(e){var t=e.item,n=e.groupName,r=e.onMouseLeave,o=e.onMouseMove,i=e.isSelected,a=e.disabled,c=e.onClick,u=void 0===c?hr:c,d=xr(),p=Pr(t,n)||a,m=(0,f.isAmbiguousMonomerLibraryItem)(t)?"":t.props.MonomerType===Ke?t.props.MonomerType:t.props.MonomerNaturalAnalogCode,h=at(t),v=(0,f.isAmbiguousMonomerLibraryItem)(t)?void 0:t,g=(0,s.useCallback)((function(e){e.stopPropagation(),d(bt(t))}),[d,t]);return(0,l.FD)(Ir,Nr(Nr({selected:i,disabled:p,"data-testid":h,"data-monomer-item-id":h,item:v,isVariantMonomer:t.isAmbiguous,code:m,onMouseLeave:r,onMouseMove:o},p?{}:{onClick:u}),{},{children:[(0,l.Y)(Dr,{children:t.label}),!p&&(0,l.Y)("div",{onClick:g,className:"star ".concat(t.favorite?"visible":""),children:"\u2605"}),(0,f.isAmbiguousMonomerLibraryItem)(t)&&(0,l.Y)(Or,{selected:i,monomersAmount:t.monomers.length,children:t.monomers.length})]}))};var Yr=(0,Y.A)("div",{target:"e10tnh3n3"})({name:"37420",styles:"display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:auto;flex:1;gap:4px;&::after{content:'';flex:auto;}"}),Lr=(0,Y.A)("div",{target:"e10tnh3n2"})("position:relative;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";font-family:",(function(e){return e.theme.ketcher.font.family.roboto}),";color:",(function(e){return e.theme.ketcher.color.divider}),";margin:0;gap:4px;"),Fr=(0,Y.A)(Lr,{target:"e10tnh3n1"})({name:"qdeacm",styles:"flex-direction:column"}),Tr=(0,Y.A)("div",{target:"e10tnh3n0"})("height:100%;display:flex;flex-grow:0;flex-basis:14px;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";font-family:",(function(e){return e.theme.ketcher.font.family.roboto}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";margin:0;"),Br=function(e){var t=e.items,n=e.title,o=e.groupName,i=e.selectedMonomerUniqueKey,a=e.libraryName,c=e.disabled,u=e.onItemClick,d=void 0===u?hr:u,p=xr(),v=Ar(Pe),g=Ar(Zt),b=function(e){var t=!1;if((0,f.isAmbiguousMonomerLibraryItem)(e))return!1;if(c)t=c;else{var n,r,o=g["".concat(null===(n=e.props)||void 0===n?void 0:n.MonomerClass,"s")];if((null===o||void 0===o?void 0:o.length)>0&&null!==(r=e.props)&&void 0!==r&&r.MonomerCaps)for(var i=0;i<o.length;i++)o[i]in e.props.MonomerCaps||(t=!0)}return t},y=(0,s.useCallback)((function(e){return p(be(e))}),[p]),x=(0,s.useCallback)((0,m.debounce)((function(e){return y(e)}),500),[y]),A=function(){x.cancel(),p(be(void 0))},w=function(e){return i===at(e)};return(0,l.FD)(Fr,{children:[n&&(0,l.Y)(Tr,{children:n}),(0,l.Y)(Yr,{children:t.map((function(e){return(0,l.Y)(jr,{disabled:b(e),item:e,groupName:o,isSelected:w(e),onMouseLeave:A,onMouseMove:function(t){return function(e,t){A();var n,o,i,a=t.currentTarget.getBoundingClientRect();if((0,f.isAmbiguousMonomerLibraryItem)(e)){i=e?(0,h.Xv)(e)(a):"";var l="".concat(a.left+a.width/2,"px");o=r.AmbiguousMonomer,n={left:l,top:i,transform:"translate(-50%, 0)"}}else n={right:"-88px",top:i=e?(0,h.Dk)(a):"",transform:"translate(-50%, 0)"},o=r.Monomer;x({type:o,monomer:e,style:n})}(e,t)},onClick:function(){return function(e){p(me("monomer")),["FAVORITES","PEPTIDE","CHEM"].includes(null!==a&&void 0!==a?a:"")&&v.events.selectMonomer.dispatch(e),d(e)}(e)}},at(e))}))})]})};var zr,Rr=(0,Y.A)("div",{target:"e1bp6il60"})({name:"8z91a1",styles:"width:100%;display:flex;flex-direction:column;justify-items:center;gap:8px;padding:8px"}),qr=(0,Y.A)(Ir,{target:"e1txcvj90"})("&::after{content:'';background:",(function(e){var t=e.theme;return e.selected?t.ketcher.color.button.primary.active:"#faa500"}),";}.dots{visibility:hidden;position:absolute;right:2px;top:10px;}&:hover .dots{visibility:visible;}>.star{right:0;left:4px;top:10px;width:min-content;}"),Hr=(0,Y.A)("div",{target:"e1h0dkll2"})((function(e){return{minHeight:"32px",display:"flex",alignItems:"center",padding:"8px 12px",gap:"8px",borderBottom:e.theme.ketcher.border.small}}),""),_r=(0,Y.A)("span",{target:"e1h0dkll1"})((function(e){return{flexGrow:1,fontSize:e.theme.ketcher.font.size.regular}}),""),Ur=(0,Y.A)(h.In,{target:"e1h0dkll0"})((function(e){return{width:"16px",height:"16px",color:e.theme.ketcher.color.icon.grey,transition:e.theme.ketcher.transition.regular,transform:e.expanded?"rotate(180deg)":"none"}}),""),Vr=(0,s.memo)((function(e){var t=e.preset,n=e.isSelected,r=e.onClick,o=void 0===r?hr:r,i=e.onContextMenu,a=void 0===i?hr:i,c=e.onMouseLeave,u=void 0===c?hr:c,d=e.onMouseMove,p=void 0===d?hr:d,m=xr(),f=(0,s.useCallback)((function(e){e.stopPropagation(),m(En(t))}),[m,t]);return(0,l.FD)(qr,{"data-testid":lt(t),onClick:o,onContextMenu:a,onMouseLeave:u,onMouseMove:p,selected:n,code:t.name,"data-rna-preset-item-name":t.name,children:[(0,l.Y)("span",{children:t.name}),(0,l.Y)(Ur,{name:"vertical-dots",className:"dots",onClick:a}),(0,l.Y)("div",{"aria-hidden":!0,onClick:f,className:"star ".concat(t.favorite?"visible":""),children:"\u2605"})]})}));!function(e){e.FOR_RNA="context-menu-for-RNA",e.FOR_SEQUENCE="context-menu-for-sequence",e.FOR_POLYMER_BOND="context-menu-for-polymer-bond",e.FOR_SELECTED_MONOMERS="context-menu-for-selected-monomers"}(zr||(zr={}));var Kr=(0,Y.A)(_.W1,{target:"ekj16lc0"})("--contexify-activeItem-bgColor:rgba(243, 245, 247, 1);--contexify-menu-minWidth:140px;--contexify-activeItem-color:rgba(51, 51, 51, 1);.contexify_itemContent{font-family:",(function(e){return e.theme.ketcher.font.family.inter}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";}.contexify_separator{color:rgba(225, 229, 234, 1);}.contexify_item-title{opacity:1;font-weight:bold;}"),Wr=function e(t,n){var r=!1,o=[];return t.forEach((function(t,i){var a=t.name,c=t.title,s=t.hidden,u=t.disabled,d=t.isMenuTitle,p=t.separator,m=t.subMenuItems,f=t.onMouseOver,h=t.onMouseOut,v=m&&m.length?(0,l.Y)(_.Qw,{label:c,children:e(m,n)}):(0,l.Y)(_.q7,{id:a,onClick:function(e){r=!0,setTimeout((function(){r=!1}),500),n(e)},"data-testid":a,hidden:s,disabled:u,className:d?"contexify_item-title":"",onMouseOver:function(){r||null===f||void 0===f||f(a)},onMouseOut:function(){return null===h||void 0===h?void 0:h(a)},children:(0,l.Y)("span",{children:c})},a);o.push(v),p&&o.push((0,l.Y)(_.wv,{},i))})),o},Zr=function(e){var t=e.id,n=e.handleMenuChange,r=e.menuItems,o=xr();return(0,s.useEffect)((function(){var e=function(e){var t,n;(null===(t=e.target)||void 0===t||null===(t=t.__data__)||void 0===t?void 0:t.node)||(null===(n=e.target)||void 0===n||null===(n=n.__data__)||void 0===n?void 0:n.monomer)?e.stopPropagation():o(ye(!1))};return document.addEventListener("click",e),document.addEventListener("contextmenu",e),function(){document.removeEventListener("click",e),document.removeEventListener("contextmenu",e)}}),[o,t]),(0,l.Y)(Kr,{id:t,children:Wr(r,n)})},Gr=function(){var e=et,t=xr(),n=Ar(cn),r=Ar(ft),o=Ar(Ee),i=[{name:"duplicateandedit",title:"Duplicate and Edit...",disabled:!1},{name:"edit",title:"Edit...",separator:!0,disabled:null===n||void 0===n?void 0:n.default},{name:"deletepreset",title:"Delete Preset",disabled:null===n||void 0===n?void 0:n.default}],a=document.querySelector(h.tS);return a&&!o?(0,U.createPortal)((0,l.Y)(Zr,{id:zr.FOR_RNA,menuItems:i,handleMenuChange:function(o){var i=o.id,a=o.props;switch(i){case"duplicateandedit":a.duplicatePreset(n),r!==e&&t(xt(e));break;case"edit":a.editPreset(n),r!==e&&t(xt(e));break;case"deletepreset":t(Mt("delete"))}}}),a):null},Qr=function(e){var t=e.presets,n=e.duplicatePreset,i=e.editPreset,a=Ar(Gt),u=Ar(Pe),d=(0,_.EF)({id:zr.FOR_RNA}).show,p=(0,c.wA)(),v=function(e){return function(){var t=function(e){var t,n,r,o,i,a=!0,l=!0,c=!0;return null!==e&&void 0!==e&&null!==(t=e.base)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&t.MonomerCaps&&(a="R1"in e.base.props.MonomerCaps),null!==e&&void 0!==e&&null!==(n=e.sugar)&&void 0!==n&&null!==(n=n.props)&&void 0!==n&&n.MonomerCaps&&a&&null!==e&&void 0!==e&&null!==(o=e.base)&&void 0!==o&&null!==(o=o.props)&&void 0!==o&&o.MonomerCaps&&(l="R3"in e.sugar.props.MonomerCaps),null!==e&&void 0!==e&&null!==(r=e.phosphate)&&void 0!==r&&null!==(r=r.props)&&void 0!==r&&r.MonomerCaps&&(c="R1"in e.phosphate.props.MonomerCaps,l&&null!==e&&void 0!==e&&null!==(i=e.sugar)&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.MonomerCaps&&(l="R2"in e.sugar.props.MonomerCaps)),a&&l&&c}(e);t||!e.name?(p(fn(e)),u.events.selectPreset.dispatch(e),e.name!==a.name&&p(kn(!1))):p(In(e.name))}},g=function(e){var t;!(e instanceof HTMLDivElement)&&e.parentElement&&(e=e.parentElement);var n=e.getBoundingClientRect(),r=null===(t=e.offsetParent)||void 0===t?void 0:t.getBoundingClientRect(),o=n.right-140,i=n.y+n.height/2;return null!==r&&void 0!==r&&r.x&&(null===r||void 0===r?void 0:r.x)>o&&(o=n.x),{x:o,y:i}},b=Ar(Oe),y=(0,s.useCallback)((function(e){return p(be(e))}),[p]),x=(0,s.useCallback)((0,m.debounce)((function(e){return y(e)}),500),[y]),A=function(){x.cancel(),p(be(void 0))},w=function(e){return function(t){t.stopPropagation(),p(Pn(e)),d({event:t,props:{duplicatePreset:n,editPreset:i},position:g(t.currentTarget)})}};return(0,l.FD)(Lr,{"data-testid":"rna-preset-group",children:[(0,l.Y)(Yr,{children:t.map((function(e,t){return(0,l.Y)(Vr,{isSelected:(null===a||void 0===a?void 0:a.name)===e.name,preset:e,onClick:v(e),onContextMenu:w(e),onMouseMove:function(t){return function(e,t){if(A(),b.type!==r.Preset&&t.currentTarget){var n=[e.sugar,e.base,e.phosphate],i=t.currentTarget.getBoundingClientRect(),a={left:"".concat(i.left+i.width,"px"),top:(0,f.isAmbiguousMonomerLibraryItem)(e.base)?(0,h.Xv)(e.base)(i):(0,h._Y)(i),transform:"translate(-100%, 0)"},l=(0,f.isAmbiguousMonomerLibraryItem)(e.base)?{type:r.AmbiguousMonomer,monomer:e.base,presetMonomers:n,style:a}:{type:r.Preset,monomers:n,name:e.name,idtAliases:e.idtAliases,position:o.Library,style:a};x(l)}}(e,t)},onMouseLeave:A},"".concat(e.name).concat(t))}))}),(0,l.Y)(Gr,{})]})},Xr=function(e){var t=e.onItemClick,n=e.libraryName,r=e.duplicatePreset,o=e.editPreset,i=Ar(pt),c=Ar(pn),u=Ar(De),d=n===Ue,p=d?{monomers:dt(i),presets:sn(c)}:st(i,n),m=mt(d?p.monomers:p),h=d?function(e){var t=[];for(var n in f.MonomerGroups){var r=ut(e,f.MonomerGroups[n]);t=[].concat((0,F.A)(t),(0,F.A)(r))}return t.forEach((function(e){e.groupItems=e.groupItems.filter((function(e){return e.favorite}))})),t.filter((function(e){return e.groupItems.length}))}(i):ut(i,fe.PEPTIDES),v=(0,s.useState)(""),g=(0,a.A)(v,2),b=g[0],y=g[1],x=function(e){y(at(e))};return(0,s.useEffect)((function(){"monomer"!==u&&y("")}),[u]),(0,l.FD)(Rr,{children:[d&&m.length>0&&(0,l.Y)("div",{children:"Monomers"}),m.map((function(e,r,o){var i=e.groupItems,a=e.groupTitle;return(0,l.Y)(Br,{title:1===o.length?void 0:a,items:i,libraryName:n,onItemClick:t||x,selectedMonomerUniqueKey:b},a)})),d&&p.presets.length>0&&(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{children:"Presets"}),(0,l.Y)(Qr,{duplicatePreset:r,editPreset:o,presets:p.presets})]}),(0,l.Y)(l.FK,{children:("PEPTIDE"===n||d)&&h.map((function(e){return(0,l.Y)(Br,{title:e.groupTitle,items:e.groupItems,libraryName:n,onItemClick:t||x,selectedMonomerUniqueKey:b},e.groupTitle)}))})]})};var Jr=(0,Y.A)("div",{target:"e1fsx6x2"})({name:"kxxltl",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:8px;background-color:#f7f9fa;border-radius:0 0 4px 4px"}),$r=(0,Y.A)("span",{target:"e1fsx6x1"})("font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";overflow:hidden;text-overflow:ellipsis;color:",(function(e){return e.theme.ketcher.color.text.primary}),";"),eo=(0,Y.A)("div",{target:"e1fsx6x0"})({name:"1x17g94",styles:"display:flex;align-items:center;width:100%"}),to=(0,s.memo)((function(e){var t=e.name,n=e.fullName;return t||n?(0,l.Y)(Jr,{children:(0,l.Y)(eo,{children:(0,l.Y)($r,{children:t||n})})}):null}));var no=(0,Y.A)("div",{target:"e1ie5fzr8"})((function(e){return{height:"40px",position:"relative",marginLeft:e.isEditMode?"30px":"28.5px",display:"flex",alignItems:"center",border:e.isEditMode?"none":"1.5px solid ".concat(e.theme.ketcher.outline.color),backgroundColor:e.selected?e.theme.ketcher.color.button.primary.active:e.isEditMode?e.theme.ketcher.color.background.primary:"transparent",borderRadius:e.theme.ketcher.border.radius.regular,boxShadow:e.isEditMode?e.theme.ketcher.shadow.regular:"none",padding:"5px 10px",color:e.selected?"white":"black",gap:"8px",cursor:"pointer",outlineOffset:"1px",boxSizing:"border-box",":hover":{outline:e.theme.ketcher.outline.small},":not(:last-child)":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:e.theme.ketcher.outline.medium,borderBottom:e.theme.ketcher.outline.medium,height:"2px",width:"17px"}},":last-child":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:e.theme.ketcher.outline.medium,borderBottom:e.theme.ketcher.outline.medium,borderRadius:"0 0 0 4px",height:"130px",width:"17px"}}}}),""),ro=(0,Y.A)("div",{target:"e1ie5fzr7"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),oo=(0,Y.A)("span",{target:"e1ie5fzr6"})("font-size:",(function(e){return e.theme.ketcher.font.size.small}),";color:",(function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.background.primary:n.ketcher.color.text.light}),";opacity:",(function(e){return e.selected?.4:1}),";"),io=(0,Y.A)("span",{target:"e1ie5fzr5"})("margin-top:1px;font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";color:",(function(e){var t=e.selected,n=e.empty,r=e.theme;return t?r.ketcher.color.button.text.primary:n?"#b4b9d6":r.ketcher.color.text.primary}),";opacity:",(function(e){var t=e.selected,n=e.empty;return t&&n?.4:1}),";"),ao=(0,Y.A)("div",{target:"e1ie5fzr4"})({name:"wgokoh",styles:"position:relative;width:16px;height:16px;display:flex;align-items:center;justify-content:center"}),lo=(0,Y.A)(h.In,{target:"e1ie5fzr3"})("fill:",(function(e){var t=e.selected,n=e.empty,r=e.theme;return n?"none":t?r.ketcher.color.background.primary:r.ketcher.color.icon.grey}),";color:",(function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.background.primary:n.ketcher.color.icon.grey}),";"),co=(0,Y.A)("div",{target:"e1ie5fzr2"})("position:relative;width:60px;display:flex;flex-direction:column;gap:8px;padding:4px;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);cursor:pointer;background-color:",(function(e){var t=e.selected,n=e.theme;return t?n.ketcher.color.button.primary.active:n.ketcher.color.background.primary}),";&:hover{outline:",(function(e){return e.theme.ketcher.outline.selected.small}),";}"),so=(0,Y.A)("div",{target:"e1ie5fzr1"})("position:absolute;top:-35%;left:50%;height:15px;width:2px;background-color:",(function(e){return e.theme.ketcher.outline.color}),";"),uo=(0,Y.A)("p",{target:"e1ie5fzr0"})("margin:0;font-size:",(function(e){return e.theme.ketcher.font.size.small}),";font-weight:",(function(e){return e.theme.ketcher.font.weight.regular}),";color:",(function(e){var t=e.selected,n=e.empty,r=e.theme;return t?r.ketcher.color.button.text.primary:n?"#b4b9d6":r.ketcher.color.text.primary}),";opacity:",(function(e){var t=e.selected,n=e.empty;return t&&n?.4:1}),";"),po=(0,L.A)((0,L.A)((0,L.A)({},fe.SUGARS,"Sugar"),fe.BASES,"Base"),fe.PHOSPHATES,"Phosphate"),mo=(0,s.memo)((function(e){var t=e.selected,n=e.empty,r=e.name;return(0,l.Y)(ao,{children:(0,l.Y)(lo,{selected:t,empty:n,name:r})})})),fo=function(e){var t=e.groupName,n=e.iconName,r=e.monomerName,o=e.selected,i=e.onClick,a=e.testid,c=Ar(nn),s=!r;return(0,l.FD)(co,{selected:o,onClick:i,isEditMode:c,"data-testid":a,children:[(0,l.Y)(so,{}),(0,l.Y)(mo,{name:n,selected:o,empty:s}),(0,l.Y)(uo,{selected:o,empty:s,children:r||po[t]})]})},ho=function(e){var t=e.groupName,n=e.iconName,r=e.monomerName,o=e.selected,i=e.onClick,a=e.testid,c=Ar(nn),s=!r;return(0,l.FD)(no,{selected:o,onClick:i,isEditMode:c,"data-testid":a,children:[(0,l.Y)(mo,{name:n,selected:o,empty:s}),(0,l.FD)(ro,{children:[(0,l.Y)(oo,{selected:o,children:po[t]}),(0,l.Y)(io,{empty:s,selected:o,children:r||"Not selected"})]})]})};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bo=function(e){return Sr()?(0,l.Y)(fo,go({},e)):(0,l.Y)(ho,go({},e))};var yo=(0,Y.A)("div",{target:"e18wzlbg8"})((function(e){return{display:"flex",flexDirection:"column",padding:"10px",backgroundColor:"#F7F9FA",borderRadius:"0 0 4px 4px","&.rna-editor-expanded--sequence-edit-mode":{padding:"8px",paddingTop:"10px",border:"2px ".concat(e.theme.ketcher.color.editMode.sequenceInRNABuilder," solid"),borderTop:"none"}}}),""),xo=(0,Y.A)("input",{target:"e18wzlbg7"})("width:100%;padding:6px;border:none;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);&:hover,&:focus{outline:",(function(e){return e.theme.ketcher.outline.selected.small}),";}"),Ao=(0,Y.A)("div",{target:"e18wzlbg6"})("width:100%;display:flex;flex-direction:",(function(e){return e.compact?"row":"column"}),";justify-content:",(function(e){return e.compact?"space-between":"flex-start"}),";gap:8px;margin-top:16px;"),wo=(0,Y.A)("div",{target:"e18wzlbg5"})({name:"zmhcg5",styles:"margin-top:16px;display:flex;justify-content:space-evenly;align-items:center;gap:8px"}),Co=(0,Y.A)(h.$n,{target:"e18wzlbg4"})((function(e){return{width:"100%",whiteSpace:"nowrap",fontSize:e.theme.ketcher.font.size.regular,backgroundColor:e.primary?e.theme.ketcher.color.button.primary.active:void 0,color:e.primary&&!e.disabled?e.theme.ketcher.color.button.text.primary:e.theme.ketcher.color.text.light,outline:e.primary&&!e.disabled?e.theme.ketcher.outline.selected.small:e.theme.ketcher.outline.grey.small}}),""),Mo=(0,Y.A)("div",{target:"e18wzlbg3"})((function(e){return{position:"relative",borderRadius:e.theme.ketcher.border.radius.regular,backgroundColor:e.theme.ketcher.color.background.primary,boxShadow:e.theme.ketcher.shadow.regular,cursor:"pointer",overflow:"hidden",padding:"0 6px 6px 6px",display:"flex",alignItems:"flex-end",height:"48px",outline:e.selected?e.theme.ketcher.outline.selected.medium:"none",":hover":{outline:e.selected?void 0:e.theme.ketcher.outline.small}}}),""),ko=(0,Y.A)("span",{target:"e18wzlbg2"})((function(e){return{position:"absolute",top:"0",left:"0",width:"100%",height:"8px",backgroundColor:e.selected?e.theme.ketcher.outline.selected.color:e.theme.ketcher.outline.color}}),""),So=(0,Y.A)(h.pd,{target:"e18wzlbg1"})({name:"1jdipvd",styles:"width:100%;&:disabled{background:none;outline:none;color:inherit;}"}),Io=(0,Y.A)("div",{target:"e18wzlbg0"})({name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"}),Oo=function(e){return 0===e.size?"":1===e.size?(0,F.A)(e)[0]:"[multiple]"},Do=function(e){if(null!==e&&void 0!==e&&e.length){for(var t={sugarLabel:new Set,baseLabel:new Set,phosphateLabel:new Set},n=0;n<e.length;n++)for(var r=0,o=["sugarLabel","baseLabel","phosphateLabel"];r<o.length;r++){var i,a,l,c=o[r];(null!==(i=e[n])&&void 0!==i&&i[c]||(null===(a=e[n])||void 0===a||!a[c])&&e[n].type===f.Entities.Nucleoside&&!e[n].isNucleosideConnectedAndSelectedWithPhosphate)&&t[c].add(null===(l=e[n])||void 0===l?void 0:l[c])}return{Sugars:Oo(t.sugarLabel),Bases:Oo(t.baseLabel),Phosphates:Oo(t.phosphateLabel)}}},Po=function(e){e(An(null)),e(kn(!1))},Eo=function(e){Po(e)},No=function(e,t){Po(e),e(hn([])),t.events.turnOffSequenceEditInRNABuilderMode.dispatch(),t.mode instanceof f.SequenceMode&&t.mode.turnOffEditMode()},jo=function(e){return e.filter((function(e){return e.type?e.type===f.Entities.Nucleotide||e.type===f.Entities.Nucleoside:!!e.node&&(e.node instanceof f.Nucleotide||e.node instanceof f.Nucleoside)})).length};function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fo=function(e){var t=e.isEditMode,n=e.onDuplicate,r=[{groupName:fe.SUGARS,iconName:"sugar",testId:"rna-builder-slot--sugar"},{groupName:fe.BASES,iconName:"base",testId:"rna-builder-slot--base"},{groupName:fe.PHOSPHATES,iconName:"phosphate",testId:"rna-builder-slot--phosphate"}],o=(0,c.wA)(),i=Ar(Gt),u=Ar(ln),d=Ar(Wt),p=Ar(Pe),m=Ar(dn),h=Ar(en),v=(0,s.useState)(i),g=(0,a.A)(v,2),b=g[0],y=g[1],x=Ar(Qt),A=Ar(Xt),w=Ar(Ee),C=(0,s.useState)(!1),M=(0,a.A)(C,2),k=M[0],S=M[1],I=(0,s.useState)(Do(x)),O=(0,a.A)(I,2),D=O[0],P=O[1],E="sequence-layout-mode"===wr();(0,s.useEffect)((function(){y(i)}),[i]),(0,s.useEffect)((function(){x&&(1===jo(x)&&o(vn(function(e){var t=Do(e);return"".concat(null===t||void 0===t?void 0:t.Sugars,"(").concat(null===t||void 0===t?void 0:t.Bases,")").concat((null===t||void 0===t?void 0:t.Phosphates)||"")}(x))),P(Do(x)))}),[o,x]),(0,s.useEffect)((function(){if(d!==Bt.Presets&&t)if(w&&h){var e=Vt[h.groupName],n="".concat(e,"Label"),r=x.map((function(e){return e.isNucleosideConnectedAndSelectedWithPhosphate&&"phosphateLabel"===n||e.type===f.Entities.Phosphate&&("sugarLabel"===n||"baseLabel"===n)?e:Lo(Lo({},e),{},(0,L.A)((0,L.A)({},n,h.groupItem.label),"rnaBaseMonomerItem","Bases"===h.groupName?h.groupItem:e.rnaBaseMonomerItem))}));S(!0),o(hn(r))}else{var i=function(){if(h){var e=Vt[h.groupName],t=Lo(Lo({},b),{},(0,L.A)({},e,h.groupItem));return y(t),t}return b}(),a=null===b||void 0===b?void 0:b.name;i.editedName||(a=rn(i)),y(Lo(Lo({},i),{},{name:a}))}}),[null===h||void 0===h?void 0:h.groupItem,w]);var N,j=function(e){return function(){var n=$t(b,e);n&&!E&&p.events.selectMonomer.dispatch(n),b[Vt[e]]&&o(yn(at(b[Vt[e]]))),o(bn(e)),o(xn({rnaPreset:b,isEditMode:t}));var r="";if(w&&x.length>0){var i=x[0].baseLabel;if(i&&x.every((function(e){return e.baseLabel===i}))){var a=x[0].rnaBaseMonomerItem;a&&(r=at(a),o(yn(r)))}}setTimeout((function(){return function(e,t){if(e===Bt.Presets)return qo(null===b||void 0===b?void 0:b.name),void(b&&p.events.selectPreset.dispatch(b));var n=b[Vt[e]];n?Ho(at(n)):t&&Ho(t)}(e,r)}),100)}},Y=function(e){if(t){var n=e.target.value;y(Lo(Lo({},b),{},{name:n.trim(),editedName:!0}))}},F=function(){jo(x)>1?o(Mt("updateSequenceInRNABuilder")):(p.events.modifySequenceInRnaBuilder.dispatch(x),No(o,p))},T=function(){if(null!==b&&void 0!==b&&b.name){var e=m.find((function(e){return e.name===b.name}));e&&i.nameInList!==e.name?o(Sn(b.name)):(o(wn(b)),o(fn(b)),E||p.events.selectPreset.dispatch(b),setTimeout((function(){qo(b.name)}),0),Eo(o))}},B=function(){w?No(o,p):(y(i),Eo(o))},z=function(e){var t,n;return h&&h.groupName===e?h.groupItem.label:(null===(t=$t(b,e))||void 0===t?void 0:t.label)||(null===(n=$t(b,e))||void 0===n?void 0:n.props.MonomerName)},R=function(e){return D?D[e]:""};(0,s.useEffect)((function(){var e=function(e){"Escape"===e.key?(B(),e.preventDefault(),e.stopPropagation()):"Enter"===e.key&&(w?F():p.events.startNewSequence.dispatch({}),e.preventDefault(),e.stopPropagation())};return null===p||void 0===p||p.events.keyDown.add(e),function(){null===p||void 0===p||p.events.keyDown.remove(e)}}),[p,x]),N=u&&!w?(0,l.Y)(Co,{disabled:!tn(b),primary:!0,"data-testid":"add-to-presets-btn",onClick:T,children:"Add to Presets"}):t?(0,l.Y)(Co,{primary:!0,disabled:!!w&&!k,"data-testid":"save-btn",onClick:w?F:T,children:w?"Update":"Save"}):(0,l.Y)(Co,{"data-testid":"edit-btn",onClick:function(){o(kn(!0))},disabled:i.default,children:"Edit"});var q=Sr();return(0,l.FD)(yo,{"data-testid":"rna-editor-expanded",className:(0,K.A)(w&&"rna-editor-expanded--sequence-edit-mode"),children:[q?(0,l.Y)(xo,{value:w?A:null===b||void 0===b?void 0:b.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:w,onChange:Y}):(0,l.FD)(Mo,{selected:d===Bt.Presets,onClick:function(){return j(Bt.Presets)},children:[t?(0,l.Y)(So,{value:w?A:null===b||void 0===b?void 0:b.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:w,onChange:Y}):(0,l.Y)(Io,{children:null===b||void 0===b?void 0:b.name}),(0,l.Y)(ko,{selected:d===Bt.Presets})]}),(0,l.Y)(Ao,{compact:q,children:r.map((function(e){var t=e.groupName,n=e.iconName,r=e.testId;return(0,l.Y)(bo,{selected:d===t,groupName:t,monomerName:w?R(t):z(t),iconName:n,testid:r,onClick:j(t)},t)}))}),(0,l.FD)(wo,{children:[t?(0,l.Y)(Co,{"data-testid":"cancel-btn",onClick:B,children:"Cancel"}):(0,l.Y)(Co,{"data-testid":"duplicate-btn",disabled:!tn(b),onClick:function(){return n(b)},children:"Duplicate and Edit"}),N]})]})};var To=(0,Y.A)("div",{target:"e1ms1w5g2"})({name:"1tk8yx0",styles:"padding:8px"}),Bo=(0,Y.A)("button",{target:"e1ms1w5g1"})("width:100%;display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:",(function(e){return e.theme.ketcher.color.background.primary}),";font-weight:",(function(e){return e.theme.ketcher.font.weight.regular}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";border:none;border-radius:4px;text-transform:none;cursor:pointer;&.styled-header--sequence-edit-mode{background-color:",(function(e){return e.theme.ketcher.color.editMode.sequenceInRNABuilder}),";}&.styled-header--expanded,&.styled-header--active-preset{border-radius:4px 4px 0 0;}"),zo=(0,Y.A)(h.In,{target:"e1ms1w5g0"})("height:16px;width:16px;transform:",(function(e){return e.expanded?"rotate(180deg)":"none"}),";"),Ro=function(e){var t=document.body.querySelector(e);null===t||void 0===t||t.scrollIntoView()},qo=function(e){Ro('[data-rna-preset-item-name="'.concat(e,'"]'))},Ho=function(e){Ro('[data-monomer-item-id="'.concat(e,'"]'))},_o=function(e){var t=e.duplicatePreset,n=Ar(Gt),r=Ar(nn),o=Ar(Ee),i=rn(n),c=xr(),u=(0,s.useState)(!1),d=(0,a.A)(u,2),p=d[0],m=d[1];(0,s.useEffect)((function(){n?(n.name||r)&&m(!0):(c(Mn()),c(bn(Bt.Presets)))}),[n]),(0,s.useEffect)((function(){c(xn({rnaPreset:n,isEditMode:r}))}),[r]);return(0,l.FD)(To,{"data-testid":"rna-editor",children:[(0,l.FD)(Bo,{className:(0,K.A)(o&&"styled-header--sequence-edit-mode",p&&"styled-header--expanded",(null===n||void 0===n?void 0:n.name)&&"styled-header--active-preset"),onClick:function(){m(!p),null!==n&&void 0!==n&&n.nameInList||c(kn(!0))},"data-testid":"rna-builder-expand-button",children:["RNA Builder",(0,l.Y)(zo,{expanded:p,name:"chevron"})]}),n&&(p?(0,l.Y)(Fo,{isEditMode:r,onDuplicate:t}):(0,l.Y)(to,{name:n.name,fullName:i}))]})};var Uo=(0,Y.A)("div",{target:"e1ocltcl0"})({name:"16fpk5u",styles:"height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between"}),Vo=function(e){var t=e.ketcher;return(0,u.AH)("scrollbar-width:thin;scrollbar-color:",t.color.scroll.regular," ",t.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",t.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",t.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",t.color.scroll.regular,";}","")},Ko="Modal-module_expandButton__J1QYl";function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Go=(0,Y.A)(b.A,{target:"e45wfhi5"})({name:"dzuq2w",styles:".MuiPaper-root{min-width:304px;}"}),Qo=(0,Y.A)(y.A,{target:"e45wfhi4"})((function(e){var t=e.theme;return{padding:"2px 4px 2px 12px;",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(t.ketcher.font.family.inter),fontSize:"".concat(t.ketcher.font.size.medium),fontWeight:500,textTransform:"capitalize",borderBottom:"1px solid rgba(202, 211, 221, 1)"}}),""),Xo=(0,Y.A)("div",{target:"e45wfhi3"})({name:"10by1a4",styles:"margin-right:10px;font-size:14px"}),Jo=(0,Y.A)(h.In,{target:"e45wfhi2"})({name:"4jxctt",styles:"width:16px;height:16px;color:rgba(51, 51, 51, 1)"}),$o=(0,Y.A)(x.A,{target:"e45wfhi1"})("padding:0;font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";line-height:17px;color:#000000;",(function(e){var t=e.theme;return Vo(t)}),";"),ei=(0,Y.A)(A.A,{target:"e45wfhi0"})("height:52px;margin:0;padding:0 12px;border-top:",(function(e){var t=e.theme;return"true"===e.withborder?t.ketcher.border.small:"none"}),";justify-content:flex-end;.MuiButtonBase-root{border-radius:4px;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";}"),ti=function(e){var t=e.children,n=e.title,r=e.isOpen,o=e.showCloseButton,i=void 0===o||o,a=e.showExpandButton,c=void 0!==a&&a,u=e.onClose,p=e.className,m=e.modalWidth,f=e.expanded,v=void 0!==f&&f,g=e.setExpanded,b=void 0===g?hr:g,y=e.testId,x=(0,d.u)(),A=(0,s.useMemo)((function(){return{testId:y,style:Zo({background:x.ketcher.color.background.primary,borderRadius:"8px",color:x.ketcher.color.text.primary},c&&{margin:"auto",width:v?"100%":m,height:v?"100%":void 0,maxWidth:"calc(min(1280px, 100%))",maxHeight:"calc(min(980px, 100%))"})}}),[x.ketcher.color.text.primary,x.ketcher.color.background.canvas,v]),C=(0,s.useMemo)((function(){return{style:{background:x.ketcher.color.background.overlay,opacity:.4}}}),[x.ketcher.color.background.overlay]),M={Content:null,Footer:null};return s.Children.forEach(t,(function(e){e.type===$o?M.Content=e:e.type===ei&&(M.Footer=e)})),(0,l.FD)(Go,{BackdropProps:C,PaperProps:A,open:r,onClose:u,container:document.querySelector(h.tS),disableEscapeKeyDown:!i,className:p,sx:{padding:"24px"},children:[n||i||c?(0,l.FD)(Qo,{children:[(0,l.Y)(Xo,{children:n}),(0,l.FD)("span",{children:[c&&(0,l.Y)(w.A,{title:"expand window",className:Ko,onClick:function(){b(!v)},children:(0,l.Y)(Jo,{name:v?"minimize-expansion":"expand"})}),i&&(0,l.Y)(w.A,{title:"Close window",onClick:u,"data-testid":"close-window-button",children:(0,l.Y)(Jo,{name:"close"})})]})]}):"",M.Content,M.Footer]})};ti.Content=$o,ti.Footer=ei;var ni=(0,Y.A)("div",{target:"e117eqk610"})({name:"uawiic",styles:"display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;height:100%"}),ri=(0,Y.A)(h.nD,{target:"e117eqk69"})({name:"u6kpdv",styles:"min-height:32px"}),oi=(0,Y.A)("div",{target:"e117eqk68"})({name:"vz8pb8",styles:"flex-grow:2;min-height:32px"}),ii=(0,Y.A)("div",{target:"e117eqk67"})("position:relative;width:100%;display:flex;flex-direction:column;gap:8px;justify-content:start;padding:",(function(e){return e.compact?"4px":"8px"}),";"),ai=(0,Y.A)("div",{target:"e117eqk66"})({name:"6imefc",styles:"flex-grow:1;min-height:0;background-color:#f7f9fa;border-radius:4px;margin:4px 8px;padding:4px;&.first-tab{border-radius:0 4px 4px 4px;}&.last-tab{border-radius:4px 0 4px 4px;}"}),li=(0,Y.A)("div",{target:"e117eqk65"})("height:100%;background-color:",(function(e){return e.theme.ketcher.color.tab.content}),";border-radius:2px;overflow:auto;"),ci=(0,Y.A)(h.$n,{target:"e117eqk64"})("background-color:",(function(e){return e.theme.ketcher.color.button.transparent.active}),";color:",(function(e){return e.theme.ketcher.color.text.light}),";border-color:",(function(e){return e.theme.ketcher.color.text.light}),";"),si=(0,Y.A)("div",{target:"e117eqk63"})({name:"1q5khk2",styles:"width:100%;height:100%;background-color:#eff2f594;position:absolute;top:0;left:0"}),ui=(0,Y.A)("div",{target:"e117eqk62"})({name:"bimmx8",styles:"display:flex;justify-content:space-between;gap:8px;padding:6px 8px 0"}),di=(0,Y.A)("div",{target:"e117eqk61"})({name:"qnk899",styles:"position:relative;display:flex;align-items:center;&.rna-tab--selected{& button{border-radius:4px 4px 0 0;background-color:#f7f9fa;}&::after{content:'';position:absolute;bottom:-4px;left:0;right:0;height:8px;background-color:#f7f9fa;}}"}),pi=(0,Y.A)(g.A,{target:"e117eqk60"})("height:24px;min-height:24px;min-width:24px;",(function(e){return e.selected?"min-width: 104px;":""})," display:flex;flex-direction:row;gap:4px;align-items:center;justify-content:center;padding:4px;",(function(e){return e.selected?"margin-top: -8px;":""})," font-weight:400;font-size:10px;border-radius:4px;background-color:white;opacity:",(function(e){return e.selected?1:.6}),";text-transform:none;&:hover{background-color:#f3f8f9;}>svg{height:16px;width:16px;color:#b4b9d6;&.MuiTab-iconWrapper{margin:0;}}");function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hi=function(e){var t=Ar(pt),n=Ar(pn),r=st(t,e),o=mt(r),i=function(e){return e.filter((function(e){var t,n;return!e.isAmbiguous&&((null===(t=e.props)||void 0===t?void 0:t.MonomerClass)===f.KetMonomerClass.RNA||(null===(n=e.props)||void 0===n?void 0:n.MonomerClass)===f.KetMonomerClass.DNA)}))}(t),a=mt(i);return(0,s.useMemo)((function(){return[{groupName:Bt.Presets,iconName:"preset",groups:[{groupItems:n}]},{groupName:fe.SUGARS,iconName:"sugar",groups:o.filter((function(e){return Ze[e.groupTitle]===fe.SUGARS}))},{groupName:fe.BASES,iconName:"base",groups:o.filter((function(e){return Ze[e.groupTitle]===fe.BASES})).map((function(e){return fi(fi({},e),{},{groupItems:e.groupItems.filter((function(e){var t;return(null===(t=e.props)||void 0===t?void 0:t.MonomerClass)!==f.KetMonomerClass.RNA}))})}))},{groupName:fe.PHOSPHATES,iconName:"phosphate",groups:o.filter((function(e){return Ze[e.groupTitle]===fe.PHOSPHATES}))},{groupName:fe.NUCLEOTIDES,iconName:"nucleotide",groups:a}]}),[o,n,a])},vi=(0,s.memo)((function(e){var t=e.activeRnaBuilderItem,n=e.groupsData,r=e.onNewPresetClick,o=e.onSelectItem,i=e.duplicatePreset,a=e.editPreset,s=e.libraryName,u=(0,c.wA)(),d=Ar(pn),p=Ar(pt),m=Ar(nn),f=Ar(ln),v=Ar(un);return(0,l.FD)(l.FK,{children:[(0,l.Y)(ui,{children:n.map((function(e){var n=e.groupName,r=e.groups,o=e.iconName,i=n===t,a=ut(p,n),c=[].concat((0,F.A)(r),(0,F.A)(a)).reduce((function(e,t){return e+(t.groupItems.length||0)}),0),s=i?"".concat(n," (").concat(c,")"):null;return(0,l.Y)(di,{className:(0,K.A)(i&&"rna-tab--selected"),children:(0,l.Y)(pi,{label:s,title:n,selected:i,icon:(0,l.Y)(h.In,{name:o}),onClick:function(){return u(bn(n))},"data-testid":"summary-".concat(n)})},n)}))}),n.map((function(e){var n=e.groupName,c=e.groups;if(n!==t)return null;var u=ut(p,n),h=n===Bt.Presets?(0,l.FD)(ii,{compact:!0,children:[(0,l.Y)(ci,{onClick:r,"data-testid":"new-preset-button",children:"New Preset"}),(0,l.Y)(Qr,{duplicatePreset:i,editPreset:a,presets:d}),m&&!f&&(0,l.Y)(si,{})]}):(0,l.Y)(ii,{compact:!0,children:(0,l.FD)(l.FK,{children:[c.map((function(e){var t=e.groupItems,r=e.groupTitle;return(0,l.Y)(Br,{title:c.length>1?r:void 0,groupName:n,items:t,selectedMonomerUniqueKey:v,onItemClick:function(e){return o(e,n)}},r)})),u.map((function(e){var t=e.groupTitle,r=e.groupItems;return(0,l.Y)(Br,{title:t,items:r,libraryName:s,selectedMonomerUniqueKey:v,onItemClick:function(e){return o(e,n)}},t)}))]})}),g=t===Bt.Presets,b=t===fe.NUCLEOTIDES;return(0,l.Y)(ai,{className:(0,K.A)(g&&"first-tab",b&&"last-tab"),children:(0,l.Y)(li,{children:h})},n)}))]})})),gi=function(e){var t=e.groupName,n=e.quantity,r=e.expanded,o=e.iconName;return(0,l.FD)(Hr,{"data-testid":"summary-".concat(t),children:[(0,l.Y)(Ur,{name:o}),(0,l.FD)(_r,{children:[t," (",n,")"]}),(0,l.Y)(Ur,{name:"chevron",expanded:r})]})},bi=(0,s.memo)((function(e){var t=e.activeRnaBuilderItem,n=e.groupsData,r=e.newPreset,o=e.onNewPresetClick,i=e.onSelectItem,u=e.duplicatePreset,d=e.editPreset,p=e.libraryName,m=(0,c.wA)(),f=Ar(pn),h=Ar(pt),v=Ar(nn),g=Ar(ln),b=Ar(un),y=(0,s.useState)(t),x=(0,a.A)(y,2),A=x[0],w=x[1],C=function(e){A===e?w(null):(w(e),m(xn({rnaPreset:r,isEditMode:v})))};return(0,s.useEffect)((function(){w(t)}),[t]),(0,l.Y)(l.FK,{children:n.map((function(e){var t=A===e.groupName,n=ut(h,e.groupName),r=[].concat((0,F.A)(e.groups),(0,F.A)(n)).reduce((function(e,t){return e+(t.groupItems.length||0)}),0),a=(0,l.Y)(gi,{iconName:e.iconName,groupName:e.groupName,quantity:r,expanded:t}),c=e.groupName===Bt.Presets?(0,l.FD)(ii,{children:[(0,l.Y)(ci,{onClick:o,"data-testid":"new-preset-button",children:"New Preset"}),(0,l.Y)(Qr,{duplicatePreset:u,editPreset:d,presets:f}),v&&!g&&(0,l.Y)(si,{})]}):(0,l.Y)(ii,{children:(0,l.FD)(l.FK,{children:[e.groups.map((function(t){var n=t.groupItems,r=t.groupTitle;return(0,l.Y)(Br,{title:e.groups.length>1?r:void 0,groupName:e.groupName,items:n,selectedMonomerUniqueKey:b,onItemClick:function(t){return i(t,e.groupName)}},r)})),n.map((function(t){return(0,l.Y)(Br,{title:t.groupTitle,items:t.groupItems,libraryName:p,selectedMonomerUniqueKey:b,onItemClick:function(t){return i(t,e.groupName)}},t.groupTitle)}))]})});return e.groupName===Bt.Presets&&t?(0,l.Y)(oi,{children:(0,l.Y)(ri,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:a,details:c,expanded:t,onSummaryClick:function(){return C(e.groupName)}})},e.groupName):(0,l.Y)(ri,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(e.groupName),summary:a,details:c,expanded:t,onSummaryClick:function(){return C(e.groupName)}},e.groupName)}))})}));function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ai=function(e){var t=e.view,n=e.libraryName,r=e.duplicatePreset,o=e.editPreset,i=(0,c.wA)(),u=Ar(Wt),d=Ar(Gt),p=Ar(nn),m=Ar(Pe),h=Ar(Ee),v=(0,s.useState)(d),g=(0,a.A)(v,2),b=g[0],y=g[1];(0,s.useEffect)((function(){i(bn(p&&d?u:Bt.Presets))}),[p]);var x=hi(n),A=(0,s.useCallback)((function(){i(Mn()),i(bn(Bt.Presets)),i(kn(!0))}),[i]),w=(0,s.useCallback)((function(e,t){var n;if(i(yn(at(e))),h||p||m.events.selectMonomer.dispatch(e),p){var r=(0,f.isAmbiguousMonomerLibraryItem)(e)?null===(n=e.monomers[0].monomerItem.props.MonomerClass)||void 0===n?void 0:n.toLowerCase():e.props.MonomerClass.toLowerCase(),o=xi(xi({},b),{},(0,L.A)({},r,e));y(o),i(An({groupName:t,groupItem:e})),i(bn(t))}}),[i,m,p,h,b]);return(0,l.Y)(ni,{"data-testid":"rna-accordion",children:"tabs"===t?(0,l.Y)(vi,{activeRnaBuilderItem:u,groupsData:x,onNewPresetClick:A,onSelectItem:w,libraryName:n,editPreset:o,duplicatePreset:r}):(0,l.Y)(bi,{activeRnaBuilderItem:u,groupsData:x,newPreset:b,onNewPresetClick:A,onSelectItem:w,libraryName:n,editPreset:o,duplicatePreset:r})})},wi=function(e){var t=e.libraryName,n=e.duplicatePreset,r=e.editPreset,o=xr(),i=Ar(on),a=Ar(an),c=Sr(),s=function(){i.length>0&&o(Sn("")),a.length>0&&o(In(""))};return(0,l.FD)(Uo,{children:[(0,l.Y)(_o,{duplicatePreset:n}),(0,l.Y)(Ai,{libraryName:t,duplicatePreset:n,editPreset:r,view:c?"tabs":"accordion"}),(0,l.FD)(ti,{isOpen:!!i||!!a,title:"Error Message",onClose:s,children:[(0,l.Y)(ti.Content,{children:(0,l.FD)("div",{style:{padding:"12px"},children:[i&&'Preset with name "'.concat(i,'" already exists. Please choose another name.'),a&&'Preset with name "'.concat(a,"\" can't be used. Because it is impossible to establish bonds between monomers. Edit it's structure or choose another one.")]})}),(0,l.Y)(ti.Footer,{children:(0,l.Y)(ci,{onClick:s,children:"Close"})})]})]})};function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ki="_Copy",Si=function(e){var t=e.toggleLibraryVisibility,n=(0,s.useRef)([]),r=xr(),o=Ar(ft);(0,s.useEffect)((function(){r(yt(""))}),[r]),Ar(dn,(function(e){return n.current=e,!0}));var i=(0,s.useCallback)((function(e){r(yt(e.target.value))}),[r]),a=(0,s.useCallback)((function(e){var t,o="".concat(null===e||void 0===e?void 0:e.name).concat(ki);do{t=n.current.find((function(e){return e.name===o})),t&&(o+=ki)}while(t);if(t)r(Sn(o));else{var i=t?"".concat(o).concat(ki):o,a=Mi(Mi({},e),{},{name:i,nameInList:i,default:!1,favorite:!1});r(fn(a)),r(kn(!0)),qo(null===e||void 0===e?void 0:e.name)}}),[r]),c=(0,s.useCallback)((function(e){r(fn(e)),r(kn(!0))}),[r]),u=(0,s.useMemo)((function(){return function(e,t){return[{caption:"\u2605",tooltip:"Favorites",component:Xr,testId:"FAVORITES-TAB",props:{libraryName:Ue,duplicatePreset:e,editPreset:t}},{caption:"Peptides",component:Xr,testId:"PEPTIDES-TAB",props:{libraryName:Ve}},{caption:"RNA",testId:"RNA-TAB",component:wi,props:{libraryName:We,duplicatePreset:e,editPreset:t}},{caption:"CHEM",component:Xr,testId:"CHEM-TAB",props:{libraryName:Ke}}]}(a,c)}),[a,c]),d=(0,s.useCallback)((function(e,t){r(xt(t))}),[r]);return(0,l.FD)(qn,{"data-testid":"monomer-library",children:[(0,l.FD)(Hn,{children:[(0,l.FD)(_n,{children:[(0,l.Y)(Vn,{name:"search"}),(0,l.Y)(Kn,{type:"search","data-testid":"monomer-library-input",onChange:i,placeholder:"Search by name..."})]}),(0,l.Y)(Un,{title:"Hide library",onClick:t,"data-testid":"hide-monomer-library",children:(0,l.Y)(h.In,{name:"arrows-right"})})]}),(0,l.Y)(fr,{tabs:u,selectedTabIndex:o,onChange:d})]})},Ii=(0,Y.A)("div",{target:"emj253a0"})((function(e){var t=e.theme;return{margin:0,fontSize:t.ketcher.font.size.regular,position:"absolute",top:"12px",cursor:"pointer",visibility:"visible",opacity:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",lineHeight:1,userSelect:"none",backgroundColor:t.ketcher.color.button.primary.active,color:t.ketcher.color.button.text.primary,right:"12px",padding:"10px 8px",borderRadius:"4px","& > span":{display:"flex",justifyContent:"center",alignItems:"center","&.icon":{marginRight:"2px"}}}}),""),Oi=function(e){var t=e.onClick;return(0,l.FD)(Ii,{onClick:t,"data-testid":"show-monomer-library",children:[(0,l.Y)("span",{className:"icon",children:(0,l.Y)(h.In,{name:"arrows-left"})}),"Show Library"]})},Di=(0,Y.A)("div",{target:"e10ckbgw0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",(function(e){return e.theme.ketcher.color.spinner}),";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),Pi=function(){return(0,l.FD)(Di,{className:"loading-spinner",children:[(0,l.Y)("span",{}),(0,l.Y)("span",{}),(0,l.Y)("span",{})]})};var Ei=(0,Y.A)("div",{target:"ep0evuw1"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),Ni=(0,Y.A)("div",{target:"ep0evuw0"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),ji=function(e){var t=e.fileName;return(0,l.FD)(Ei,{children:[t&&(0,l.FD)(Ni,{children:[(0,l.Y)(h.In,{name:"file-thumbnail"}),(0,l.Y)("p",{children:t})]}),(0,l.Y)(Pi,{})]})},Yi=["textLabel","iconName","disabled","disabledText"];function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ti={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between"},Bi=(0,Y.A)(h.In,{target:"erk2iw51"})("filter:",(function(e){return e.disabled?"grayscale(1)":""}),";opacity:",(function(e){return e.disabled?"0.6":"1"}),";"),zi={backgroundColor:"#F8FEFFFF"},Ri=(0,Y.A)("div",{target:"erk2iw50"})("display:flex;flex-direction:column;align-items:center;&>span{font-size:",(function(e){return e.theme.ketcher.font.size.small}),";color:",(function(e){return e.theme.ketcher.color.text.primary}),";opacity:50%;}&>svg{margin-bottom:8px;}"),qi=function(e){var t=e.textLabel,n=e.iconName,r=e.disabled,o=e.disabledText,i=(0,Q.A)(e,Yi),a=(0,J.VB)(Fi({multiple:!1,noClick:!0,disabled:r},i)),c=a.getRootProps,u=a.getInputProps,d=a.isDragActive,p=a.open,m=(0,s.useMemo)((function(){return Fi(Fi({},Ti),d?zi:{})}),[d]);return(0,l.FD)("div",Fi(Fi({},c({style:m})),{},{onClick:p,children:[(0,l.Y)("input",Fi({},u())),(0,l.Y)(Bi,{name:n,disabled:r}),r?(0,l.Y)(Ki,{children:o}):(0,l.FD)(l.FK,{children:[(0,l.Y)(Ri,{children:t&&(0,l.Y)("span",{children:t})}),(0,l.Y)(Vi,{children:"Open from file"})]})]}))};var Hi="open-window-paste-icon",_i="open-window-upload-icon",Ui="image-frame",Vi=(0,Y.A)("p",{target:"e1035cyz3"})("font-size:10px;text-transform:uppercase;color:",(function(e){return e.theme.ketcher.color.text.light}),";margin:0;text-align:center;line-height:12px;"),Ki=(0,Y.A)("p",{target:"e1035cyz2"})("font-size:10px;margin:0;text-align:center;color:",(function(e){return e.theme.ketcher.color.text.primary}),";opacity:50%;line-height:12px;"),Wi=(0,Y.A)("div",{target:"e1035cyz1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),Zi=(0,Y.A)("div",{target:"e1035cyz0"})("width:128px;height:134px;box-shadow:0 4px 12px rgba(103, 104, 132, 0.18);padding:16px;border-radius:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:center;box-sizing:border-box;position:relative;cursor:pointer;&>p{margin-top:6px;text-align:center;}svg{fill:",(function(e){return e.theme.ketcher.color.button.primary.active}),";}"),Gi=function(e){var t=e.selectClipboard,n=e.fileLoadHandler,r=e.errorHandler;return(0,l.FD)(Wi,{children:[(0,l.FD)(Zi,{"data-testid":"paste-from-clipboard-button",onClick:t,children:[(0,l.Y)(h.In,{name:Hi}),(0,l.Y)(Vi,{children:"Paste from clipboard"})]}),(0,l.Y)(Zi,{"data-testid":"open-from-file-button",children:(0,l.Y)(qi,{onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:_i})}),(0,l.Y)(Zi,{"data-testid":"open-from-image-button",children:(0,l.Y)(qi,{accept:"image/*",onDropAccepted:n,onDropRejected:function(e){return r("Unable to accept file(s). ".concat(e))},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:Ui,disabled:!0,disabledText:"Image Recognition service is not available"})})]})},Qi=(0,Y.A)("textarea",{target:"e1q335jk0"})("min-width:430px;padding:12px;width:100%;height:100%;overflow:auto;white-space:pre-wrap;resize:none;box-sizing:border-box;outline:transparent;border:none;color:",(function(e){return e.theme.ketcher.color.input.text.active}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";background-color:",(function(e){var t=e.theme;return e.readOnly?t.ketcher.color.input.background.disabled:t.ketcher.color.input.background.primary}),";",(function(e){var t=e.theme;return Vo(t)}),";"),Xi=function(e){var t=e.value,n=e.inputHandler,r=e.readonly,o=void 0!==r&&r,i=e.selectOnInit,a=void 0!==i&&i,c=e.className,u=e.testId,d=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e;a&&(null===(e=d.current)||void 0===e||e.select())}),[d,t,a]),(0,l.Y)(Qi,{value:t,readOnly:o,onChange:n&&function(e){return n(e.target.value)},ref:d,className:c,"data-testid":u})};function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ea=(0,Y.A)(Xi,{target:"e17hogtk0"})({name:"17fmpnb",styles:"width:100%;height:320px"}),ta=function(e){if(e.isAnalyzingFile)return(0,l.Y)(ji,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return(0,l.Y)(Gi,$i({},e));case e.states.textEditor:return(0,l.Y)(ea,$i({testId:"open-structure-textarea"},e));default:return null}},na=["label","clickHandler","children","styleType"];function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ia={name:"zlt300",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center;&.MuiButtonBase-root{width:unset;min-width:70px;}"},aa=(0,Y.A)(X.A,{target:"ejign8b1"})((function(e){var t=e.theme;return{backgroundColor:t.ketcher.color.button.primary.active,border:"1px solid ".concat(t.ketcher.color.button.primary.active),color:"rgb(245, 245, 245)",fontWeight:t.ketcher.font.weight.regular,width:"62px",height:"24px","&:hover":{backgroundColor:t.ketcher.color.button.primary.hover},"&:disabled":{background:t.ketcher.color.button.primary.disabled,border:"1px solid transparent",opacity:.4}}}),ia,""),la=(0,Y.A)(X.A,{target:"ejign8b0"})((function(e){var t=e.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(t.ketcher.color.button.secondary.active),color:t.ketcher.color.button.secondary.active,fontWeight:t.ketcher.font.weight.regular,width:"72px",height:"24px","&:hover":{border:"1px solid ".concat(t.ketcher.color.button.secondary.hover),color:t.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(t.ketcher.color.button.secondary.disabled),color:t.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(t.ketcher.color.button.secondary.clicked),color:t.ketcher.color.button.secondary.clicked}}}),ia,""),ca=function(e){var t=e.label,n=e.clickHandler,r=e.children,o=e.styleType,i=(0,Q.A)(e,na);return"secondary"===o?(0,l.Y)(la,oa(oa({onClick:n,title:i.title||t,role:"button"},i),{},{children:r||t})):(0,l.Y)(aa,oa(oa({onClick:n,title:i.title||t,role:"button"},i),{},{children:r||t}))};function sa(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var n=r.result;e.msClose&&e.msClose(),t(n)},r.onerror=function(e){n(e)},r.readAsText(e,"UTF-8")}))}var ua=(0,Y.A)("div",{target:"efvrr8x1"})("position:relative;padding:",(function(e){return e.currentState===Za.openOptions?"10px 12px":"0"}),";");(0,Y.A)(ca,{target:"efvrr8x0"})({name:"1tx1l5v",styles:"margin-right:auto"}),(0,Y.A)(h.In,{target:"e23iben1"})({name:"1ux2zfx",styles:"fill:#343434"});var da=(0,Y.A)(h.In,{target:"e23iben0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),pa=function(e){var t=e.className;return(0,l.Y)(da,{name:"chevron",className:t})};function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ha=(0,Y.A)(C.A,{target:"e944g1i2"})({name:"1pt8ucq",styles:"width:100%;padding:0 8px;& label{font-size:12px;line-height:unset;}"}),va={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},ga=(0,Y.A)(M.A,{target:"e944g1i1"})("height:24px;border:1px solid #e1e5ea;border-radius:4px;font-size:14px;background-color:white;",(function(e){return e.open&&va})," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;}& span{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.medium)}),";}& .MuiOutlinedInput-notchedOutline{border:0;}"),ba={width:"120px",backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"0 6px 10px rgba(103, 104, 132, 0.15)"},ya=(0,Y.A)(k.A,{target:"e944g1i0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px;height:28px;font-size:14px;&.MuiButtonBase-root:hover{border-left:2px solid #167782;}& .MuiTypography-root{",(function(e){var t=e.theme;return"font-size: ".concat(t.ketcher.font.size.medium)}),";}"),xa=function(e){var t=e.options,n=e.currentSelection,r=e.selectionHandler,o=e.className,i=e.label,c=e.testId,u=e.customStylesForExpanded,d=void 0===u?{}:u,p=e.disabled,m=void 0!==p&&p,f=(0,s.useState)(!1),h=(0,a.A)(f,2),v=h[0],g=h[1];return(0,l.FD)(ha,{className:o,children:[i&&(0,l.Y)("label",{htmlFor:"fileformat",children:"File format:"}),(0,l.Y)(ga,{value:n,onChange:function(e){r(e.target.value)},open:v,onOpen:function(e){"keydown"!==e.type&&g(!0)},onClose:function(){g(!1)},renderValue:function(e){var n=t.filter((function(t){return t.id===e}))[0];return(0,l.Y)("span",{children:n.label})},IconComponent:pa,disabled:m,fullWidth:!0,"data-testid":c||"dropdown-select",MenuProps:{PaperProps:{style:fa(fa({},ba),d)},MenuListProps:{style:{padding:"0"}}},children:t.map((function(e){return(0,l.Y)(ya,{value:e.id,"data-testid":"".concat(e.label,"-option"),children:(0,l.Y)(S.A,{primary:e.label})},e.id)}))})]})};var Aa=(0,Y.A)("form",{target:"el6v3ot5"})({name:"9pd72t",styles:"display:flex;flex-direction:column;height:300px"}),wa=(0,Y.A)("div",{target:"el6v3ot4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),Ca=(0,Y.A)(xa,{target:"el6v3ot3"})((function(e){var t=e.theme;return{width:"calc(50% - 6px)",height:"28px","& .MuiOutlinedInput-root:hover:not(.Mui-disabled)":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)},"& .MuiOutlinedInput-root":{border:"1px solid ".concat(t.ketcher.color.input.border.regular),backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary,fontFamily:t.ketcher.font.family.inter}}}),""),Ma={border:"none"},ka=(0,Y.A)("div",{target:"el6v3ot2"})({name:"kq43v2",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff"}),Sa=(0,Y.A)("div",{target:"el6v3ot1"})((function(e){var t=e.theme;return{height:"100%",position:"relative",border:"1px solid ".concat(t.ketcher.color.input.border.regular)}}),""),Ia=(0,Y.A)("div",{target:"el6v3ot0"})((function(e){var t=e.theme;return{display:"flex",flexGrow:1,position:"relative","& button":{opacity:0,position:"absolute",right:"12px",top:"12px",borderRadius:"4px",padding:"2px",width:"28px",height:"28px","&:not(:active)":{backgroundColor:t.ketcher.color.background.primary,color:t.ketcher.color.text.primary}},"&:hover button":{opacity:1},"&:focus-within button":{opacity:0},"&:focus-within button:hover":{opacity:1}}}),"");var Oa=(0,Y.A)(ti,{target:"e1oaegu38"})((function(e){var t=e.modalWidth;return"\n    .MuiPaper-root {\n      width: ".concat(t,";\n      max-width: ").concat(t,";\n    }")}),""),Da=(0,Y.A)("div",{target:"e1oaegu37"})({name:"kj5rtd",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center"}),Pa=(0,Y.A)("div",{target:"e1oaegu36"})({name:"rpuipy",styles:"display:flex;height:24px;font-size:12px"}),Ea=(0,Y.A)(Ca,{target:"e1oaegu35"})({name:"7nflbq",styles:"padding:0;font-size:12px;& .MuiSelect-select{display:flex;align-items:center;padding:0 20px 0 8px;padding-right:20px !important;height:100%;}& span{font-size:12px;}"}),Na=(0,Y.A)(Ea,{target:"e1oaegu34"})((function(){return{width:"140px"}}),""),ja=(0,Y.A)(Ea,{target:"e1oaegu33"})({name:"16zm0c",styles:"width:76px;margin-left:8px"}),Ya=(0,Y.A)(Ea,{target:"e1oaegu32"})({name:"l4tg7k",styles:"width:105px;margin-left:8px"}),La=(0,Y.A)("div",{target:"e1oaegu31"})({name:"oq6u0f",styles:"display:flex;gap:10px"}),Fa=(0,Y.A)(ca,{target:"e1oaegu30"})({name:"b9l38d",styles:"width:min-content"}),Ta="ket",Ba="seq",za="rna",Ra="peptide",qa="fasta",Ha="one-letter",_a="three-letter",Ua=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"seq",label:"Sequence"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"helm",label:"HELM"}],Va=[{id:za,label:"RNA"},{id:"dna",label:"DNA"},{id:Ra,label:"Peptide"}],Ka=[{id:Ha,label:"1-letter code"},{id:_a,label:"3-letter code"}],Wa=f.macromoleculesFilesInputFormats,Za={openOptions:"openOptions",textEditor:"textEditor"},Ga=function(e){var t=e.ketSerializer,n=e.editor,r=e.struct,o=!n.drawingEntitiesManager.hasDrawingEntities,i=t.deserializeToDrawingEntities(r);if(!i)throw new Error("Error during parsing file");i.drawingEntitiesManager.centerMacroStructure();var a=i.drawingEntitiesManager.mergeInto(n.drawingEntitiesManager).command,l=new f.EditorHistory(n),c=n.mode instanceof f.SequenceMode,s=n.mode instanceof f.SnakeMode;n.mode instanceof f.FlexMode&&n.drawingEntitiesManager.hasAntisenseChains&&(a.merge(n.drawingEntitiesManager.applySnakeLayout(!0,!0,!0)),a.setUndoOperationsByPriority()),n.drawingEntitiesManager.detectBondsOverlappedByMonomers(),n.renderersContainer.update(a),l.update(a),c&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:f.ModeTypes.sequence,mergeWithLatestHistoryCommand:!0})),s&&(a.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:f.ModeTypes.snake,mergeWithLatestHistoryCommand:!0})),o&&n.zoomToStructuresIfNeeded()},Qa=function(){var e=(0,W.A)(G().mark((function e(t){var n,r,o,i,a,l,c,s,u,d,p,m,v,g,b,y,x,A;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.struct,r=t.formatSelection,o=t.additionalSelection,i=t.peptideLettersFormatSelection,a=t.onCloseCallback,l=t.setIsLoading,c=t.dispatch,s=r===Ta,u=r===Ba,d=r===qa,p=new f.KetSerializer,m=f.CoreEditor.provideEditorInstance(),g=n,b=function(e){c(Ot({errorMessage:"Convert error! "+e,errorTitle:u||d?"Unsupported symbols":""}))},!s){e.next=13;break}try{Ga({struct:n,ketSerializer:p,editor:m}),a()}catch(w){b("Error during file parsing.")}return e.abrupt("return");case 13:d||u&&i!==_a?(v=Wa[r][o],g=g.toUpperCase()):v=u&&i===_a?Wa.seq.peptide3Letter:Wa[r];case 14:return y=h.e3.getIndigo(),e.prev=15,l(!0),e.next=19,y.convert({struct:g,output_format:f.ChemicalMimeType.KET,input_format:v});case 19:x=e.sent,Ga({struct:x.struct,ketSerializer:p,editor:m}),a(),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),A="string"===typeof e.t0?e.t0:JSON.stringify(e.t0),b(A),f.KetcherLogger.error(e.t0);case 29:return e.prev=29,l(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[15,24,29,32]])})));return function(t){return e.apply(this,arguments)}}(),Xa=function(e){},Ja=["value","id","onChange","label","type","className","inputClassName"];function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tl,nl=(0,Y.A)("label",{target:"e10m4n7r1"})((function(e){return{display:"flex",flexDirection:"column",marginRight:"8px",color:e.theme.ketcher.color.text.primary,fontSize:"12px"}}),""),rl=(0,Y.A)("input",{target:"e10m4n7r0"})((function(e){var t=e.theme;return{height:"24px",padding:"3px 7px",border:"1px solid ".concat(t.ketcher.color.input.border.regular),fontSize:"14px",borderRadius:"4px",backgroundColor:t.ketcher.color.input.background.primary,color:t.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:t.ketcher.color.input.text.active},"&:hover":{border:"1px solid ".concat(t.ketcher.color.input.border.hover)}}}),""),ol=function(e){var t=e.value,n=e.id,r=e.onChange,o=e.label,i=e.type,a=e.className,c=e.inputClassName,s=(0,Q.A)(e,Ja);return(0,l.Y)(l.FK,{children:(0,l.FD)(nl,{htmlFor:n,className:a,children:[o&&(0,l.Y)("span",{children:o}),(0,l.Y)(rl,el({type:i||"text",id:n,value:t,className:c,onChange:function(e){r(e.target.value)}},s))]})})};!function(e){e.Ket="chemical/x-ket",e.Mol="chemical/x-mdl-molfile",e.HELM="chemincal/x-helm",e.Fasta="chemical/x-fasta",e.Sequence="chemical/x-sequence",e.Idt="chemical/x-idt",e.Svg="image/svg+xml"}(tl||(tl={}));var il=(0,R.A)((function e(t,n,r,o,i){(0,z.A)(this,e),this.name=t,this.mime=n,this.extensions=r,this.supportsCoords=o||!1,this.options=i||{}})),al={ket:new il("Ket file",tl.Ket,[".ket"],!0,{}),mol:new il("MDL Molfile V3000",tl.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),fasta:new il("FASTA",tl.Fasta,[".fasta"],!1,{}),sequence:new il("SEQUENCE",tl.Sequence,[".seq"],!1,{}),"sequence-3-letter":new il("SEQUENCE (3-letter code)",tl.Sequence,[".seq"],!1,{}),idt:new il("IDT",tl.Idt,[".idt"],!1,{}),helm:new il("HELM",tl.HELM,[".helm"]),svg:new il("SVG Document",tl.Svg,[".svg"])},ll=function(e){return al[e]};var cl=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"sequence",label:"Sequence (1-letter code)"},{id:"sequence-3-letter",label:"Sequence (3-letter code)"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"svg",label:"SVG Document"},{id:"helm",label:"HELM"}],sl={mol:f.ChemicalMimeType.Mol,fasta:f.ChemicalMimeType.FASTA,sequence:f.ChemicalMimeType.SEQUENCE,"sequence-3-letter":f.ChemicalMimeType.PeptideSequenceThreeLetter,idt:f.ChemicalMimeType.IDT,helm:f.ChemicalMimeType.HELM},ul=(0,Y.A)(ti,{target:"e12csxs60"})({name:"krpfk5",styles:"& div.MuiPaper-root{background:white;min-height:400px;min-width:430px;}& .MuiDialogContent-root{overflow:hidden;height:100%;}"}),dl=(0,Y.A)(ca,{target:"e1kgbmg80"})((function(){return{width:"72px"}}),"");var pl=(0,Y.A)("div",{target:"e11sfr0q0"})({name:"606i4c",styles:"padding:12px"});var ml=(0,Y.A)("div",{target:"e1wvbgsi0"})({name:"606i4c",styles:"padding:12px"}),fl=(0,Y.A)("div",{target:"e1tvvbc92"})((function(){return{display:"flex",flexDirection:"column",rowGap:"2px",alignItems:"center",marginBottom:"5px"}}),""),hl=(0,Y.A)("span",{target:"e1tvvbc91"})((function(e){return{margin:0,padding:0,textAlign:"center",display:"block",font:e.theme.ketcher.font.family.inter,fontSize:e.theme.ketcher.font.size.small,fontWeight:e.theme.ketcher.font.weight.regular,color:e.disabled?"rgba(180, 185, 214, 1)":e.theme.ketcher.color.text.light}}),""),vl=(0,Y.A)("div",{target:"e1tvvbc90"})((function(){return{height:"100%"}}),""),gl=function(e){return"O"===e?"OH":e};var bl=(0,Y.A)(h.c9,{target:"e1huhxto1"})((function(e){var t=e.theme,n=e.isExpanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}}),""),yl=(0,Y.A)("div",{target:"e1huhxto0"})({name:"wfzm1y",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-self:flex-start;width:100%;gap:7px"});var xl=(0,Y.A)("div",{target:"e8i5wzj0"})({name:"2oefzz",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:8px;color:#7c7c7f;border:1px solid #cad3dd;width:100%;height:100%"}),Al=function(){return(0,l.FD)(xl,{children:[(0,l.Y)(h.In,{name:"questionMark"}),"Unknown structure"]})},wl=(0,Y.A)("div",{target:"e1q9gayd0"})((function(e){var t=e.theme,n=e.expanded;return{display:"flex",border:"1.5px solid ".concat(t.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:n?"auto":"150px",width:n?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}}),""),Cl=function(e){var t=e.monomer,n=e.expanded,r=e.selectedAttachmentPoint,o=e.connectedAttachmentPoints,i=e.usage,a=(0,s.useRef)(null);return(0,s.useLayoutEffect)((function(){var e=a.current;if(e){var n=(0,V.Ltv)(e);if(t instanceof f.AmbiguousMonomer){var l=(e.width.baseVal.value-e.x.baseVal.value)/2,c=(e.height.baseVal.value-e.y.baseVal.value)/2,s=new f.Vec2(l,c),u=f.Coordinates.canvasToModel(s),d=new f.AmbiguousMonomer(t.variantMonomerItem,u);new f.AmbiguousMonomerRenderer(d).showExternal({canvas:n,usage:i,selectedAttachmentPoint:r,connectedAttachmentPoints:o})}}}),[r,o]),(0,l.Y)(wl,{expanded:n,children:(0,l.Y)("svg",{ref:a})})},Ml=function(e){var t=e.monomer,n=e.attachmentPoints,r=e.connectedAttachmentPoints,o=e.selectedAttachmentPoint,i=e.usage,a=e.needCache,c=e.update,s=e.expanded,u=t instanceof f.AmbiguousMonomer,d=t.monomerItem.props.unresolved;return(0,l.FD)(l.FK,{children:[u?(0,l.Y)(Cl,{monomer:t,expanded:s,selectedAttachmentPoint:o,connectedAttachmentPoints:r,usage:i}):d?(0,l.Y)(Al,{}):(0,l.Y)(bl,{struct:t.monomerItem.struct,options:{connectedMonomerAttachmentPoints:r,currentlySelectedMonomerAttachmentPoint:null!==o&&void 0!==o?o:void 0,usageInMacromolecule:i,labelInMonomerConnectionsModal:!0,needCache:null!==a&&void 0!==a&&a},update:c,isExpanded:s}),(0,l.Y)(yl,{children:n})]})},kl=(0,Y.A)("div",{target:"e14t14ao2"})((function(e){var t=e.theme,n=e.isExpanded;return{margin:0,padding:0,textAlign:"center",alignSelf:"flex-end",display:"block",font:t.ketcher.font.family.inter,fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,flexBasis:"200px",lineHeight:"14px",maxWidth:n?void 0:"150px"}}),""),Sl=(0,Y.A)("div",{target:"e14t14ao1"})((function(e){var t=e.theme;return{width:10,height:2,display:"block",color:t.ketcher.color.button.secondary.hover,backgroundColor:t.ketcher.color.button.secondary.hover,borderRadius:20,margin:"auto"}}),""),Il=(0,Y.A)("div",{target:"e14t14ao0"})((function(){return{display:"grid",gridAutoFlow:"column",gridTemplateRows:"auto auto auto",gridTemplateColumns:"1fr 10px 1fr",justifyContent:"center",alignItems:"flex-start",padding:"12px",paddingBottom:0,height:"100%",columnGap:"12px",rowGap:"8px"}}),""),Ol=function(e){return e instanceof f.AmbiguousMonomer?"Ambiguous ".concat(e.monomerClass):e.monomerItem.props.Name},Dl=function(e){var t=e.firstMonomer,n=e.secondMonomer,r=e.expanded,o=e.firstMonomerOverview,i=e.secondMonomerOverview,a=Ol(t),c=Ol(n);return(0,l.FD)(Il,{children:[(0,l.Y)(kl,{isExpanded:r,children:a}),o,(0,l.Y)("span",{}),(0,l.Y)(Sl,{}),(0,l.Y)("span",{}),(0,l.Y)(kl,{isExpanded:r,children:c}),i]})};function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var El=(0,Y.A)(ti,{target:"e1byht5d3"})({name:"1j7jcep",styles:"& .MuiPaper-root{background:#fff !important;}& .MuiDialogContent-root{overflow:hidden;}"}),Nl=(0,Y.A)(ca,{target:"e1byht5d2"})((function(){return{width:"97px !important"}}),""),jl=(0,Y.A)(ca,{target:"e1byht5d1"})((function(e){return{width:"97px !important",color:e.disabled?"rgba(51, 51, 51, 0.6)":"",background:e.disabled?"rgba(225, 229, 234, 1) !important":"",opacity:"1 !important",minHeight:"0"}}),""),Yl=(0,Y.A)(ca,{target:"e1byht5d0"})((function(e){return{borderRadius:5,minWidth:"45px !important",padding:"4px",border:"1px solid ".concat(e.theme.ketcher.color.border.secondary),color:e.disabled?"rgba(51, 51, 51, 0.6) !important":"",background:e.disabled?"rgba(225, 229, 234)":"",borderColor:e.disabled?"rgba(225, 229, 234) !important":""}}),"");function Ll(e){var t=e.monomer,n=e.selectedAttachmentPoint,r=e.onSelectAttachmentPoint,o=e.expanded,i=void 0!==o&&o,c=(0,s.useState)(t.attachmentPointsToBonds),u=(0,a.A)(c,2),d=u[0],p=u[1],m=(0,s.useState)((function(){return yr(d)})),h=(0,a.A)(m,2),v=h[0],g=h[1];(0,s.useEffect)((function(){p(t.attachmentPointsToBonds)}),[n]),(0,s.useEffect)((function(){var e=yr(d);g(e)}),[d]);var b=function(e){var n=t.monomerCaps,r=t instanceof f.AmbiguousMonomer;if(!n)return r?null:"H";var o=n[e];return gl(o)},y=function(e){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.attachmentPointsToBonds),i=n?o[n]:null;n&&i&&t.removeBond(i);var a=t.getPotentialBond(e);o[e]=a,p(o),r(e);var l=yr(o);g(l)};return(0,l.Y)(Ml,{monomer:t,connectedAttachmentPoints:v,selectedAttachmentPoint:n,usage:f.UsageInMacromolecule.MonomerConnectionsModal,update:i,expanded:i,attachmentPoints:t.listOfAttachmentPoints.map((function(e){var t=Boolean(v.includes(e)&&e!==n);return(0,l.FD)(fl,{children:[(0,l.Y)(Yl,{label:e,styleType:e===n?"primary":"secondary",clickHandler:function(){return y(e)},disabled:t}),(0,l.Y)(hl,{"data-testid":"leaving-group-value",disabled:t,children:b(e)})]},e)}))})}function Fl(e){if(e.chosenFirstAttachmentPointForBond)return e.chosenFirstAttachmentPointForBond;if(e.chosenSecondAttachmentPointForBond)return e.chosenSecondAttachmentPointForBond;var t=Object.entries(e.attachmentPointsToBonds).filter((function(e){var t=(0,a.A)(e,2);return t[0],null==t[1]}));return 1===t.length?(0,a.A)(t[0],1)[0]:null}var Tl=(0,Y.A)("p",{target:"e1e4h5hm0"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),Bl={open:function(e){var t=e.isModalOpen,r=e.onClose,o=xr(),i=(0,s.useState)(""),c=(0,a.A)(i,2),u=c[0],d=c[1],p=(0,s.useState)(""),m=(0,a.A)(p,2),h=m[0],v=m[1],g=(0,s.useState)(!1),b=(0,a.A)(g,2),y=b[0],x=b[1],A=(0,s.useState)(),w=(0,a.A)(A,2),C=w[0],M=w[1],k=(0,s.useState)(Za.openOptions),S=(0,a.A)(k,2),I=S[0],O=S[1],D=(0,s.useState)(Ta),P=(0,a.A)(D,2),E=P[0],N=P[1],j=(0,s.useState)(za),Y=(0,a.A)(j,2),L=Y[0],F=Y[1],T=(0,s.useState)(Ha),B=(0,a.A)(T,2),z=B[0],R=B[1];(0,s.useEffect)((function(){var e=null===h||void 0===h?void 0:h.split("."),t=e[e.length-1];if(t){var n=Ua.find((function(e){return e.id===t})),r=null!==n&&void 0!==n&&n.id?n.id:Ba;N(r)}}),[h]),(0,s.useEffect)((function(){new Promise((function(e,t){n.g.FileReader?e(sa):t(new Error("Your browser does not support opening files locally"))})).then((function(e){M({chosenOpener:e})}))}),[]);var q=(0,s.useCallback)((function(){O(Za.openOptions),d(""),N(Ta),F(za),r()}),[r]),H=function(){Qa({struct:u,formatSelection:E,additionalSelection:L,peptideLettersFormatSelection:z,onCloseCallback:q,setIsLoading:x,dispatch:o})},_=function(){var e=f.CoreEditor.provideEditorInstance(),t=new f.EditorHistory(e),n=e.drawingEntitiesManager.deleteAllEntities();t.update(n),e.renderersContainer.update(n),e.zoomToStructuresIfNeeded(),Qa({struct:u,formatSelection:E,additionalSelection:L,peptideLettersFormatSelection:z,onCloseCallback:q,setIsLoading:x,dispatch:o})};return(0,l.FD)(Oa,{isOpen:t,title:"Open Structure",onClose:q,modalWidth:I===Za.textEditor?"620px":"",children:[(0,l.Y)(ti.Content,{children:(0,l.FD)(ua,{currentState:I,children:[(0,l.Y)(ta,{isAnalyzingFile:false,fileName:h,currentState:I,states:Za,selectClipboard:function(){return O(Za.textEditor)},fileLoadHandler:function(e){v(e[0].name),null===C||void 0===C||C.chosenOpener(e[0]).then((function(e){d(e),O(Za.textEditor)}),(function(){}))},errorHandler:Xa,value:u,inputHandler:d}),y&&(0,l.Y)(ka,{children:(0,l.Y)(Pi,{})})]})}),I===Za.textEditor?(0,l.Y)(ti.Footer,{withborder:"true",children:(0,l.FD)(Da,{children:[(0,l.FD)(Pa,{children:[(0,l.Y)(Na,{options:Ua,currentSelection:E,selectionHandler:N,customStylesForExpanded:Ma},E),E===Ba||E===qa?(0,l.Y)(ja,{options:Va,currentSelection:L,selectionHandler:F,customStylesForExpanded:Ma,testId:"dropdown-select-type"},L):null,E===Ba&&L===Ra?(0,l.Y)(Ya,{options:Ka,currentSelection:z,selectionHandler:R,testId:"dropdown-select-peptide-letters-format"}):null]}),(0,l.FD)(La,{children:[(0,l.Y)(Fa,{disabled:!u,clickHandler:_,label:"Open as New",styleType:"secondary","data-testid":"open-as-new-button"},"openButton"),(0,l.Y)(Fa,{disabled:!u,clickHandler:H,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard","data-testid":"add-to-canvas-button"},"copyButton")]})]})}):(0,l.Y)(l.FK,{})]})},save:function(e){var t=e.onClose,n=e.isModalOpen,r=xr(),o=(0,s.useState)("ket"),i=(0,a.A)(o,2),c=i[0],u=i[1],d=(0,s.useState)("ketcher"),p=(0,a.A)(d,2),m=p[0],v=p[1],g=(0,s.useState)(""),b=(0,a.A)(g,2),y=b[0],x=b[1],A=(0,s.useState)(!1),w=(0,a.A)(A,2),C=w[0],M=w[1],k=(0,s.useState)(),S=(0,a.A)(k,2),I=S[0],O=S[1],D=h.e3.getIndigo(),P=f.CoreEditor.provideEditorInstance(),E=function(){var e=(0,W.A)(G().mark((function e(t){var n,o,i,a,l,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(t),n=new f.KetSerializer,o=n.serialize(P.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),P.drawingEntitiesManager),O(void 0),"ket"!==t){e.next=7;break}return x(o),e.abrupt("return");case 7:if("svg"!==t){e.next=11;break}return i=(0,f.getSvgFromDrawnStructures)(P.canvas,"preview"),O(i),e.abrupt("return");case 11:if(e.prev=11,M(!0),"fasta"!==t&&"sequence"!==t){e.next=17;break}if(P.drawingEntitiesManager.validateIfApplicableForFasta()){e.next=17;break}throw new Error("Error during sequence type recognition(RNA, DNA or Peptide)");case 17:return e.next=19,D.convert({struct:o,output_format:sl[t]});case 19:a=e.sent,x(a.struct),e.next=30;break;case 23:e.prev=23,e.t0=e.catch(11),l=e.t0 instanceof Error?e.t0.message:"string"===typeof e.t0?e.t0:JSON.stringify(e.t0),r(Ot(c="Convert error! "+l)),f.KetcherLogger.error(c),u("ket");case 30:return e.prev=30,M(!1),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[11,23,30,33]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e;if("svg"===c){var n=(0,f.getSvgFromDrawnStructures)(P.canvas,"file");if(!n)return void t();e=n}else e=y;var r=new Blob([e],{type:ll(c).mime}),o=ll(c);(0,$.saveAs)(r,"".concat(m).concat(o.extensions[0])),t()};return(0,s.useEffect)((function(){if("ket"===c){var e=(new f.KetSerializer).serialize(P.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),P.drawingEntitiesManager);x(e)}}),[c]),(0,l.FD)(ul,{title:"save structure",isOpen:n,onClose:t,testId:"save-structure-dialog",children:[(0,l.Y)(ti.Content,{children:(0,l.FD)(Aa,{onSubmit:N,id:"save",children:[(0,l.FD)(wa,{style:{padding:"12px 12px 10px"},children:[(0,l.Y)("div",{children:(0,l.Y)(ol,{value:m,id:"filename",onChange:function(e){v(e)},label:"File name:","data-testid":"filename-input"})}),(0,l.Y)(Ca,{label:"File format:",options:cl,currentSelection:c,selectionHandler:E,customStylesForExpanded:Ma,testId:"file-format-list"})]}),I?(0,l.Y)(Sa,{dangerouslySetInnerHTML:{__html:I},"data-testid":"preview-area"}):(0,l.FD)(Ia,{children:[(0,l.Y)(Xi,{testId:"preview-area",value:y,readonly:!0}),(0,l.Y)(h.K0,{onClick:function(e){e.preventDefault();try{(0,f.isClipboardAPIAvailable)()?navigator.clipboard.writeText(y):(0,f.legacyCopy)(e.clipboardData,{"text/plain":y})}catch(t){f.KetcherLogger.error("copyAs.js::copyAs",t),r(Ot("This feature is not available in your browser"))}},iconName:"copy",title:"Copy to clipboard",testId:"copy-to-clipboard"}),C&&(0,l.Y)(ka,{children:(0,l.Y)(Pi,{})})]})]})}),(0,l.FD)(ti.Footer,{children:[(0,l.Y)(ca,{label:"Cancel",styleType:"secondary",clickHandler:t,"data-testid":"cancel-button"}),(0,l.Y)(ca,{label:"Save",clickHandler:N,disabled:!m,"data-testid":"save-button"})]})]})},delete:function(e){var t=e.isModalOpen,n=e.onClose,r=xr(),o=Ar(cn),i=Ar(Pe),a=(0,s.useCallback)((function(){n()}),[n]);return(0,l.FD)(ti,{isOpen:t,title:"Delete RNA Preset",onClose:a,children:[(0,l.Y)(ti.Content,{children:(0,l.FD)(pl,{"data-testid":"delete-preset-popup-content",children:[(0,l.Y)("div",{children:"You are about to delete"}),(0,l.FD)("div",{children:['"',o.name,'" RNA preset.']}),(0,l.Y)("div",{children:"This operation cannot be undone."})]})}),(0,l.FD)(ti.Footer,{children:[(0,l.Y)(dl,{clickHandler:function(){a()},label:"Cancel",styleType:"secondary"},"cancel"),(0,l.Y)(dl,{clickHandler:function(){a(),r(Cn(o)),r(kn(!1)),r(Mn()),i.events.selectPreset.dispatch(null)},label:"Delete"},"delete")]})]})},updateSequenceInRNABuilder:function(e){var t=e.isModalOpen,n=e.onClose,r=xr(),o=Ar(Qt),i=Ar(Pe),a=jo(o),c=(0,s.useCallback)((function(){n()}),[n]);return(0,l.FD)(ti,{isOpen:t,title:"Update sequence",onClose:c,children:[(0,l.Y)(ti.Content,{children:(0,l.FD)(ml,{children:["You are going to modify ",a," nucleotides. Are you sure?"]})}),(0,l.FD)(ti.Footer,{children:[(0,l.Y)(ca,{clickHandler:function(){c()},label:"Cancel",styleType:"secondary"},"cancel"),(0,l.Y)(ca,{clickHandler:function(){c(),i.events.modifySequenceInRnaBuilder.dispatch(o),No(r,i)},label:"Yes"},"update")]})]})},monomerConnection:function(e){var t=e.onClose,n=e.isModalOpen,r=e.firstMonomer,o=e.secondMonomer,i=e.polymerBond,c=e.isReconnectionDialog,u=Ar(Pe),d=(0,s.useRef)(null===i||void 0===i?void 0:i.firstMonomerAttachmentPoint),p=(0,s.useRef)(null===i||void 0===i?void 0:i.secondMonomerAttachmentPoint),m=(0,s.useRef)((null===r||void 0===r?void 0:r.hasFreeAttachmentPoint)||(null===o||void 0===o?void 0:o.hasFreeAttachmentPoint));if(!r||!o)throw new Error("Monomers must exist!");var f=(0,s.useState)(d.current||Fl(r)),h=(0,a.A)(f,2),v=h[0],g=h[1],b=(0,s.useState)(p.current||Fl(o)),y=(0,a.A)(b,2),x=y[0],A=y[1],w=(0,s.useState)(!1),C=(0,a.A)(w,2),M=C[0],k=C[1],S=function(){var e;c?(null===i||void 0===i||i.firstMonomer.setBond(d.current,i),null===i||void 0===i||null===(e=i.secondMonomer)||void 0===e||e.setBond(p.current,i),t()):(u.events.cancelBondCreationViaModal.dispatch(o),t())};return(0,l.FD)(El,{title:c?"Edit Connection Points":"Select connection points",isOpen:n,onClose:S,showExpandButton:!0,modalWidth:"358px",expanded:M,setExpanded:k,children:[(0,l.Y)(ti.Content,{children:(0,l.Y)(vl,{children:(0,l.Y)(Dl,{firstMonomer:r,secondMonomer:o,expanded:M,firstMonomerOverview:(0,l.Y)(Ll,{monomer:r,selectedAttachmentPoint:v,onSelectAttachmentPoint:g,expanded:M}),secondMonomerOverview:(0,l.Y)(Ll,{monomer:o,selectedAttachmentPoint:x,onSelectAttachmentPoint:A,expanded:M})})})}),(0,l.FD)(ti.Footer,{children:[(0,l.Y)(Nl,{label:"Cancel",styleType:"secondary",clickHandler:S}),(0,l.Y)(jl,{label:c?"Reconnect":"Connect",disabled:!v||!x||!m.current,clickHandler:function(){if(!v||!x)throw new Error("Attachment points cannot be falsy");v!==d.current||x!==p.current?(u.events.createBondViaModal.dispatch({firstMonomer:r,secondMonomer:o,firstSelectedAttachmentPoint:v,secondSelectedAttachmentPoint:x,polymerBond:i,isReconnection:c,initialFirstMonomerAttachmentPoint:d.current,initialSecondMonomerAttachmentPoint:p.current}),t()):S()}})]})]})},confirmationDialog:function(e){var t=e.title,n=e.confirmationText,r=e.onConfirm,o=e.isModalOpen,i=e.onClose;return(0,l.FD)(ti,{isOpen:o,title:t||"Confirm your action",onClose:i,children:[(0,l.Y)(ti.Content,{children:(0,l.Y)(Tl,{children:n})}),(0,l.FD)(ti.Footer,{children:[(0,l.Y)(ca,{label:"Cancel",clickHandler:i}),(0,l.Y)(ca,{label:"Yes",clickHandler:function(){r(),i()},styleType:"secondary"})]})]})}};function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rl=function(){var e=Ar(Et),t=Ar(Pt),n=Ar(Nt),r=xr(),o=(0,s.useCallback)((function(){r(kt())}),[r]);if(!t)return null;var i=Bl[t];if(!i)throw new Error("There is no modal window named ".concat(t));return n?(0,l.Y)(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClose:o,isModalOpen:e},n)):(0,l.Y)(i,{onClose:o,isModalOpen:e})};var ql=(0,Y.A)("div",{target:"e15avtnm2"})({name:"1bweptz",styles:"background-color:#333333;max-height:40px;display:flex;align-items:stretch"}),Hl=(0,Y.A)("div",{target:"e15avtnm1"})({name:"1my6l07",styles:"max-width:356px;padding:4px 10px 4px 10px;color:white;display:flex"}),_l=(0,Y.A)(h.K0,{target:"e15avtnm0"})({name:"1c8hqv0",styles:"color:white;width:24px;height:auto;display:flex;align-items:center;justify-content:center;&:hover{background-color:#585858;color:white;}svg{width:16px;height:16px;}"}),Ul=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"chem",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,l.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"0.75",fill:"#F5F6F7"})}),(0,l.Y)("symbol",{id:"chem-selection",viewBox:"0 0 59 59",width:"59",height:"59",children:(0,l.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"0.75",stroke:"#0097A8",fill:"none",strokeWidth:"1.5"})})]})},Vl=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"peptide",viewBox:"0 0 70 61",width:"70",height:"61",children:(0,l.Y)("path",{className:"monomer-body",transform:"scale(0.5)","data-actual-width":"35","data-actual-height":"30.5",d:"M16.9236 1.00466C17.2801 0.383231 17.9418 6.10888e-07 18.6583 5.98224e-07L51.3417 2.04752e-08C52.0582 7.81036e-09 52.7199 0.383234 53.0764 1.00466L69.4289 29.5047C69.7826 30.1211 69.7826 30.8789 69.4289 31.4953L53.0764 59.9953C52.7199 60.6168 52.0582 61 51.3417 61H18.6583C17.9418 61 17.2801 60.6168 16.9236 59.9953L0.571095 31.4953C0.217407 30.8789 0.217408 30.1211 0.571096 29.5047L16.9236 1.00466Z"})}),(0,l.FD)("symbol",{id:"peptide-hover",viewBox:"0 0 70 61",width:"70",height:"61",children:[(0,l.Y)("path",{d:"M18.2246 1.75116C18.3137 1.59581 18.4792 1.5 18.6583 1.5L51.3417 1.5C51.5208 1.5 51.6863 1.59581 51.7754 1.75116L53.06 1.01408L51.7754 1.75117L68.1279 30.2512C68.2163 30.4053 68.2163 30.5947 68.1279 30.7488L51.7754 59.2488C51.6863 59.4042 51.5208 59.5 51.3417 59.5H18.6583C18.4792 59.5 18.3137 59.4042 18.2246 59.2488L1.87215 30.7488C1.78372 30.5947 1.78372 30.4053 1.87215 30.2512L18.2246 1.75116Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8",strokeWidth:"3"})," "]}),(0,l.Y)("symbol",{id:"modified-background",viewBox:"0 0 60 20",width:"30",height:"20",x:"2.5",y:"5",children:(0,l.Y)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M6.52702 20C5.81057 20 5.14885 19.6168 4.79229 18.9953L0.570974 11.6382C0.217285 11.0218 \n           0.217285 10.2639 0.570974 9.64751L5.52999 1.00466C5.88654 0.383235 6.54827 0 7.26472 0H52.735C53.4515\n           0 54.1132 0.383234 54.4698 1.00466L59.4288 9.64751C59.7825 10.2639 59.7825 11.0218 59.4288 11.6382\n           L55.2075 18.9953C54.8509 19.6168 54.1892 20 53.4727 20H6.52702Z",fillOpacity:"0.6"})})]})},Kl=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"sugar",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,l.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",rx:"5"})}),(0,l.Y)("symbol",{id:"sugar-selection",viewBox:"-1 -1 100 100",width:"70",height:"70",children:(0,l.Y)("rect",{width:"39",height:"39",rx:"5",fill:"none",stroke:"#0097A8",strokeWidth:"2.5"})}),(0,l.Y)("symbol",{id:"sugar-variant",viewBox:"0 0 72 72",width:"70",height:"70",children:(0,l.Y)("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",x:"0.5",y:"0.5",rx:"5",stroke:"#585858",strokeWidth:"0.5"})}),(0,l.Y)("symbol",{id:"sugar-modified-background",viewBox:"0 0 28 10",width:"27",height:"10",x:"0.7",y:"10",children:(0,l.Y)("path",{d:"M1.5 10C0.947715 10 0.5 9.55229 0.5 9V1C0.5 0.447715 0.947715 0 1.5 0H26.5C27.0523 0 27.5 0.447715 27.5 1V9C27.5 9.55228 27.0523 10 26.5 10H1.5Z",fill:"white",fillOpacity:"0.6"})})]})},Wl=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"phosphate",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,l.Y)("rect",{className:"monomer-body",width:"28",height:"28","data-actual-width":"28","data-actual-height":"28",rx:"15"})}),(0,l.Y)("symbol",{id:"phosphate-selection",viewBox:"-1 -1 75 75",width:"70",height:"70",children:(0,l.Y)("rect",{width:"28",height:"28",rx:"15",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),(0,l.Y)("symbol",{id:"phosphate-variant",viewBox:"0 0 70 70",width:"70",height:"70",children:(0,l.Y)("rect",{className:"monomer-body",width:"27",height:"27","data-actual-width":"27","data-actual-height":"27",stroke:"#585858",strokeWidth:"0.5",x:"0.5",y:"0.5",rx:"15"})}),(0,l.Y)("symbol",{id:"phosphate-modified-background",viewBox:"0 0 28 10",width:"26",height:"10",x:"1",y:"9.5",children:(0,l.Y)("path",{d:"M2.13388 0C1.72465 0 1.35333 0.248229 1.22109 0.635509C0.753639 2.00455 0.5 3.47265 0.5 5C0.5 6.52735 0.753639 7.99545 1.22109 9.36449C1.35333 9.75177 1.72465 10 2.13389 10H25.8661C26.2753 10 26.6467 9.75177 26.7789 9.36449C27.2464 7.99545 27.5 6.52735 27.5 5C27.5 3.47265 27.2464 2.00455 26.7789 0.635509C26.6467 0.248229 26.2753 0 25.8661 0H2.13388Z",fill:"#333333",fillOpacity:"0.6"})})]})},Zl=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"rna-base",viewBox:"-16 0 65 65",width:"65",height:"95",children:(0,l.Y)("rect",{width:"22.5",height:"22.5","data-actual-width":"31.82","data-actual-height":"31.82",rx:"1",x:"-11.25",y:"-11.25",transform:"rotate(45)",className:"monomer-body"})}),(0,l.Y)("symbol",{id:"rna-base-selection",viewBox:"-15.75 -0.25 65 65",width:"65",height:"95",children:(0,l.Y)("rect",{width:"21",height:"21",rx:"1",x:"-10.5",y:"-10.5",transform:"rotate(45)",stroke:"#0097A8",strokeWidth:"1.5",fill:"none"})}),(0,l.Y)("symbol",{id:"rna-base-variant",viewBox:"-16 0 65 65",width:"65",height:"94",children:(0,l.Y)("rect",{width:"21.5",height:"21.5","data-actual-width":"30","data-actual-height":"30",stroke:"#585858",strokeWidth:"0.5",rx:"1",x:"-10.25",y:"-10.25",transform:"rotate(45)",className:"monomer-body"})}),(0,l.Y)("symbol",{id:"rna-base-modified-background",viewBox:"0 0 32 10",width:"30",height:"9",x:"0.8",y:"10.8",children:(0,l.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30156 10C6.03634 10 5.78199 9.89464 5.59445 9.70711L1.1508 5.26346C0.760279 4.87293 0.760279 4.23977 1.1508 3.84924L4.70715 0.292893C4.89469 0.105357 5.14904 0 5.41426 0H26.5858C26.851 0 27.1054 0.105357 27.2929 0.292893L30.8493 3.84924C31.2398 4.23977 31.2398 4.87293 30.8493 5.26346L26.4056 9.70711C26.2181 9.89464 25.9637 10 25.6985 10H6.30156Z",fill:"#333333",fillOpacity:"0.6"})})]})},Gl=function(){return(0,l.FD)(l.FK,{children:[(0,l.FD)("symbol",{id:"unresolved-monomer",viewBox:"0 0 59 59",width:"59",height:"59",children:[(0,l.Y)("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",stroke:"#333333"}),(0,l.Y)("rect",{width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"#585858"})]}),(0,l.Y)("symbol",{id:"unresolved-monomer-hover",children:(0,l.Y)("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})})]})},Ql=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("symbol",{id:"nucleotide",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,l.Y)("path",{className:"monomer-body","data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)"})}),(0,l.Y)("symbol",{id:"nucleotide-hover",viewBox:"0 0 84 84",width:"42",height:"42",children:(0,l.Y)("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8",strokeWidth:"3"})})]})},Xl=function(){return(0,l.FD)(l.FK,{children:[(0,l.Y)("path",{strokeLinecap:"round",d:"M5,0 0,2.5 5,5z",id:"arrow-marker-content"}),(0,l.Y)("marker",{id:"arrow-marker",markerHeight:"3",markerWidth:"5",orient:"auto",refX:"2.5",refY:"1.5",children:(0,l.Y)("use",{href:"#arrow-marker-content",transform:"rotate(180 2.5 1.5) scale(1,0.6)",strokeWidth:"1.2500",fill:"black",stroke:"none"})}),(0,l.Y)("marker",{id:"arrow-marker-arc",markerWidth:"5",markerHeight:"5",viewBox:"0 0 5 5",refX:"5",refY:"2.5",orient:"auto",children:(0,l.Y)("use",{href:"#arrow-marker-content",transform:"rotate(180, 2.5, 2.5)",fill:"#365CFF",stroke:"none"})})]})},Jl=function(){return(0,l.Y)(l.FK,{children:(0,l.Y)("symbol",{id:"sequence-start-arrow",viewBox:"0 0 65 65",width:"65",height:"95",children:(0,l.Y)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.Y)("path",{d:"M10.2802 5.09664C10.9756 5.49813 10.9756 6.50187 10.2802 6.90336L2.56467 11.3579C1.86926 11.7594 1 11.2576 1 10.4546V1.54541C1 0.742426 1.86926 0.240558 2.56467 0.642053L10.2802 5.09664Z",stroke:"#7C7C7F"})})})})};var $l=(0,Y.A)("div",{target:"e1phidy70"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),ec=function(){var e=xr(),t=Ar(Yt),n=Ar(Lt)||"Error message",r=""!==t,o=function(){e(Dt())};return(0,l.FD)(ti,{isOpen:r,title:n,onClose:o,children:[(0,l.Y)(ti.Content,{children:(0,l.Y)($l,{children:t})}),(0,l.Y)(ti.Footer,{children:(0,l.Y)(ca,{label:"Close",clickHandler:o})})]})},tc=(0,Y.A)("div",{target:"embh3ih3"})((function(){return{height:"100%"}}),""),nc=(0,Y.A)("div",{target:"embh3ih2"})((function(){return{display:"flex",alignItems:"center"}}),""),rc=(0,Y.A)("div",{target:"embh3ih1"})((function(){return{background:"","&.toggler-component-wrapper--disabled":{opacity:.4,pointerEvents:"none",cursor:"default"}}}),""),oc=(0,Y.A)("svg",{target:"embh3ih0"})((function(){return{"&.handCursor":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICBmaWxsPSJub25lIgogICAgICAgIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjMDAwIgogICAgICAgICAgICBkPSJNMjAuNDM0IDcuNjczYy0uMS0uNi0uNzEzLTEuNzMxLTIuMzItMS43MzEtLjEyNiAwLS4yNTIuMDA3LS4zNzcuMDIzdi0uNzlhMS4wMSAxLjAxIDAgMCAwLS4wNDUtLjNjLS4xNzctLjU2NC0uODc2LTEuNjMxLTIuMjYyLTEuNjMxYTIuNTk5IDIuNTk5IDAgMCAwLS42NzYuMDg2IDIuMzk0IDIuMzk0IDAgMCAwLS4xNDYtLjIzYy0uNDUzLS42NDUtMS4xODYtMS0yLjA2My0xLS44NzcgMC0xLjU4NC4zNi0yLjAyNSAxLjAxN2EyLjQ2MSAyLjQ2MSAwIDAgMC0uMzYxLjg1IDIuNjYzIDIuNjYzIDAgMCAwLS40MDgtLjAzYy0xLjQ3NCAwLTIuMTI0IDEuMTUtMi4yNjIgMS43NTdhMS4wMzQgMS4wMzQgMCAwIDAtLjAyNC4yMjJWMTEuMWwtLjEzLS4xYy0uNTg4LS41LTIuMDM0LTEuMTIxLTMuMzkxLjAyOS0xLjM1NyAxLjE1LTEuMDE1IDIuNjY0LS40MzEgMy40NTIuNDUzLjc3MyA0LjUxMiA3LjQyNSAxMC4yMjMgNy40MjUgMy4yNSAwIDQuOTEtMS41MTIgNS43MjktMi43ODFhNi4yOTEgNi4yOTEgMCAwIDAgLjk4LTIuOFY3LjgzOGMuMDAxLS4wNTYtLjAwMy0uMTEtLjAxMS0uMTY1WiIKICAgIC8+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjZmZmIgogICAgICAgICAgICBzdHJva2U9IiNmZmYiCiAgICAgICAgICAgIGQ9Ik0xOC40NDggMTYuMjE1YTQuNDc0IDQuNDc0IDAgMCAxLS43IDEuODg3Yy0uODA1IDEuMi0yLjE1MyAxLjgtNC4wMDggMS44LTQuNzY4IDAtOC40ODQtNi40MTItOC41Mi02LjQ3NmEuNjY5LjY2OSAwIDAgMC0uMDktLjEyNmMtLjI5NC0uNDA4IDAtLjY1NS4xMDctLjc0OC4yNjctLjIyNy41NC0uMjM3LjgxLS4wMzFsMS43NyAxLjQ1MmExIDEgMCAwIDAgMS42NDQtLjc2M1Y2LjA4YS4yODcuMjg3IDAgMCAxIC4yOS0uMTQ4LjQ0LjQ0IDAgMCAxIC4zNzIuMTZ2NC43YTEgMSAwIDEgMCAyIDB2LTYuNDVjLjA2OC0uMjQ4LjMtLjI0OC40MjItLjI0OC4yIDAgLjQxNC4wMzIuNDgyLjI1NXY2LjQ0YTEgMSAwIDEgMCAyIDB2LTUuMmEuNzUuNzUgMCAwIDEgLjA3NC0uMTljLjA0OS0uMDgxLjEwOC0uMTUuMzI1LS4xNWEuMzUuMzUgMCAwIDEgLjMwNy4xNXY1LjM5YTEgMSAwIDEgMCAyIDBWOC4wNDdhLjU4My41ODMgMCAwIDEgLjM3Ny0uMWMuMDY1IDAgLjI1OC4wMDYuMzM0LjA3OGwuMDA0IDguMTlaIgogICAgLz4KPC9zdmc+Cg=='),\n      auto\n    "},"&.handCursorGrabbing":{cursor:"\n      url('data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjI0IgogICAgaGVpZ2h0PSIyNCIKICAgIGZpbGw9Im5vbmUiCiAgICB2aWV3Qm94PSIwIDAgMzAgMzAiCiAgPgogICAgPHBhdGgKICAgICAgZmlsbD0iI2ZmZiIKICAgICAgZD0iTTEwLjc0NCAzQzguODkgMyA3LjM4NCA0LjUyNSA3LjM4NCA2LjR2LjIyaC0uMDEyYy0xLjk5NyAwLTMuNjIyIDEuNjAyLTMuNjIyIDMuNTY4bC4wMDEgNy4wMmMwIDEuNzcgMS41MTIgMy41MTUgMy4xMTIgNS4zNjEuNzIuODMgMS45MTkgMi4yMTYgMi4wMzQgMi43MzF2MS41MjJoMTMuNDQydi0xLjU1NGMwLS41OS42MTgtMS43NyAxLjE2My0yLjgxLjkzOC0xLjc4OSAxLjk5OC0zLjgxNSAxLjk5OC01Ljk5MSAwLTMuMjU4LS4wMS02LjI0OC0uMDEtNi4yNDggMC0xLjY5Ni0xLjM5LTMuMDgtMy4xLTMuMDgtLjIwMyAwLS40LjAyLS41OTIuMDU3YTMuNjUgMy42NSAwIDAgMC0zLjAzMy0xLjYwN2MtLjM2NyAwLS43Mi4wNTMtMS4wNTUuMTUzYTMuNjM2IDMuNjM2IDAgMCAwLTMuMDktMS43MDVjLS40NDQgMC0uODcuMDgtMS4yNjQuMjI1QTMuMzQ1IDMuMzQ1IDAgMCAwIDEwLjc0NCAzWiIKICAgIC8+CiAgICA8cGF0aAogICAgICBmaWxsPSIjMDAwIgogICAgICBkPSJNMTAuNzQ0IDQuNTU0YzEgMCAxLjgwOC44MjYgMS44MDggMS44NDV2MS4xOTdjMC0xLjEwOS45MjctMi4wMDggMi4wNjgtMi4wMDggMS4xNDMgMCAyLjA2OC45IDIuMDY4IDIuMDA4djEuNTUyYzAtMS4xMS45My0yLjAwOCAyLjA3Ny0yLjAwOCAxLjE0NyAwIDIuMDc2Ljg5OSAyLjA3NiAyLjAwOHYxLjA2OEExLjU0IDEuNTQgMCAwIDEgMjIuMzkgOC42OWMuODU2IDAgMS41NDguNjg0IDEuNTQ4IDEuNTMgMCAwIC4wMSAyLjk4OC4wMSA2LjI0NCAwIDMuMjU3LTMuMTYxIDYuNjM2LTMuMTYxIDguODAySDEwLjQ1YzAtMS45NC01LjE0Ni01Ljc3My01LjE0Ni04LjA2MXYtNy4wMmMwLTEuMTEyLjkyNi0yLjAxNCAyLjA3LTIuMDE1djQuMDUxYzAgLjM0Mi4zNS42Mi43ODEuNjIuNDMyIDAgLjc4Mi0uMjc4Ljc4Mi0uNjJWNi40YzAtMS4wMi44MDktMS44NDUgMS44MDctMS44NDVabTAtMS41NTRDOC44OSAzIDcuMzg0IDQuNTI1IDcuMzg0IDYuNHYuMjJoLS4wMTJjLTEuOTk3IDAtMy42MjIgMS42MDItMy42MjIgMy41NjhsLjAwMSA3LjAyYzAgMS43NyAxLjUxMiAzLjUxNSAzLjExMiA1LjM2MS43Mi44MyAxLjkxOSAyLjIxNiAyLjAzNCAyLjczMXYxLjUyMmgxMy40NDJ2LTEuNTU0YzAtLjU5LjYxOC0xLjc3IDEuMTYzLTIuODEuOTM4LTEuNzg5IDEuOTk4LTMuODE1IDEuOTk4LTUuOTkxIDAtMy4yNTgtLjAxLTYuMjQ4LS4wMS02LjI0OCAwLTEuNjk2LTEuMzktMy4wOC0zLjEtMy4wOC0uMjAzIDAtLjQuMDItLjU5Mi4wNTdhMy42NSAzLjY1IDAgMCAwLTMuMDMzLTEuNjA3Yy0uMzY3IDAtLjcyLjA1My0xLjA1NS4xNTNhMy42MzYgMy42MzYgMCAwIDAtMy4wOS0xLjcwNWMtLjQ0NCAwLS44Ny4wOC0xLjI2NC4yMjVBMy4zNDUgMy4zNDUgMCAwIDAgMTAuNzQ0IDNaIgogICAgLz4KICA8L3N2Zz4='),\n      auto\n    "}}}),"");function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sc=(0,Y.A)("div",{target:"ex562360"})({name:"1vtgpt7",styles:"position:absolute;top:0;left:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center"}),uc=function(){return(0,l.Y)(sc,{children:(0,l.Y)(Pi,{})})};var dc=(0,Y.A)("div",{target:"e1yct69a0"})({name:"14ocoqf",styles:"display:flex;& svg:first-of-type{display:flex;justify-content:center;align-items:center;width:24px;height:24px;padding:2px;border-radius:4px;}"}),pc=function(e){var t=(0,s.useState)(!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)),n=(0,a.A)(t,2),r=n[0],o=n[1];return(0,l.Y)(dc,{className:e.className,children:(0,l.Y)(h.K0,{onClick:function(){var e,t=document.querySelector(h.tS)||document.documentElement;r?document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=t).requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),o(!r)},iconName:r?"fullscreen-exit":"fullscreen-enter",testId:"fullscreen-mode-button"})})},mc=function(){return s.useContext(Cr)};var fc=(0,Y.A)(h.K0,{target:"e1erwxoo0"})({name:"1y95nj0",styles:"margin:2px;outline:none"});function hc(){var e;null===(e=document.activeElement)||void 0===e||e.blur()}var vc=(0,Y.A)(I.A,{target:"e1ann9o40"})({name:"2gmlyg",styles:"display:flex;justify-content:space-between;font-weight:400;font-size:12px;line-height:14px;padding:7px 8px;text-transform:none;color:#333333;width:max-content"}),gc=function(e){var t=e.itemId,n=e.title,r=void 0===n?"":n,o=e.disabled,i=e.testId,a=e.onClick,c=e.type,u=void 0===c?"icon-button":c,d=mc(),p=d.isActive,m=d.activate,f=(0,s.useCallback)((function(){m(t),hc(),a&&a()}),[m,t]),h=p(t),v=h?" active":"";return(0,l.Y)(l.FK,{children:"icon-button"===u?(0,l.Y)(fc,{title:r,className:t+v,isActive:h,onClick:f,iconName:t,testId:i,disabled:o}):(0,l.Y)(vc,{title:r,onClick:f,disabled:o,"data-testid":i,children:r})})};var bc=(0,Y.A)(h.In,{shouldForwardProp:function(e){return"isActive"!==e},target:"e13kdqxv4"})("position:absolute;height:7px;width:7px;right:3px;bottom:3px;cursor:pointer;path{fill:",(function(e){return e.isActive?"white":void 0}),";}"),yc=(0,Y.A)("div",{target:"e13kdqxv3"})({name:"k5saax",styles:"display:flex;position:relative;align-items:center;&:active{.dropdown{fill:white;}}"}),xc=(0,Y.A)("div",{target:"e13kdqxv2"})("display:flex;position:absolute;left:",(function(e){return e.isVertical?"-34px":"5px"}),";top:",(function(e){var t=e.isVertical,n=e.islayoutModeButton;return t&&n?"24px":t?"38px":"0px"}),";border-radius:4px;flex-direction:",(function(e){return e.isVertical?"column":"row"}),";z-index:1;background-color:white;padding:2px;"),Ac=(0,Y.A)(O.A,{target:"e13kdqxv1"})({name:"bjn8wh",styles:"position:relative"}),wc=(0,Y.A)("div",{target:"e13kdqxv0"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"}),Cc=(0,Y.A)("div",{target:"e1fh0ozy3"})((function(e){var t=e.theme,n=e.isHorizontal;return{backgroundColor:t.ketcher.color.background.primary,borderRadius:"4px",display:"flex",flexDirection:n?"row":"column",zIndex:t.ketcher.zIndex.toolbar}}),""),Mc=(0,Y.A)("hr",{target:"e1fh0ozy2"})("width:18px;margin:6px 0;align-self:center;border-width:thin 0px 0px 0px;border-style:solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),kc=(0,Y.A)("hr",{target:"e1fh0ozy1"})("height:18px;margin:0px 6px;align-self:center;border-width:0px thin 0px 0px;border-style:solid;border-color:",(function(e){return e.theme.ketcher.color.divider}),";"),Sc=(0,Y.A)("div",{target:"e1fh0ozy0"})((function(e){var t=e.theme,n=e.isHorizontal;return{display:"flex",flexDirection:n?"row":"column",flexWrap:"nowrap",alignItems:"center",backgroundColor:t.ketcher.color.background.primary,borderRadius:"2px",width:n?void 0:"32px",marginBottom:n?void 0:"8px","> :last-child":n?void 0:{marginBottom:0}}}),""),Ic=function(e){var t=e.children,n=e.divider,r=void 0!==n&&n,o=e.isHorizontal,i=s.Children.map(t,(function(e){return e}));return(0,l.FD)(l.FK,{children:[(0,l.Y)(Sc,{isHorizontal:o,children:i.map((function(e){return e}))}),r&&(o?(0,l.Y)(kc,{}):(0,l.Y)(Mc,{}))]})},Oc=function(e){var t=e.children,n=e.onItemClick,r=e.activeMenuItems,o=e.testId,i=e.isHorizontal,a=s.useMemo((function(){return{isActive:function(e){return!!r&&r.includes(e)},activate:function(e){n(e)}}}),[r,n]),c=s.Children.map(t,(function(e){return e.type===Ic?e:null}));return(0,l.Y)(Cr.Provider,{value:a,children:(0,l.Y)(Cc,{"data-testid":o,isHorizontal:i,children:c.map((function(e){return e}))})})};Oc.Group=Ic,Oc.Item=gc,Oc.Submenu=function(e){var t=e.children,n=e.vertical,r=void 0!==n&&n,o=e.disabled,i=void 0!==o&&o,c=e.needOpenByMenuItemClick,u=void 0!==c&&c,d=e.testId,p=e.layoutModeButton,m=void 0!==p&&p,f=e.generalTitle,h=e.activeItem,v=(0,s.useState)(!1),g=(0,a.A)(v,2),b=g[0],y=g[1],x=mc().isActive,A=function(){i||y((function(e){return!e}))},w=function(){b&&y(!1)},C=s.Children.map(t,(function(e){return e.type===gc?e:null})),M=C.map((function(e){return e.props.itemId})).filter((function(e){return e})),k=M.filter((function(e){return x(e)})),S=null!==h&&void 0!==h?h:k.length?k[0]:M[0],I=C.find((function(e){return e.props.itemId===S})),O=null===I||void 0===I?void 0:I.props.testId,P=null!==f&&void 0!==f?f:null===I||void 0===I?void 0:I.props.title;return(0,l.FD)(yc,{"data-testid":d,children:[(0,l.FD)(wc,{children:[(0,l.Y)(gc,{disabled:i,itemId:S,title:P,testId:O,onClick:u?A:hr}),b||(0,l.Y)(bc,{className:"dropdown",name:"dropdown",onClick:A,isActive:x(S),dataTestId:"dropdown-expand"})]}),(0,l.Y)(Ac,{in:b,timeout:"auto",unmountOnExit:!0,onClick:w,children:(0,l.Y)(D.x,{onClickAway:w,children:(0,l.Y)(xc,{isVertical:r,islayoutModeButton:m,"data-testid":"multi-tool-dropdown",children:C.map((function(e){return e}))})})})]})};var Dc=function(){var e=Ar(Pe),t=wr(),n=(0,s.useState)(t),r=(0,a.A)(n,2),o=r[0],i=r[1],c=Ar(Ee),u={isActive:function(e){return o===e},activate:function(t){t!==o&&(i(t),e.events.selectMode.dispatch(t),e.events.layoutModeChange.dispatch(t))}};return(0,s.useEffect)((function(){i(t)}),[t]),(0,l.Y)(Cr.Provider,{value:u,children:(0,l.FD)(Oc.Submenu,{disabled:c,testId:"layout-mode",vertical:!0,needOpenByMenuItemClick:!0,layoutModeButton:!0,children:[(0,l.Y)(Oc.Item,{itemId:"sequence-layout-mode",testId:"sequence-layout-mode",title:"Switch to sequence layout mode"}),(0,l.Y)(Oc.Item,{itemId:"snake-layout-mode",testId:"snake-layout-mode",title:"Switch to snake layout mode"}),(0,l.Y)(Oc.Item,{itemId:"flex-layout-mode",testId:"flex-layout-mode",title:"Switch to flex layout mode"})]})})};function Pc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ec(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e){var t=e.node;return t instanceof f.Nucleotide||t instanceof f.Nucleoside||(null===t||void 0===t?void 0:t.monomer)instanceof f.Phosphate}var jc=function(e){if(null!==e&&void 0!==e&&e.length){for(var t=(0,m.flatten)(e),n=t.length,r=jo(t),o=!1,i=!0,a=!1,l=!0,c=function(e){var t,n=[],r=Pc(e);try{for(r.s();!(t=r.n()).done;){var o,i,a,l=t.value,c=l.node,s=l.nodeIndexOverall,u=l.isNucleosideConnectedAndSelectedWithPhosphate,d=l.hasR1Connection,p=l.twoStrandedNode,m=Boolean(null===p||void 0===p?void 0:p.antisenseNode);if(c instanceof f.Nucleotide)n.push({type:f.Entities.Nucleotide,baseLabel:null===c||void 0===c||null===(o=c.rnaBase)||void 0===o?void 0:o.label,sugarLabel:null===c||void 0===c||null===(i=c.sugar)||void 0===i?void 0:i.label,phosphateLabel:null===c||void 0===c||null===(a=c.phosphate)||void 0===a?void 0:a.label,rnaBaseMonomerItem:c.rnaBase instanceof f.AmbiguousMonomer?c.rnaBase.variantMonomerItem:c.rnaBase.monomerItem,hasR1Connection:d,nodeIndexOverall:s,hasAntisense:m});else if(c instanceof f.Nucleoside){var h,v;n.push({type:f.Entities.Nucleoside,baseLabel:null===c||void 0===c||null===(h=c.rnaBase)||void 0===h?void 0:h.label,sugarLabel:null===c||void 0===c||null===(v=c.sugar)||void 0===v?void 0:v.label,rnaBaseMonomerItem:c.rnaBase instanceof f.AmbiguousMonomer?c.rnaBase.variantMonomerItem:c.rnaBase.monomerItem,isNucleosideConnectedAndSelectedWithPhosphate:u,hasR1Connection:d,nodeIndexOverall:s,hasAntisense:m})}else if((null===c||void 0===c?void 0:c.monomer)instanceof f.Phosphate){var g;n.push({type:f.Entities.Phosphate,phosphateLabel:null===c||void 0===c||null===(g=c.monomer)||void 0===g?void 0:g.label,nodeIndexOverall:s,hasAntisense:m})}}}catch(b){r.e(b)}finally{r.f()}return n}(t),s=0;s<c.length;s++){var u=c[s],d=c[s-1],p=u.type===f.Entities.Nucleotide||u.type===f.Entities.Nucleoside,h=null===d||void 0===d?void 0:d.isNucleosideConnectedAndSelectedWithPhosphate;p&&(o=!0),p||h?u.hasR1Connection&&(l=!1):(l=!1,i=!1),u.hasAntisense&&(a=!0)}return n>r&&(t.every(Nc)||(i=!1)),{title:1===n||1===r&&i?function(e){for(var t="",n=1===e.length?e[0]:m.merge.apply(void 0,[{}].concat((0,F.A)(e))),r=0,o=["sugarLabel","baseLabel","phosphateLabel"];r<o.length;r++){var i=o[r],a=(0,m.get)(n,i,"");t+="baseLabel"===i?"(".concat(a,")"):a}return t}(c):i?"".concat(r," nucleotides"):"".concat(n," elements"),selectedSequenceLabeledNodes:c,isSelectedOnlyNucleoelements:i,isSelectedAtLeastOneNucleoelement:o,isSequenceFirstsOnlyNucleoelementsSelected:l,hasAntisense:a}}};function Yc(e){return null===e||void 0===e?void 0:e.monomers.some((function(e){return 0!==e.hydrogenBonds.length}))}var Lc,Fc=function(e){var t=e.monomerItem;if("A"===t.props.MonomerNaturalAnalogCode||"C"===t.props.MonomerNaturalAnalogCode||"G"===t.props.MonomerNaturalAnalogCode||"T"===t.props.MonomerNaturalAnalogCode||"U"===t.props.MonomerNaturalAnalogCode)return!0;if(!e.monomerItem.isAmbiguous)return!1;if(e.subtype===f.KetAmbiguousMonomerTemplateSubType.MIXTURE)return!1;var n=["ACGT","ACGU","CGT","CGU","AGT","AGU","ACT","ACU","GT","GU","AT","AU","CT","CU","AC","AG","CG","ACG"],r=e.monomers.map((function(e){return e.monomerItem.props.MonomerNaturalAnalogCode})).sort().join("");return n.some((function(e){return e===r}))},Tc=function(e){return null===e||void 0===e?void 0:e.some((function(e){var t=e instanceof f.Sugar&&(0,f.getRnaBaseFromSugar)(e);return e instanceof f.RNABase&&(e.hydrogenBonds.length>0||e.covalentBonds.length>1)||(0,f.isRnaBaseOrAmbiguousRnaBase)(e)&&!Fc(e)||t&&(t.hydrogenBonds.length>0||!Fc(t))}))},Bc=function(e){return null===e||void 0===e?void 0:e.every((function(e){return!(e instanceof f.Sugar)||e.label===f.RNA_DNA_NON_MODIFIED_PART.SUGAR_DNA}))},zc=function(e){return null===e||void 0===e?void 0:e.every((function(e){return!(e instanceof f.Sugar)||e.label===f.RNA_DNA_NON_MODIFIED_PART.SUGAR_RNA}))},Rc=function(e){return null===e||void 0===e?void 0:e.some((function(e){return e instanceof f.RNABase&&(0,f.getSugarFromRnaBase)(e)||e instanceof f.Sugar&&(0,f.getRnaBaseFromSugar)(e)}))},qc="aminoAcidModification-",Hc=function(e){var t=new Set,n=new Set,r=new Map,o=f.CoreEditor.provideEditorInstance();e.forEach((function(e){var t,n=e.monomerItem.props.MonomerNaturalAnalogCode;e instanceof f.Peptide&&n&&(r.has(n)||r.set(n,[]),null===(t=r.get(n))||void 0===t||t.push(e))})),null===o||void 0===o||o.monomersLibrary.forEach((function(e){var o,i=r.get(null===(o=e.props)||void 0===o?void 0:o.MonomerNaturalAnalogCode);if(e.props&&i){var a=e.props.modificationType;a&&(i.some((function(t){return t.label!==e.label&&!(0,f.canModifyAminoAcid)(t,e)}))?n.add(a):i.every((function(t){return t.label===e.label}))||t.add(a))}}));var i=(0,F.A)(t.values()).filter((function(e){return!n.has(e)})).map((function(t){var n=(0,f.getAminoAcidsToModify)(e,t,o.monomersLibrary);return{name:"".concat(qc).concat(t),title:t,onMouseOver:function(){o.transientDrawingView.showModifyAminoAcidsView({monomersToModify:(0,F.A)(n.keys())}),o.transientDrawingView.update()},onMouseOut:function(){o.transientDrawingView.hideModifyAminoAcidsView(),o.transientDrawingView.update()}}}));return i.sort((function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase(),o="Natural amino acid".toLowerCase();return n===o?-1:r===o?1:n.localeCompare(r)})),i},_c=function(e,t){var n,r,o=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.__data__,i=null===o||void 0===o||null===(r=o.node)||void 0===r?void 0:r.monomer;return(e.length?e:i?[i]:[]).filter((function(e){return e instanceof f.Peptide}))};!function(e){e.title="sequence_menu_title",e.createRnaAntisenseStrand="create_antisense_rna_chain",e.createDnaAntisenseStrand="create_antisense_dna_chain",e.modifyInRnaBuilder="modify_in_rna_builder",e.modifyAminoAcids="modify_amino_acids",e.establishHydrogenBond="establish_hydrogen_bond",e.deleteHydrogenBond="delete_hydrogen_bond",e.editSequence="edit_sequence",e.startNewSequence="start_new_sequence",e.copy="copy",e.paste="paste",e.delete="delete"}(Lc||(Lc={}));var Uc=function(e){var t,n=e.selections,r=e.contextMenuEvent,o=Ar(Pe),i=xr(),a=jc(n),c=(null===n||void 0===n||null===(t=n.flat())||void 0===t?void 0:t.flatMap((function(e){return e.node.monomers})))||[],s=_c(c,r),u=Ar(Ee),d="sequence-layout-mode"===wr(),p=Hc(s),m=[{name:Lc.title,title:null===a||void 0===a?void 0:a.title,isMenuTitle:!0,disabled:!0,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==a&&void 0!==a&&a.isSelectedAtLeastOneNucleoelement)}},{name:Lc.copy,title:"Copy",disabled:0===(null===c||void 0===c?void 0:c.length)},{name:Lc.paste,title:"Paste",disabled:!1,separator:!0},{name:Lc.createRnaAntisenseStrand,title:"Create RNA antisense strand",disabled:Tc(c),hidden:function(){return!c||!Rc(c)}},{name:Lc.createDnaAntisenseStrand,title:"Create DNA antisense strand",disabled:Tc(c),hidden:function(){return!c||!Rc(c)}},{name:Lc.modifyInRnaBuilder,title:"Modify in RNA Builder...",disabled:!(null!==a&&void 0!==a&&a.isSelectedOnlyNucleoelements)||a.hasAntisense,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)||!(null!==a&&void 0!==a&&a.isSelectedAtLeastOneNucleoelement)}},{name:Lc.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!p.length,subMenuItems:p},{name:Lc.editSequence,title:"Edit sequence",disabled:!1,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:Lc.startNewSequence,title:"Start new sequence",disabled:!1},{name:Lc.establishHydrogenBond,title:"Establish Hydrogen Bonds",disabled:function(e){var t,r=e.props;return 0===(null===n||void 0===n?void 0:n.length)?(0,f.isTwoStrandedNodeRestrictedForHydrogenBondCreation)(null===r||void 0===r||null===(t=r.sequenceItemRenderer)||void 0===t?void 0:t.twoStrandedNode):function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(e){return e.every((function(e){return(0,f.isTwoStrandedNodeRestrictedForHydrogenBondCreation)(e.twoStrandedNode)}))}))}(n)},hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:Lc.deleteHydrogenBond,title:"Delete Hydrogen Bonds",separator:!0,disabled:function(e){var t,r=e.props;return 0===(null===n||void 0===n?void 0:n.length)?!Yc(null===r||void 0===r||null===(t=r.sequenceItemRenderer)||void 0===t?void 0:t.node):!(null!==n&&void 0!==n&&n.some((function(e){return e.some((function(e){return Yc(e.node)}))})))},hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.sequenceItemRenderer)}},{name:Lc.delete,title:"Delete",disabled:0===(null===c||void 0===c?void 0:c.length)}],v=document.querySelector(h.tS);return v&&d&&!u?(0,U.createPortal)((0,l.Y)(Zr,{id:zr.FOR_SEQUENCE,handleMenuChange:function(e){var t,r=e.id,l=e.props;switch(!0){case r===Lc.modifyInRnaBuilder:o.events.turnOnSequenceEditInRNABuilderMode.dispatch(),i(xt(et)),i(kn(!0)),i(fn({})),i(bn(null)),null!==a&&void 0!==a&&null!==(t=a.selectedSequenceLabeledNodes)&&void 0!==t&&t.length&&null!==a&&void 0!==a&&a.title&&(i(vn(null===a||void 0===a?void 0:a.title)),i(hn(null===a||void 0===a?void 0:a.selectedSequenceLabeledNodes)),i(gn(null===a||void 0===a?void 0:a.isSequenceFirstsOnlyNucleoelementsSelected)));break;case r===Lc.startNewSequence:o.events.startNewSequence.dispatch(l.sequenceItemRenderer);break;case r===Lc.editSequence:o.events.editSequence.dispatch(l.sequenceItemRenderer);break;case r===Lc.createRnaAntisenseStrand:o.events.createAntisenseChain.dispatch(!1);break;case r===Lc.createDnaAntisenseStrand:o.events.createAntisenseChain.dispatch(!0);break;case r===Lc.establishHydrogenBond:o.events.establishHydrogenBond.dispatch(l.sequenceItemRenderer);break;case r===Lc.deleteHydrogenBond:var c,u=f.SequenceRenderer.sequenceViewModel.chainsCollection.monomerToChain,d=new Map;(null!==n&&void 0!==n&&n.length?n.reduce((function(e,t){return[].concat((0,F.A)(e),(0,F.A)(t))}),[]).map((function(e){return e.twoStrandedNode})):[null===(c=l.sequenceItemRenderer)||void 0===c?void 0:c.twoStrandedNode]).forEach((function(e){if(e.antisenseChain&&e.antisenseNode&&!(e.antisenseNode instanceof f.EmptySequenceNode||e.antisenseNode instanceof f.BackBoneSequenceNode)){d.has(e.antisenseChain)||d.set(e.antisenseChain,new Set);var t=d.get(e.antisenseChain);if(!t)return;t.add(e)}}));var p=!1;d.forEach((function(e,t){var n=(0,F.A)(e.values())[0].chain,r=new Set((0,F.A)(e.values()).map((function(e){return e.antisenseNode})));t.nodes.some((function(e){return!r.has(e)&&e.monomers.some((function(e){return e.hydrogenBonds.some((function(t){var r=t.getAnotherMonomer(e);return(r&&u.get(r))===n}))}))}))||(p=!0)})),p?o.events.openConfirmationDialog.dispatch({title:"Deletion of all Hydrogen Bonds",confirmationText:"Deleting all hydrogen bonds will cause the separation of two chains. Do you wish to proceed?",onConfirm:function(){o.events.deleteHydrogenBond.dispatch(l.sequenceItemRenderer)}}):o.events.deleteHydrogenBond.dispatch(l.sequenceItemRenderer);break;case null===r||void 0===r?void 0:r.startsWith(qc):var m=null===r||void 0===r?void 0:r.replace(qc,"");o.events.modifyAminoAcids.dispatch({monomers:s,modificationType:m});break;case"copy"===r:o.events.copySelectedStructure.dispatch();break;case"paste"===r:o.events.pasteFromClipboard.dispatch();break;case"delete"===r:o.events.deleteSelectedStructure.dispatch()}},menuItems:m}),v):null};var Vc=(0,Y.A)("div",{target:"e1amohl43"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),Kc=(0,Y.A)("p",{target:"e1amohl42"})("width:calc(100% - 16px);padding:8px;color:",(function(e){return e.theme.ketcher.color.text.primary}),";background-color:#cceaee;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:700;word-break:break-all;text-align:left;margin:0;"),Wc=(0,Y.A)(h.c9,{target:"e1amohl41"})({name:"156nqlv",styles:"height:100%;width:100%;padding:0 8px"}),Zc=(0,Y.A)("div",{target:"e1amohl40"})({name:"10sp49k",styles:"width:100%;display:flex;gap:8px;padding:0 8px 4px"}),Gc=function(e){var t=e.monomerCaps,n=e.attachmentPointsToBonds;return(0,s.useMemo)((function(){var e=[],r=[];return t?(Object.entries(t).forEach((function(t){var o=(0,a.A)(t,2),i=o[0],l=o[1],c=Boolean(null===n||void 0===n?void 0:n[i]);c&&r.push(i);var s={id:i,label:gl(l),connected:c};e.push(s)})),{preparedAttachmentPointsData:e,connectedAttachmentPoints:r}):{preparedAttachmentPointsData:e,connectedAttachmentPoints:r}}),[t,n])},Qc=function(e){var t=e.idtAliases,n=e.attachmentPointsToBonds,r=e.monomerClass;return(0,s.useMemo)((function(){if(!t)return null;var e=t.base,o=t.modifications;if(n){if(!o)return e;var i,l,c=o.endpoint5,s=o.internal,u=o.endpoint3,d=n.R1,p=n.R2;return r===f.KetMonomerClass.Phosphate&&d&&!(d instanceof f.MonomerToAtomBond)&&d.firstMonomer instanceof f.Sugar?null:null!==d&&null===p?null!==u&&void 0!==u?u:s:null===d&&null!==p?null!==c&&void 0!==c?c:s:null!==d&&null!==p?null!==(i=null!==s&&void 0!==s?s:c)&&void 0!==i?i:u:null!==(l=null!==c&&void 0!==c?c:s)&&void 0!==l?l:u}if(!o)return e;if(Object.values(o).every((function(t){return t.includes(e)})))return e;var m={};return Object.values(o).forEach((function(e){var t=[e.charAt(0),e.slice(1)],n=t[0],r=t[1];m[r]=m[r]?[].concat((0,F.A)(m[r]),[n]):[n]})),Object.entries(m).map((function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];return"(".concat(r.join(", "),")").concat(n)})).join(", ")}),[t,n,r])};var Xc=(0,Y.A)("div",{target:"e112ss7f3"})({name:"1m2mukt",styles:"flex:1;display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:12px;line-height:14px"}),Jc=(0,Y.A)("div",{target:"e112ss7f2"})("display:flex;align-items:center;gap:2px;border-radius:4px;background-color:",(function(e){return e.connected?"#E1E5EA":"transparent"}),";padding:",(function(e){return e.connected?"4px":"0"}),";color:",(function(e){return e.connected?"#8A8B8E":"inherit"}),";"),$c=(0,Y.A)("span",{target:"e112ss7f1"})({name:"f3vz0n",styles:"font-weight:500"}),es=(0,Y.A)("span",{target:"e112ss7f0"})({name:"16ceglb",styles:"font-weight:600"}),ts=(0,s.memo)((function(e){var t=e.preparedAttachmentPointsData;return t.length?(0,l.Y)(Xc,{children:t.map((function(e){var t=e.id,n=e.connected,r=e.label;return(0,l.FD)(Jc,{connected:n,children:[(0,l.FD)($c,{children:[t,!n&&":"]}),!n&&(0,l.Y)(es,{children:r})]},t)}))}):null})),ns=ts;var rs=(0,Y.A)("span",{target:"e1v1msbx3"})("max-width:",(function(e){return e.preset?"100%":"50%"}),";display:flex;align-items:center;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:500;line-height:normal;color:",(function(e){return e.theme.ketcher.color.text.lightgrey}),";padding-left:",(function(e){return e.preset?"0":"8px"}),";border-left:",(function(e){return e.preset?"none":"1px solid #D9DCEA"}),";"),os=(0,Y.A)("p",{target:"e1v1msbx2"})({name:"ti75j2",styles:"margin:0"}),is=(0,Y.A)("span",{target:"e1v1msbx1"})({name:"1b7n4tc",styles:"color:#7c7c7c"}),as=(0,Y.A)("span",{target:"e1v1msbx0"})({name:"dtvj5",styles:"color:#585858;text-wrap:wrap"}),ls=(0,s.memo)((function(e){var t=e.idtAliasesText,n=e.preset;return(0,l.Y)(rs,{preset:n,children:(0,l.FD)(os,{children:[(0,l.Y)(is,{children:"IDT: "}),(0,l.Y)(as,{children:t})]})})})),cs=ls,ss=(0,Y.A)((function(e){var t,n=e.className,r=Ar(Oe),o=r.monomer,i=r.attachmentPointsToBonds,a=null===o||void 0===o?void 0:o.props.idtAliases,c=Gc({monomerCaps:null===o||void 0===o?void 0:o.props.MonomerCaps,attachmentPointsToBonds:i}),s=c.preparedAttachmentPointsData,u=c.connectedAttachmentPoints,d=Qc({idtAliases:a,attachmentPointsToBonds:i,monomerClass:null===o||void 0===o?void 0:o.props.MonomerClass});if(!o)return null;var p=o.props.unresolved,m=p?o.label:null===(t=o.struct)||void 0===t?void 0:t.name;return(o.struct||p)&&(0,l.FD)(Vc,{className:n,"data-testid":"polymer-library-preview",children:[m&&(0,l.Y)(Kc,{children:m}),p?(0,l.Y)(Al,{}):(0,l.Y)(Wc,{struct:o.struct,options:{connectedMonomerAttachmentPoints:u,usageInMacromolecule:f.UsageInMacromolecule.MonomerPreview,labelInPreview:!0,needCache:!1}}),(0,l.FD)(Zc,{children:[(0,l.Y)(ns,{preparedAttachmentPointsData:s}),d&&(0,l.Y)(cs,{idtAliasesText:d})]})]})}),{target:"e86yc5p0"})("width:",h.VH.width+"px",";height:",h.VH.height+"px",";"),us=ss;var ds=(0,Y.A)("div",{target:"ec5fs975"})("display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),ps=(0,Y.A)("div",{target:"ec5fs974"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ms=(0,Y.A)("div",{target:"ec5fs973"})("font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";line-height:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:600;padding-right:2px;"),fs=(0,Y.A)("div",{target:"ec5fs972"})("color:",(function(e){return e.theme.ketcher.color.text.lightgrey}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:400;white-space:nowrap;"),hs=(0,Y.A)("p",{target:"ec5fs971"})("color:",(function(e){return e.theme.ketcher.color.text.primary}),";font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";font-weight:700;word-break:break-all;text-align:center;margin-top:0;margin-bottom:8px;"),vs=(0,Y.A)(h.In,{target:"ec5fs970"})("height:14px;width:14px;margin-right:4px;color:",(function(e){return e.theme.ketcher.color.icon.grey}),";stroke:",(function(e){return e.theme.ketcher.color.icon.grey}),";"),gs=function(e){var t=e.presetName,n=e.position,r=e.idtAliases;return(0,s.useMemo)((function(){if(!t||!r)return null;if(t.includes("MOE")){var e,i,a,l=r.base,c=r.modifications,s=null!==(e=null===c||void 0===c?void 0:c.endpoint5)&&void 0!==e?e:"5".concat(l),u=null!==(i=null===c||void 0===c?void 0:c.internal)&&void 0!==i?i:"i".concat(l),d=null!==(a=null===c||void 0===c?void 0:c.endpoint3)&&void 0!==a?a:"3".concat(l);switch(n){case o.Library:return"".concat(s,", ").concat(u);case o.ChainStart:return s;case o.ChainMiddle:return u;case o.ChainEnd:return d}}return r.base}),[t,n,r])},bs=["sugar","base","phosphate"],ys=(0,Y.A)((function(e){var t=e.className,n=Ar(Oe),r=n.monomers,o=n.name,i=n.position,c=n.idtAliases,s=(0,a.A)(r,2)[1],u=null!==o&&void 0!==o?o:null===s||void 0===s?void 0:s.props.Name,d=gs({presetName:u,position:i,idtAliases:c});return(0,l.FD)(ds,{className:t,style:{alignItems:"flex-start"},"data-testid":"polymer-library-preview",children:[(0,l.Y)(hs,{children:u}),r.map((function(e,t){return e&&(0,l.FD)(ps,{children:[(0,l.Y)(vs,{name:bs[t]}),(0,l.Y)(ms,{children:e.label}),(0,l.FD)(fs,{children:["(",e.props.Name,")"]})]},t)})),d&&(0,l.Y)(cs,{idtAliasesText:d,preset:!0})]})}),{target:"e1wupxfd0"})(""),xs=ys,As=(0,Y.A)("div",{target:"envzkt90"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",(function(e){return e.theme.ketcher.color.background.primary}),";border:",(function(e){return e.theme.ketcher.border.regular}),";border-radius:",(function(e){return e.theme.ketcher.border.radius.regular}),";box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";"),ws=(0,Y.A)("div",{target:"e1m0yzrp2"})((function(e){var t=e.connected,n=e.inBond,r=e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:n||!t?r.ketcher.color.text.primary:"#B4B9D6"}}),""),Cs=(0,Y.A)("p",{target:"e1m0yzrp1"})((function(e){return{margin:0,fontSize:e.theme.ketcher.font.size.small,lineHeight:"12px"}}),""),Ms=(0,Y.A)("p",{target:"e1m0yzrp0"})((function(e){var t=e.inBond;return{margin:0,padding:"4px",fontWeight:e.theme.ketcher.font.weight.bold,lineHeight:"14px",borderRadius:"4px",backgroundColor:t?"#CDF1FC":"transparent"}}),""),ks=function(e){var t=e.attachmentPoints,n=e.attachmentPointInBond;return(0,l.Y)(l.FK,{children:t.map((function(e){return(0,l.FD)(ws,{connected:e.connected,inBond:e.id===n,children:[(0,l.Y)(Cs,{children:e.id}),(0,l.Y)(Ms,{inBond:e.id===n,children:e.label})]},e.id)}))})},Ss=(0,Y.A)((function(e){var t=e.className,n=Ar(Oe),r=n.polymerBond,o=n.style,i=(0,s.useMemo)((function(){return o?(0,Y.A)(As,{target:"e18hk05c1"})("top:",(null===o||void 0===o?void 0:o.top)||"",";left:",(null===o||void 0===o?void 0:o.left)||"",";right:",(null===o||void 0===o?void 0:o.right)||"",";"):(0,Y.A)(As,{target:"e18hk05c2"})("")}),[o]),a=r.firstMonomer,c=r.secondMonomer,u=r.firstMonomerAttachmentPoint,d=r.secondMonomerAttachmentPoint,p=Gc({monomerCaps:a.monomerCaps,attachmentPointsToBonds:a.attachmentPointsToBonds}),m=p.preparedAttachmentPointsData,h=p.connectedAttachmentPoints,v=Gc({monomerCaps:null===c||void 0===c?void 0:c.monomerCaps,attachmentPointsToBonds:null===c||void 0===c?void 0:c.attachmentPointsToBonds}),g=v.preparedAttachmentPointsData,b=v.connectedAttachmentPoints;return a&&c?(0,l.Y)(i,{className:t,"data-testid":"polymer-library-preview",children:(0,l.Y)(Dl,{firstMonomer:a,secondMonomer:c,firstMonomerOverview:(0,l.Y)(Ml,{monomer:a,usage:f.UsageInMacromolecule.BondPreview,connectedAttachmentPoints:h,selectedAttachmentPoint:u,attachmentPoints:(0,l.Y)(ks,{attachmentPoints:m,attachmentPointInBond:u})}),secondMonomerOverview:(0,l.Y)(Ml,{monomer:c,usage:f.UsageInMacromolecule.BondPreview,connectedAttachmentPoints:b,selectedAttachmentPoint:d,attachmentPoints:(0,l.Y)(ks,{attachmentPoints:g,attachmentPointInBond:d})})})}):null}),{target:"e18hk05c0"})("width:",h.VH.widthForBond,"px;height:",h.VH.heightForBond,"px;"),Is=Ss;function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ps=(0,Y.A)("div",{target:"e88xzqx0"})("display:inline-block;position:absolute;background:",(function(e){return e.theme.ketcher.color.background.primary}),";z-index:",(function(e){return e.theme.ketcher.zIndex.overlay}),";"),Es=function(){var e=Ar(Oe),t=(0,s.useRef)(null),n=(0,s.useState)(!1),o=(0,a.A)(n,2),i=o[0],c=o[1];return(0,s.useEffect)((function(){if(t.current&&!e.style)if(e&&e.type){var n,r,o;t.current.setAttribute("style",""),c(!0);var a=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(null===a||void 0===a?void 0:a.height)||0,s=(null===a||void 0===a?void 0:a.width)||0,u=null===(r=f.ZoomTool.instance)||void 0===r||null===(r=r.canvasWrapper.node())||void 0===r?void 0:r.getBoundingClientRect(),d=(null===u||void 0===u?void 0:u.bottom)||0,p=(null===u||void 0===u?void 0:u.left)||0,m=(null===u||void 0===u?void 0:u.right)||0,h=null===(o=e.target)||void 0===o?void 0:o.getBoundingClientRect(),v=(null===h||void 0===h?void 0:h.top)||0,g=(null===h||void 0===h?void 0:h.bottom)||0,b=(null===h||void 0===h?void 0:h.left)||0,y=(null===h||void 0===h?void 0:h.width)||0,x=b-y/2,A=v-l-5,w=g+5,C=b+y/2-s/2;if(t.current.style.top="".concat(v>l+5||g+l>d&&g>d/2?A:w,"px"),x>s/2&&x+s/2<m)t.current.style.left="".concat(C,"px");else if(x<s/2)t.current.style.left="".concat(p,"px");else{t.current.style.left="".concat(m-s-10,"px")}}else i&&(c(!1),t.current.setAttribute("style",""))}),[e]),e?(0,l.FD)(Ps,{ref:t,style:Ds({},null===e||void 0===e?void 0:e.style),children:[e.type===r.Monomer&&(0,l.Y)(us,{}),e.type===r.Preset&&(0,l.Y)(xs,{}),e.type===r.Bond&&(0,l.Y)(Is,{}),e.type===r.AmbiguousMonomer&&(0,l.Y)(h.ye,{preview:e})]}):null},Ns=(0,Y.A)(I.A,{target:"e1brfei30"})((function(e){var t=e.theme,n=e.variant;return{color:"outlined"===n?t.ketcher.color.text.primary:t.ketcher.color.button.text.primary,boxShadow:"none",transition:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"4px 8px",border:"outlined"===n?t.ketcher.outline.small:"none",background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.active,borderRadius:t.ketcher.border.radius.regular,textTransform:"none",fontSize:t.ketcher.font.size.regular,fontWeight:t.ketcher.font.weight.regular,":hover":{color:"outlined"===n?t.ketcher.color.text.dark:t.ketcher.color.button.text.primary,background:"outlined"===n?t.ketcher.color.background.primary:t.ketcher.color.button.group.hover,boxShadow:"none"},":disabled":{cursor:"auto",background:"#e1e5ea",outline:"none"}}}),""),js=function(){var e=Ar(Pe),t=(0,s.useState)(null===e||void 0===e?void 0:e.events.changeSequenceTypeEnterMode),n=(0,a.A)(t,2),r=n[0],o=n[1],i=(0,s.useState)(!1),c=(0,a.A)(i,2),u=c[0],d=c[1],p=Ar(Ee),m=wr(),h=!!p,v=xr(),g=function(e){var t="object"===(0,ee.A)(e)?e.mode:e;d("sequence-layout-mode"===t)};(0,s.useEffect)((function(){return null===e||void 0===e||e.events.selectMode.add(g),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.add((function(e){v(xt(e===Ve?$e:et)),o(e)})),null===e||void 0===e||e.events.changeSequenceTypeEnterMode.dispatch(f.SequenceType.RNA),function(){null===e||void 0===e||e.events.selectMode.remove(g)}}),[e]),(0,s.useEffect)((function(){g(m)}),[m]);var b=function(t){e.events.changeSequenceTypeEnterMode.dispatch(t)};return u?(0,l.Y)(l.FK,{children:(0,l.Y)(P.A,{sx:{mr:1,ml:1},children:(0,l.FD)(E.A,{disabled:h,children:[(0,l.Y)(Ns,{"data-testid":"".concat(f.SequenceType.RNA,"Btn"),title:"RNA (Ctrl+Alt+R)",variant:r===f.SequenceType.RNA?"contained":"outlined",onClick:function(){return b(f.SequenceType.RNA)},children:"RNA"}),(0,l.Y)(Ns,{"data-testid":"".concat(f.SequenceType.DNA,"Btn"),title:"DNA (Ctrl+Alt+D)",variant:r===f.SequenceType.DNA?"contained":"outlined",onClick:function(){return b(f.SequenceType.DNA)},children:"DNA"}),(0,l.Y)(Ns,{"data-testid":"".concat(f.SequenceType.PEPTIDE,"Btn"),title:"Peptides (Ctrl+Alt+P)",variant:r===f.SequenceType.PEPTIDE?"contained":"outlined",onClick:function(){return b(f.SequenceType.PEPTIDE)},children:"PEP"})]})})}):null},Ys=function(){var e=xr(),t=Ar(Pe),n=Ar(Be),r=Ar(ze),o=Ar(Re),i=Ar(qe);return function(){var a=(0,W.A)(G().mark((function a(l){var c,s,u,d,p,m,v,g,b,y,x;return G().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&!l){a.next=2;break}return a.abrupt("return");case 2:if(s=h.e3.getIndigo(),u=t.drawingEntitiesManager.filterSelection(),d=new f.KetSerializer,p=u.hasDrawingEntities?u:t.drawingEntitiesManager,m=f.ChainsCollection.fromMonomers((0,F.A)(p.monomers.values())),v=null===(c=m.firstNode)||void 0===c?void 0:c.monomer,g=!v||m.chains.reduce((function(e,t){return e+t.monomers.length}),0)<=(0,f.getAllConnectedMonomersRecursively)(v).length,p.hasDrawingEntities&&g){a.next=12;break}return e(we(void 0)),a.abrupt("return");case 12:return b=d.serialize(new f.Struct,p,void 0,!1),a.next=15,s.calculateMacromoleculeProperties({struct:b},{upc:o/se[n],nac:i/se[r]});case 15:y=a.sent;try{x=y.properties&&JSON.parse(y.properties),e(we(x))}catch(A){f.KetcherLogger.error("Error during parsing macromolecule properties: ",A),e(we(void 0))}case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ls=["className"];function Fs(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ts(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rs="Other",qs=function(e,t){var n,r=null===e||void 0===e||null===(n=e.monomerCount)||void 0===n?void 0:n[t];return r&&Object.keys(r).length>0},Hs=(0,Y.A)("div",{target:"eifx56c30"})((function(e){return{width:"100%",height:e.hasError?"124px":"177px",position:"relative",backgroundColor:"white",padding:"2px 0",borderRadius:"8px 8px",overflow:"hidden",boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)"}}),""),_s=(0,Y.A)("div",{target:"eifx56c29"})((function(){return{display:"flex"}}),""),Us=(0,Y.A)("div",{target:"eifx56c28"})((function(){return{flex:1,display:"flex",justifyContent:"center"}}),""),Vs=(0,Y.A)(h.In,{target:"eifx56c27"})((function(){return{display:"flex",alignItems:"center",width:"12px",height:"12px",padding:"2px 6px",cursor:"pointer"}}),""),Ks=(0,Y.A)("div",{target:"eifx56c26"})((function(){return{display:"flex",height:"25px",alignItems:"center",padding:"0 8px"}}),""),Ws=(0,Y.A)("div",{target:"eifx56c25"})((function(){return{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"700",padding:"0 8px",color:"#585858"}}),""),Zs=(0,Y.A)("div",{target:"eifx56c24"})((function(){return{display:"flex",alignItems:"center",height:"24px",borderLeft:"1px solid #CAD3DD",color:"#585858"}}),""),Gs=(0,Y.A)("div",{target:"eifx56c23"})((function(){return{fontSize:"14px",fontWeight:"700",padding:"0 8px"}}),""),Qs=(0,Y.A)("div",{target:"eifx56c22"})((function(){return{width:"100%",height:"100%",top:"-25px",position:"relative"}}),""),Xs=(0,Y.A)("div",{target:"eifx56c21"})((function(){return{width:"100%",padding:"0 4px 4px"}}),""),Js=(0,Y.A)("div",{target:"eifx56c20"})((function(){return{display:"flex",width:"100%",height:"74px",flexDirection:"column",justifyContent:"center",alignItems:"center"}}),""),$s=(0,Y.A)("div",{target:"eifx56c19"})((function(){return{fontSize:"14px"}}),""),eu=(0,Y.A)("div",{target:"eifx56c18"})((function(){return{fontSize:"12px"}}),""),tu=(0,Y.A)("div",{target:"eifx56c17"})((function(){return{display:"flex",padding:"4px 0px",height:"32px",gap:"12px"}}),""),nu=(0,Y.A)("div",{target:"eifx56c16"})((function(){return{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0 2px"}}),""),ru=(0,Y.A)("div",{target:"eifx56c15"})((function(){return{height:"90px",backgroundColor:"white",borderRadius:"8px",padding:"5px"}}),""),ou=(0,Y.A)("div",{target:"eifx56c14"})((function(){return{display:"flex",justifyContent:"space-between"}}),""),iu=(0,Y.A)("div",{target:"eifx56c13"})((function(){return{display:"grid",gridTemplateColumns:"2fr 1fr"}}),""),au=(0,Y.A)("div",{target:"eifx56c12"})((function(e){var t=e.disabled;return{display:"flex",alignItems:"center",padding:"0 0 0 6px",pointerEvents:t?"none":"auto",opacity:t?.5:1}}),""),lu=(0,Y.A)((function(e){var t=e.className,n=(0,Q.A)(e,Ls);return(0,l.Y)(ie.A,zs(zs({},n),{},{classes:{popper:t}}))}),{target:"eifx56c11"})((function(){return(0,L.A)({},"& .".concat(ae.A.tooltip),{maxWidth:"220px",padding:"12px",backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0 1px 5px 0 #CCCCCC",fontSize:11})}),""),cu=(0,Y.A)("div",{target:"eifx56c10"})((function(){return{display:"flex",flexDirection:"column",gap:"4px",fontSize:"12px",fontWeight:"700",color:"#585858",borderBottom:"1px solid #585858",paddingBottom:"8px",marginBottom:"8px"}}),""),su=(0,Y.A)("div",{target:"eifx56c9"})((function(){return{fontSize:"10px",paddingRight:"5px",whiteSpace:"nowrap"}}),""),uu=(0,Y.A)("div",{target:"eifx56c8"})((function(){return{fontSize:"14px",fontWeight:"700"}}),""),du=(0,Y.A)(h.In,{target:"eifx56c7"})((function(){return{width:"20px",height:"20px"}}),""),pu=(0,Y.A)("div",{target:"eifx56c6"})((function(){return{display:"flex",alignItems:"center"}}),""),mu=(0,Y.A)(xa,{target:"eifx56c5"})((function(){return{position:"relative",padding:"0 0 0 5px",zIndex:1}}),""),fu="text-input-field-input",hu=(0,Y.A)(ol,{target:"eifx56c4"})((function(){return(0,L.A)({margin:0},".".concat(fu),{width:"60px","::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0},MozAppearance:"textfield"})}),""),vu=(0,Y.A)("div",{target:"eifx56c3"})((function(){return{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"4px 6px",width:"100%",backgroundColor:"white",borderRadius:"8px",padding:"6px",height:"90px",alignContent:"flex-start"}}),""),gu=(0,Y.A)("div",{target:"eifx56c2"})("display:flex;position:relative;justify-content:space-between;background-color:#eff2f5;padding:4px 6px;font-weight:500;font-size:12px;border-radius:2px;min-width:50px;flex:1;opacity:",(function(e){return e.disabled?.4:1}),";&:after{content:'';position:absolute;bottom:0;left:0;width:15px;height:2px;background:",(function(e){var t,n=e.theme,r=e.monomerShortName;return(null===(t=(e.isPeptide?n.ketcher.peptide.color:n.ketcher.monomer.color)[r])||void 0===t?void 0:t.regular)||n.ketcher.monomer.color.default.regular}),";border-radius:0 0 0 2px;}"),bu=(0,Y.A)("div",{target:"eifx56c1"})((function(){return{fontWeight:"700"}}),""),yu=function(e){var t=(e.isPeptide?f.peptideNaturalAnalogues:f.rnaDnaNaturalAnalogues).map((function(t){return[t,e.monomerCount[t]||0]}));return t.push([Rs,e.monomerCount[Rs]||0]),t.sort((function(e,t){return e[0]===Rs?1:e[0].localeCompare(t[0])})),(0,l.Y)(vu,{children:oe()(t,(function(t){var n=(0,a.A)(t,2),r=n[0],o=n[1];return(0,l.FD)(gu,{monomerShortName:r,isPeptide:e.isPeptide,disabled:0===o,children:[(0,l.Y)(bu,{children:r}),(0,l.Y)("div",{children:o})]},r)}))})},xu=function(e){var t;return(0,l.FD)(au,{disabled:e.disabled,children:[(0,l.FD)(su,{children:[e.name,void 0!==e.value&&":"]}),e.onChangeValue?(0,l.Y)(hu,{value:null!==(t=e.value)&&void 0!==t?t:"",id:"macromolecule-property-".concat(e.name),type:"number",min:0,inputClassName:fu,onChange:function(t){var n;return null===e||void 0===e||null===(n=e.onChangeValue)||void 0===n?void 0:n.call(e,Number(t))}}):(0,l.Y)(uu,{children:e.value}),e.hint&&(0,l.Y)(lu,{title:e.hint,children:(0,l.Y)(pu,{children:(0,l.Y)(du,{name:"about"})})}),e.options&&e.selectedOption&&e.onChangeOption&&(0,l.Y)(mu,{options:e.options.map((function(e){return{id:e,label:e}})),currentSelection:e.selectedOption,selectionHandler:e.onChangeOption})]})},Au=function(e){var t=e.part,n=t.match(/^([A-Za-z]+)(\d+)$/);if(!n)return t;var r=(0,a.A)(n,3);r[0];var o=r[1],i=r[2];return(0,l.FD)("span",{children:[o,(0,l.Y)("sub",{children:i})," "]})},wu=(0,Y.A)("svg",{target:"eifx56c0"})((function(){return{width:"100%",height:"100%"}}),"");var Cu,Mu,ku=function(e){return e<10?Math.floor(e):e<100?10*Math.floor(e/10):e<1e3?50*Math.floor(e/50):100*Math.floor(e/100)},Su=function(e){var t=e.data,n=function(e,t,n){var r=e.length;if(n>=r||0===n)return{xs:e,ys:t};for(var o=[e[0]],i=[t[0]],a=(r-2)/(n-2),l=0,c=0;c<n-2;c++){for(var s=Math.floor((c+1)*a)+1,u=Math.floor((c+2)*a)+1,d=0,p=0,m=u-s,f=s;f<u;f++)d+=e[f],p+=t[f];d/=m,p/=m;for(var h=Math.floor(c*a)+1,v=Math.floor((c+1)*a)+1,g=-1,b=h,y=h;y<v;y++){var x=Math.abs((e[l]-d)*(t[y]-t[l])-(e[l]-e[y])*(p-t[l]));x>g&&(g=x,b=y)}o.push(e[b]),i.push(t[b]),l=b}return o.push(e[r-1]),i.push(t[r-1]),{xs:o,ys:i}}(t.map((function(e,t){return t+1})),t,100),r=(0,s.useState)(0),o=(0,a.A)(r,2),i=o[0],c=o[1],u=(0,s.useRef)(null);(0,s.useEffect)((function(){if(n.xs.length&&u.current){var e=u.current.width.baseVal.value,r=u.current.height.baseVal.value,o=10,i=10,a=20,l=30;V.Ltv(u.current).selectAll("*").remove();var c,s,d=V.m4Y().domain([0,n.xs.length-1]).range([l,e-i]),p=V.m4Y().domain([0,1]).range([r-a,o]),m=V.n8j().x((function(e,t){return d(t)})).y((function(e){return p(e)})).curve(V.lUB),f=V.Ltv(u.current),h=(c=e)>360?5:c>300?4:c>240?3:2,v=ku(t.length/(h+1)),g=v;if(v>=1){for(var b=-1/0,y=-1/0,x=-1/0,A=1;A<=h;A++){var w=A,C=ku(t.length/(w+1)),M=Number((C*((w+1)/t.length)).toFixed(2));(M>x||M===x&&w>b)&&(b=w,x=M,y=C)}s=Array.from({length:b},(function(e,t){return n.xs.findLastIndex((function(e){return e<=(t+1)*y&&e>t*y}))})),g=y}else s=(0,F.A)(Array(Math.min(h,n.xs.length)).keys()),g=1;var k=V.l78(d).tickValues(s).tickFormat((function(e,t){return((t+1)*g).toString()}));f.append("g").attr("transform","translate(0,".concat(r-a,")")).call(k).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.selectAll("line").attr("stroke","#CAD3DD").attr("y1",-r)})).call((function(e){return e.selectAll("text").attr("font-size","8px")}));var S=V.V4s(p).tickValues([0,.5,1]).tickFormat(V.GPZ(".1f"));f.append("g").attr("transform","translate(".concat(l,",0)")).call(S).call((function(e){return e.select(".domain").remove()})).call((function(t){t.selectAll("line").each((function(t,n,r){.5===t?V.Ltv(r[n]).attr("x1",e).attr("stroke","#CAD3DD").attr("stroke-dasharray",2):V.Ltv(r[n]).remove()}))})).call((function(e){return e.selectAll("text").attr("font-size","8px")})),f.append("path").datum(n.ys).attr("fill","none").attr("stroke","#167782").attr("stroke-width",1).attr("d",m)}}),[t,i]);var d=new ResizeObserver((0,m.debounce)((function(e){var t,n=Fs(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.contentRect.width!==i&&c(r.contentRect.width)}}catch(o){n.e(o)}finally{n.f()}}),100));return(0,s.useEffect)((function(){return u.current&&d.observe(u.current),function(){d.disconnect()}}),[u,i]),(0,l.Y)(wu,{ref:u})},Iu=function(e){return e.isError?(0,l.FD)(Js,{children:[(0,l.Y)($s,{children:"No Data Available"}),(0,l.Y)(eu,{children:"Select monomer, chain or part of a chain"})]}):(0,l.FD)(Xs,{children:[(0,l.FD)(iu,{children:[(0,l.FD)(tu,{children:[(0,l.Y)(xu,{name:"Isoelectric Point",value:(0,m.isNumber)(e.macromoleculesProperties.pKa)?ne()(e.macromoleculesProperties.pKa,2):"\u2013",hint:"The isoelectric point is calculated as the median of all pKa values for the structure."}),(0,l.Y)(xu,{name:"Extinction Coef.(1/Mcm)",value:(0,m.isNumber)(e.macromoleculesProperties.extinctionCoefficient)?ne()(e.macromoleculesProperties.extinctionCoefficient):"\u2013",hint:"The extinction coefficient for wavelength of 280nm is calculated using the method from Gill, S.C. and von Hippel, P.H. (1989). Only amino acid natural analogues are used in the calculation."})]}),(0,l.Y)(xu,{name:"Hydrophobicity",hint:(0,l.FD)("div",{children:[(0,l.FD)(cu,{children:[(0,l.Y)("div",{children:"y = Hydrophobicity score"}),(0,l.Y)("div",{children:"x = Number of amino acid residues"})]}),"The hydrophobicity is calculated using the method from"," ",(0,l.Y)("i",{children:"Black S.D. and Mould D.R. (1991)"}),". Only amino acid natural analogues are used in the calculation."]})})]}),(0,l.FD)(nu,{children:[e.macromoleculesProperties.monomerCount.peptides&&(0,l.Y)(yu,{monomerCount:e.macromoleculesProperties.monomerCount.peptides,isPeptide:!0}),(0,l.Y)(ru,{children:e.macromoleculesProperties.hydrophobicity&&(0,l.Y)(Su,{data:e.macromoleculesProperties.hydrophobicity})})]})]})},Ou=function(e){var t=xr(),n=Ar(Be),r=Ar(ze),o=Ar(Re),i=Ar(qe);return e.isError?(0,l.FD)(Js,{children:[(0,l.Y)($s,{children:"No Data Available"}),(0,l.Y)(eu,{children:"Select a nucleotide/nucleoside, chain or part of a chain containing nucleotides/nucleosides"})]}):(0,l.FD)(Xs,{children:[(0,l.FD)(ou,{children:[(0,m.isNumber)(e.macromoleculesProperties.Tm)?(0,l.Y)(xu,{name:"Melting Temp. (\xb0C)",value:ne()(e.macromoleculesProperties.Tm,1),hint:"The melting temperature is calculated using the method from Khandelwal G. and Bhyravabhotla J. (2010). Only base natural analogues are used in the calculation."}):(0,l.Y)("div",{}),(0,l.FD)(tu,{children:[(0,l.Y)(xu,{name:"[Unipositive Ions]",value:o,options:["nM","\u03bcM","mM"],selectedOption:n,disabled:!(0,m.isNumber)(e.macromoleculesProperties.Tm),onChangeOption:function(e){t(Ce(e))},onChangeValue:function(e){t(Se(e))}}),(0,l.Y)(xu,{name:"[Oligonucleotides]",value:i,options:["nM","\u03bcM","mM"],selectedOption:r,disabled:!(0,m.isNumber)(e.macromoleculesProperties.Tm),onChangeOption:function(e){t(Me(e))},onChangeValue:function(e){t(Ie(e))}})]})]}),e.macromoleculesProperties.monomerCount.nucleotides&&(0,l.Y)(yu,{monomerCount:e.macromoleculesProperties.monomerCount.nucleotides})]})};!function(e){e[e.PEPTIDES=0]="PEPTIDES",e[e.RNA=1]="RNA",e[e.NO_TAB=-1]="NO_TAB"}(Cu||(Cu={})),function(e){e.Da="Da",e.kDa="kDa",e.MDa="MDa"}(Mu||(Mu={}));var Du,Pu=(0,L.A)((0,L.A)((0,L.A)({},Mu.Da,1),Mu.kDa,1e3),Mu.MDa,1e6),Eu=function(e){return(0,m.isNumber)(e)?e<1e3?Mu.Da:e<1e6?Mu.kDa:Mu.MDa:Mu.Da},Nu=function(){var e=xr(),t=Ar(Pe),n=Ar(Te),r=Ar(Be),o=Ar(ze),i=Ar(Re),c=Ar(qe),u=null===n||void 0===n?void 0:n[0],d=(0,s.useState)(Cu.PEPTIDES),p=(0,a.A)(d,2),f=p[0],h=p[1],v=(0,s.useState)(Eu(null===u||void 0===u?void 0:u.mass)),g=(0,a.A)(v,2),b=g[0],y=g[1],x=Ar(Fe),A=Ys(),w=!x,C=(0,s.useRef)(A),M=(0,s.useCallback)((0,m.debounce)((function(e){C.current(e)}),500),[]);(0,s.useEffect)((function(){C.current=function(e){A(e)}}),[A]),(0,s.useEffect)((function(){return Du&&t.events.selectEntities.hasHandler(Du)&&t.events.selectEntities.remove(Du),Du=function(){M(w)},null===t||void 0===t||t.events.selectEntities.add(Du),function(){null===t||void 0===t||t.events.selectEntities.remove(Du)}}),[M,t,w]),(0,s.useEffect)((function(){M(w)}),[r,o,i,c,w,M]),(0,s.useEffect)((function(){h(qs(u,"nucleotides")?Cu.RNA:Cu.PEPTIDES),y(Eu(null===u||void 0===u?void 0:u.mass))}),[u]);var k=!u||n.length>1,S=k||!qs(u,"peptides"),I=k||!qs(u,"nucleotides"),O=(0,s.useMemo)((function(){return null!==u&&void 0!==u&&u.grossFormula?(0,l.Y)(Ws,{children:null===u||void 0===u?void 0:u.grossFormula.split(" ").map((function(e,t){return(0,l.Y)(Au,{part:e},t)}))}):null}),[null===u||void 0===u?void 0:u.grossFormula]),D=(0,s.useMemo)((function(){return null!==u&&void 0!==u&&u.mass?(0,l.FD)(l.FK,{children:[(0,l.Y)(Gs,{children:ne()((null===u||void 0===u?void 0:u.mass)/Pu[b],3)})," "]}):null}),[null===u||void 0===u?void 0:u.mass,b]);return x?(0,l.FD)(Hs,{hasError:f===Cu.PEPTIDES&&S||f===Cu.RNA&&I,children:[(0,l.FD)(_s,{children:[(0,l.Y)(Us,{children:(0,l.FD)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("path",{d:"M2 6H14",stroke:"#333333"}),(0,l.Y)("path",{d:"M2 10H14",stroke:"#333333"})]})}),(0,l.Y)(Vs,{name:"close",onClick:function(){e(xe(!1))},dataTestId:"macromolecule-properties-close"})]}),(0,l.FD)(Ks,{children:[O,D&&(0,l.FD)(Zs,{children:[D,(0,l.Y)(mu,{options:[Mu.Da,Mu.kDa,Mu.MDa].map((function(e){return{id:e,label:e}})),currentSelection:b,selectionHandler:function(e){y(e)}})]})]}),(0,l.Y)(Qs,{children:(0,l.Y)(fr,{selectedTabIndex:f,onChange:function(e,t){h(t)},isLayoutToRight:!0,tabs:[{caption:"Peptides",testId:"peptides-properties-tab",component:Iu,props:{macromoleculesProperties:u,isError:S}},{caption:"RNA/DNA",component:Ou,testId:"rna-properties-tab",props:{macromoleculesProperties:u,isError:I}}]})})]}):null},ju=(0,f.generateMenuShortcuts)(f.hotkeysConfiguration),Yu=function(e,t){t&&(t.value="".concat(Math.round(e),"%"))},Lu=(0,Y.A)(h.$n,{target:"e1pc97tg0"})((function(e){var t=e.theme,n=e.isActive;return{width:"28px",height:"28px",backgroundColor:n?t.ketcher.color.button.group.active:"white",margin:"2px",padding:"0",borderRadius:"4px",outline:"none",":hover":{backgroundColor:n?t.ketcher.color.button.group.hover:"white"},":hover svg":{fill:n?"white":t.ketcher.color.button.group.active}}}),""),Fu=function(){var e=xr(),t=Ar(Fe),n=Ys(),r=function(){var r=(0,W.A)(G().mark((function r(){var o;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=!t,r.next=3,n(o);case 3:e(Ae({})),hc();case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,l.Y)(Lu,{isActive:t,onClick:r,title:"Calculate properties (".concat(ju.toggleMacromoleculesPropertiesVisibility,")"),"data-testid":"calculate-macromolecule-properties-button",children:(0,l.Y)("svg",{width:"15",height:"16",viewBox:"0 0 15 16",xmlns:"http://www.w3.org/2000/svg",fill:t?"white":"#333333",children:(0,l.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87727 1.65517H9.03053V4.46737L9.42288 5.12973C9.76799 5.04496 10.1287 5 10.5 5C12.9853 5 15 7.01472 15 9.5C15 10.6812 14.5449 11.7562 13.8004 12.559C14.4936 14.1572 13.3016 16 11.456 16H2.54694C0.627617 16 -0.60048 14.0008 0.302223 12.3451C1.6087 9.94883 3.5345 6.39671 4.51457 4.49368V1.65517H3.66783V0H9.87727V1.65517ZM12.2962 13.6272C11.746 13.867 11.1385 14 10.5 14C8.01472 14 6 11.9853 6 9.5C6 7.98987 6.74386 6.65348 7.88515 5.83725L7.33705 4.91194V1.65517H6.20806V4.88502L6.11866 5.05976C5.15873 6.93619 3.14099 10.658 1.79676 13.1235C1.49524 13.6765 1.9056 14.3448 2.54694 14.3448H11.456C11.9075 14.3448 12.2417 14.0139 12.2962 13.6272ZM13.5375 9.5C13.5375 11.1776 12.1776 12.5375 10.5 12.5375C8.82244 12.5375 7.4625 11.1776 7.4625 9.5C7.4625 7.82243 8.82244 6.4625 10.5 6.4625C12.1776 6.4625 13.5375 7.82243 13.5375 9.5Z"})})})};function Tu(){var e=xr(),t=Ar(De),n=Ar(Pe),r=Ar(Ee),o=(0,s.useState)([]),i=(0,a.A)(o,2),c=i[0],u=i[1],d=(0,s.useState)(!1),p=(0,a.A)(d,2),m=p[0],f=p[1],h=(0,s.useState)(),v=(0,a.A)(h,2),g=v[0],b=v[1],y=[t],x=r;(0,s.useEffect)((function(){var e=function(e){u(e),e.length&&!Tc(e)&&(f(!1),Bc(e)?b("antisenseDnaStrand"):zc(e)?b("antisenseRnaStrand"):(b("antisenseStrand"),f(!0)))};return null===n||void 0===n||n.events.selectEntities.add(e),function(){null===n||void 0===n||n.events.selectEntities.remove(e)}}),[n]);return(0,l.FD)(Oc,{onItemClick:function(t){Bl[t]?e(Mt(t)):"undo"===t||"redo"===t?n.events.selectHistory.dispatch(t):"clear"===t?(n.events.selectTool.dispatch([t]),e(me("select-rectangle")),n.events.selectTool.dispatch(["select-rectangle"]),r&&No(e,n)):"antisenseRnaStrand"!==t&&"antisenseDnaStrand"!==t||n.events.createAntisenseChain.dispatch("antisenseDnaStrand"===t)},activeMenuItems:y,isHorizontal:!0,children:[(0,l.FD)(Oc.Group,{isHorizontal:!0,divider:!0,children:[(0,l.Y)(Oc.Item,{itemId:"clear",title:"Clear Canvas (".concat(ju.clear,")"),testId:"clear-canvas"}),(0,l.Y)(Oc.Item,{itemId:"open",title:"Open...",disabled:x,testId:"open-file-button"}),(0,l.Y)(Oc.Item,{itemId:"save",title:"Save as...",testId:"save-file-button"})]}),(0,l.FD)(Oc.Group,{isHorizontal:!0,divider:!0,children:[(0,l.Y)(Oc.Item,{itemId:"undo",title:"Undo (".concat(ju.undo,")"),disabled:x,testId:"undo"}),(0,l.Y)(Oc.Item,{itemId:"redo",title:"Redo (".concat(ju.redo,")"),disabled:x,testId:"redo"})]}),(0,l.FD)(Oc.Group,{isHorizontal:!0,children:[(0,l.FD)(Oc.Submenu,{disabled:!(null!==c&&void 0!==c&&c.length)||!Rc(c)||Tc(c),needOpenByMenuItemClick:m,vertical:!0,layoutModeButton:!0,generalTitle:"Create Antisense Strand",testId:"Create Antisense Strand",activeItem:g,children:[(0,l.Y)(Oc.Item,{itemId:"antisenseRnaStrand",title:"Create RNA Antisense Strand (".concat(ju.createRnaAntisenseStrand,")"),disabled:!(null!==c&&void 0!==c&&c.length)||!Rc(c)||Tc(c),testId:"antisenseRnaStrand",type:"button"}),(0,l.Y)(Oc.Item,{itemId:"antisenseDnaStrand",title:"Create DNA Antisense Strand (".concat(ju.createDnaAntisenseStrand,")"),disabled:!(null!==c&&void 0!==c&&c.length)||!Rc(c)||Tc(c),testId:"antisenseDnaStrand",type:"button"})]}),(0,l.Y)(Fu,{})]})]})}function Bu(){var e=Ar(De),t=Ar(Pe),n="sequence-layout-mode"===wr(),r=[e];return(0,l.FD)(Oc,{testId:"left-toolbar",onItemClick:function(e){t.events.selectTool.dispatch([e,{toolName:e}])},activeMenuItems:r,children:[(0,l.FD)(Oc.Group,{divider:!0,children:[(0,l.Y)(Oc.Item,{itemId:"hand",title:"Hand Tool (".concat(ju.hand,")"),testId:"hand"}),(0,l.Y)(Oc.Item,{itemId:"select-rectangle",title:"Select Rectangle  (".concat(ju.exit,")"),testId:"select-rectangle"}),(0,l.Y)(Oc.Item,{itemId:"erase",title:"Erase (".concat(ju.erase,")"),testId:"erase",disabled:n})]}),(0,l.Y)(Oc.Group,{children:(0,l.FD)(Oc.Submenu,{disabled:n,testId:"bonds-drop-down-button",needOpenByMenuItemClick:!1,children:[(0,l.Y)(Oc.Item,{itemId:"bond-single",title:"Single Bond (1)",testId:"single-bond",disabled:n}),(0,l.Y)(Oc.Item,{itemId:"bond-hydrogen",title:"Hydrogen Bond (2)",testId:"hydrogen-bond",disabled:n})]})})]})}var zu=(0,Y.A)("div",{target:"e1aw4j3q7"})({name:"bjn8wh",styles:"position:relative"}),Ru=(0,Y.A)(I.A,{target:"e1aw4j3q6"})("display:flex;color:",(function(e){return e.theme.ketcher.color.dropdown.primary}),";padding-right:0;padding-left:0;& svg{margin-left:2px;width:1rem;height:1rem;}"),qu=(0,Y.A)("span",{target:"e1aw4j3q5"})({name:"td41hq",styles:"width:35px"}),Hu=(0,Y.A)(N.Ay,{target:"e1aw4j3q4"})("& .MuiPopover-paper{padding:8px;width:175px;border:none;border-radius:0px 0px 4px 4px;box-shadow:",(function(e){return e.theme.ketcher.shadow.regular}),";box-sizing:border-box;}"),_u=(0,Y.A)("div",{target:"e1aw4j3q3"})({name:"5s1n17",styles:"display:flex;flex-direction:column;white-space:nowrap;word-break:keep-all;background:white"}),Uu=(0,Y.A)(I.A,{target:"e1aw4j3q2"})("display:flex;justify-content:space-between;font-size:",(function(e){return e.theme.ketcher.font.size.regular}),";line-height:14px;padding:7px 8px;text-transform:none;color:",(function(e){return e.theme.ketcher.color.dropdown.primary}),";"),Vu=(0,Y.A)("span",{target:"e1aw4j3q1"})({name:"btyqtq",styles:"color:#cad3dd"}),Ku=(0,Y.A)("input",{target:"e1aw4j3q0"})("border:1px solid #cad3dd;border-radius:4px;padding:3px 8px;color:",(function(e){return e.theme.ketcher.color.text.light}),";font-size:",(function(e){return e.theme.ketcher.font.size.medium}),";line-height:16px;margin-bottom:8px;&:hover{border-color:",(function(e){return e.theme.ketcher.color.input.border.hover}),";}&:active,&:focus{border-color:",(function(e){return e.theme.ketcher.outline.selected.color}),";outline:none;}&::after,&::before{display:none;}"),Wu=function(e){var t=e.onZoomSubmit,n=e.currentZoom,r=e.inputRef,o=(0,s.useCallback)((function(e){var n=r.current;n&&([ju["zoom-out"],ju["zoom-in"]].includes(e.key)||e.nativeEvent.stopImmediatePropagation(),"Enter"===e.key&&(t(),n.select()))}),[t,r,ju]);return(0,s.useEffect)((function(){var e=r.current;Yu(n,e),document.activeElement===e&&(null===e||void 0===e||e.select())}),[n,r]),(0,s.useEffect)((function(){var e=r.current;null===e||void 0===e||e.focus(),null===e||void 0===e||e.select()}),[r]),(0,l.Y)(Ku,{ref:r,"data-testid":"zoom-value",onFocus:function(e){e.target.select()},onKeyDown:o})},Zu=function(){var e=(0,s.useState)(!1),t=(0,a.A)(e,2),n=t[0],r=t[1],o=(0,s.useState)(100),i=(0,a.A)(o,2),c=i[0],u=i[1],d=(0,s.useRef)(null),p=(0,s.useRef)(null);(0,s.useEffect)((function(){var e;null===f.ZoomTool||void 0===f.ZoomTool||null===(e=f.ZoomTool.instance)||void 0===e||e.subscribeOnZoomEvent((function(){var e;u(Math.round(100*(null===f.ZoomTool||void 0===f.ZoomTool||null===(e=f.ZoomTool.instance)||void 0===e?void 0:e.getZoomLevel())))}))}),[null===f.ZoomTool||void 0===f.ZoomTool?void 0:f.ZoomTool.instance]);var m=(0,s.useCallback)((function(){var e=p.current;if(e){var t=function(e){var t=parseInt(e||"");return isNaN(t)?0:t}(e.value);if(t&&t!==c){var n=function(e,t){if(0===e)return t;var n=100*f.ZoomTool.instance.MINZOOMSCALE,r=100*f.ZoomTool.instance.MAXZOOMSCALE;return e<n?n:e>r?r:e}(t,c);Yu(n,e),f.ZoomTool.instance.zoomTo(n/100)}else Yu(c,e)}}),[c]);return(0,l.FD)(zu,{ref:d,children:[(0,l.FD)(Ru,{onClick:function(){r(!0)},"data-testid":"zoom-selector",children:[(0,l.FD)(qu,{"data-testid":"zoom-input",children:[c,"%"]}),(0,l.Y)(h.In,{name:"chevron"})]}),(0,l.Y)(Hu,{open:n,onClose:function(){r(!1)},anchorEl:d.current,container:document.querySelector(h.tS),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,l.FD)(_u,{children:[(0,l.Y)(Wu,{onZoomSubmit:m,inputRef:p,currentZoom:c}),(0,l.FD)(Uu,{"data-testid":"zoom-out",title:"Zoom Out",onClick:function(){f.ZoomTool.instance.zoomOut()},children:[(0,l.Y)("span",{children:"Zoom out"}),(0,l.Y)(Vu,{children:ju["zoom-minus"]})]}),(0,l.FD)(Uu,{"data-testid":"zoom-in",title:"Zoom In",onClick:function(){f.ZoomTool.instance.zoomIn()},children:[(0,l.Y)("span",{children:"Zoom in"}),(0,l.Y)(Vu,{children:ju["zoom-plus"]})]}),(0,l.FD)(Uu,{"data-testid":"zoom-default",title:"Zoom 100%",onClick:function(){f.ZoomTool.instance.resetZoom()},children:[(0,l.Y)("span",{children:"Zoom 100%"}),(0,l.Y)(Vu,{children:ju["zoom-reset"]})]})]})})]})},Gu=function(){var e=Ar(Pe),t=document.querySelector(h.tS);return t?(0,U.createPortal)((0,l.Y)(Zr,{id:zr.FOR_POLYMER_BOND,handleMenuChange:function(t){var n=t.id,r=t.props;if("edit_connection_points"===n){var o=r.polymerBondRenderer.polymerBond;e.events.openMonomerConnectionModal.dispatch({firstMonomer:o.firstMonomer,secondMonomer:o.secondMonomer,polymerBond:o,isReconnectionDialog:!0}),e.events.startNewSequence.dispatch(r.sequenceItemRenderer)}},menuItems:[{name:"edit_connection_points",title:"Edit Connection Points...",disabled:!1,hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.polymerBondRenderer)}}]}),t):null};function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xu=[f.ToolName.bondSingle,f.ToolName.selectRectangle],Ju=function(){var e=Ar(Pe),t=Ar(De),n=Ar(Le),i=xr(),c=Ar(dn),u=Ar(Ye),d=(0,s.useCallback)((function(){i(vt(null===e||void 0===e?void 0:e.monomersLibrary))}),[e]);(0,s.useEffect)((function(){return null===e||void 0===e||e.events.updateMonomersLibrary.add(d),function(){null===e||void 0===e||e.events.updateMonomersLibrary.remove(d)}}),[e]),(0,s.useEffect)((function(){var n=function(e){var n=(0,a.A)(e,1)[0];n!==t&&i(me(n))};return e&&(e.events.error.add((function(e){i(St(e))})),e.events.openErrorModal.add((function(e){i(Ot(e))})),i(me("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add((function(e){return i(Mt({name:"monomerConnection",additionalProps:e}))})),e.events.openConfirmationDialog.add((function(e){return i(Mt({name:"confirmationDialog",additionalProps:e}))})),e.events.selectTool.add(n)),function(){i(me(null)),null===e||void 0===e||e.events.selectTool.remove(n)}}),[e]);var p=(0,s.useCallback)((function(e){return i(be(e))}),[i]),v=(0,s.useCallback)((0,m.debounce)((function(e){return p(e)}),500),[p]);(0,s.useEffect)((function(){var n=function(e){var n=(0,a.A)(e,1)[0];n!==t&&i(me(n))};return e&&(e.events.error.add((function(e){i(St(e))})),e.events.openErrorModal.add((function(e){i(Ot(e))})),i(me("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add((function(e){return i(Mt({name:"monomerConnection",additionalProps:e}))})),e.events.selectTool.add(n)),function(){i(me(null)),null===e||void 0===e||e.events.selectTool.remove(n)}}),[e]);var g=(0,s.useCallback)((function(e,t){var n={type:r.Bond,polymerBond:e,style:t};v(n)}),[v]),b=(0,s.useCallback)((function(e){var t,i,a;if(1!==e.buttons&&2!==e.buttons){if(n)return e.preventDefault(),void e.stopPropagation();var l=null===(t=e.target.__data__)||void 0===t?void 0:t.polymerBond;if(!(l&&!l.finished||l instanceof f.HydrogenBond))if(l){var s=(0,h.Xx)(l,e.target.getBoundingClientRect());g(l,s)}else{var u=null===(i=e.target.__data__)||void 0===i?void 0:i.node,d=(null===(a=e.target.__data__)||void 0===a?void 0:a.monomer)||(null===u||void 0===u?void 0:u.monomer);if(!(u&&u instanceof f.BackBoneSequenceNode))if(d instanceof f.AmbiguousMonomer){var p={type:r.AmbiguousMonomer,monomer:d.variantMonomerItem,target:e.target};v(p)}else{var m=d.monomerItem,b=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){(0,L.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.attachmentPointsToBonds);if(u instanceof f.Nucleotide||u instanceof f.Nucleoside){var y,x=u instanceof f.Nucleotide?[u.sugar.monomerItem,u.rnaBase.monomerItem,null===(y=u.phosphate)||void 0===y?void 0:y.monomerItem]:[u.sugar.monomerItem,u.rnaBase.monomerItem];if(u.rnaBase instanceof f.AmbiguousMonomer){var A={type:r.AmbiguousMonomer,monomer:u.rnaBase.variantMonomerItem,presetMonomers:x,target:e.target};return void v(A)}var w,C=c.find((function(e){var t=[e.sugar,e.base,e.phosphate];return x.every((function(e,n){var r;return(null===e||void 0===e?void 0:e.props.Name)===(null===(r=t[n])||void 0===r?void 0:r.props.Name)}))}));w=u instanceof f.Nucleoside?o.ChainEnd:void 0!==u.firstMonomerInNode.R1AttachmentPoint?o.ChainStart:o.ChainMiddle;var M={type:r.Preset,monomers:x,name:null===C||void 0===C?void 0:C.name,idtAliases:null===C||void 0===C?void 0:C.idtAliases,position:w,target:e.target};v(M)}else{var k={type:r.Monomer,monomer:m,attachmentPointsToBonds:b,target:e.target};v(k)}}}}}),[g,v,c,n]),y=(0,s.useCallback)((function(){v.cancel(),i(be(void 0))}),[v,i]);return(0,s.useEffect)((function(){null===e||void 0===e||e.events.mouseOverMonomer.add(b),null===e||void 0===e||e.events.mouseLeaveMonomer.add(y),null===e||void 0===e||e.events.mouseOverSequenceItem.add(b),null===e||void 0===e||e.events.mouseLeaveSequenceItem.add(y),null===e||void 0===e||e.events.mouseOverPolymerBond.add(b),null===e||void 0===e||e.events.mouseLeavePolymerBond.add(y);var n=function(e){y(),1===e.buttons&&Xu.includes(t)||b(e)};return null===e||void 0===e||e.events.mouseOnMoveMonomer.add(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.add(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.add(n),window.addEventListener("hidePreview",y),function(){null===e||void 0===e||e.events.mouseOverMonomer.remove(b),null===e||void 0===e||e.events.mouseLeaveMonomer.remove(y),null===e||void 0===e||e.events.mouseOverSequenceItem.remove(b),null===e||void 0===e||e.events.mouseLeaveSequenceItem.remove(y),null===e||void 0===e||e.events.mouseOverPolymerBond.remove(b),null===e||void 0===e||e.events.mouseLeavePolymerBond.remove(y),null===e||void 0===e||e.events.mouseOnMoveMonomer.remove(n),null===e||void 0===e||e.events.mouseOnMoveSequenceItem.remove(n),null===e||void 0===e||e.events.mouseOnMovePolymerBond.remove(n),window.removeEventListener("hidePreview",y)}}),[e,t,b,y]),(0,s.useEffect)((function(){u||null===e||void 0===e||e.events.resetSequenceEditMode.dispatch()}),[u]),(0,l.Y)(l.FK,{})},$u=function(e){var t=e.selectedMonomers,n=e.contextMenuEvent,r=t||[],o=Ar(Pe),i=_c(r,n),a=Hc(i),c=[{name:"copy",title:"Copy",disabled:0===(null===r||void 0===r?void 0:r.length)},{name:"create_antisense_rna_chain",title:"Create Antisense RNA Strand",separator:!1,disabled:Tc(r),hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.selectedMonomers)||!Rc(null===t||void 0===t?void 0:t.selectedMonomers)}},{name:"create_antisense_dna_chain",title:"Create Antisense DNA Strand",separator:!0,disabled:Tc(r),hidden:function(e){var t=e.props;return!(null!==t&&void 0!==t&&t.selectedMonomers)||!Rc(null===t||void 0===t?void 0:t.selectedMonomers)}},{name:Lc.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!a.length,subMenuItems:a},{name:"delete",title:"Delete",disabled:0===(null===r||void 0===r?void 0:r.length)}],s=document.querySelector(h.tS);return s&&(0,U.createPortal)((0,l.Y)(Zr,{id:zr.FOR_SELECTED_MONOMERS,handleMenuChange:function(e){var t=e.id;switch(!0){case"copy"===t:o.events.copySelectedStructure.dispatch();break;case"create_antisense_rna_chain"===t:o.events.createAntisenseChain.dispatch(!1);break;case"create_antisense_dna_chain"===t:o.events.createAntisenseChain.dispatch(!0);break;case"delete"===t:o.events.deleteSelectedStructure.dispatch();break;case null===t||void 0===t?void 0:t.startsWith(qc):var n=null===t||void 0===t?void 0:t.replace(qc,"");o.events.modifyAminoAcids.dispatch({monomers:i,modificationType:n})}},menuItems:c}),s)},ed=(0,Y.A)(h.$n,{target:"e1846tr80"})((function(e){var t=e.theme,n=e.isActive;return{width:"40px",height:"31px",backgroundColor:n?t.ketcher.color.button.group.active:"white",marginRight:"8px",border:n?t.ketcher.outline.selected.color:t.ketcher.outline.small,borderRadius:"4px",outline:"none",":hover":{backgroundColor:n?t.ketcher.color.button.group.hover:"white"},":hover svg":{fill:n?"white":t.ketcher.color.button.group.active}}}),""),td=function(){var e=Ar(Pe),t=(0,s.useState)(!0),n=(0,a.A)(t,2),r=n[0],o=n[1],i="sequence-layout-mode"===wr(),c=Ar(Ye);return(0,s.useEffect)((function(){i&&c&&e.events.toggleIsSequenceSyncEditMode.dispatch(r)}),[i,c]),i&&c?(0,l.Y)(l.FK,{children:(0,l.Y)(ed,{isActive:r,onClick:function(){var t=!r;o(t),e.events.toggleIsSequenceSyncEditMode.dispatch(t),hc()},"data-testid":"sync_sequence_edit_mode","data-isActive":r,children:(0,l.FD)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:r?"white":"#333333",children:[(0,l.Y)("rect",{x:"1",y:"1.5",width:"22",height:"2",rx:"1"}),(0,l.Y)("rect",{x:"2.5",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 2.5 1.5)"}),(0,l.Y)("rect",{x:"9.33333",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 9.33333 1.5)"}),(0,l.Y)("rect",{x:"16.1667",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 16.1667 1.5)"}),(0,l.Y)("rect",{x:"23",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 23 1.5)"}),(0,l.Y)("path",{d:"M2.16873 14.2715C2.08963 14.3652 2.02518 14.4253 1.97537 14.4517C1.9285 14.478 1.8699 14.4912 1.79959 14.4912C1.66189 14.4912 1.55057 14.4458 1.46561 14.355C1.38357 14.2612 1.34256 14.1074 1.34256 13.8936V13.2871C1.34256 13.0703 1.38357 12.9165 1.46561 12.8257C1.55057 12.7319 1.66189 12.6851 1.79959 12.6851C1.90506 12.6851 1.99295 12.7129 2.06326 12.7686C2.1365 12.8242 2.19217 12.918 2.23025 13.0498C2.26834 13.1787 2.30789 13.2666 2.34891 13.3135C2.43387 13.4043 2.58475 13.4966 2.80154 13.5903C3.01834 13.6841 3.25564 13.731 3.51346 13.731C3.91482 13.731 4.24441 13.6372 4.50223 13.4497C4.66629 13.3354 4.74832 13.1948 4.74832 13.0278C4.74832 12.9165 4.70877 12.8125 4.62967 12.7158C4.55057 12.6162 4.42166 12.5342 4.24295 12.4697C4.12576 12.4258 3.86355 12.3657 3.45633 12.2896C2.96414 12.1987 2.59207 12.0889 2.34012 11.96C2.08816 11.8311 1.88895 11.6494 1.74246 11.415C1.59598 11.1807 1.52273 10.9272 1.52273 10.6548C1.52273 10.2241 1.70291 9.84766 2.06326 9.52539C2.42361 9.2002 2.89236 9.0376 3.46951 9.0376C3.70096 9.0376 3.91482 9.06396 4.11111 9.1167C4.31033 9.1665 4.49051 9.24414 4.65164 9.34961C4.76883 9.23535 4.88602 9.17822 5.0032 9.17822C5.13504 9.17822 5.24197 9.2251 5.324 9.31885C5.40897 9.40967 5.45145 9.56201 5.45145 9.77588V10.4526C5.45145 10.6694 5.40897 10.8247 5.324 10.9185C5.24197 11.0093 5.13504 11.0547 5.0032 11.0547C4.89188 11.0547 4.7952 11.021 4.71316 10.9536C4.64871 10.9038 4.60037 10.8042 4.56814 10.6548C4.53592 10.5054 4.4949 10.3984 4.4451 10.334C4.36014 10.2227 4.2327 10.1289 4.06277 10.0527C3.89285 9.97656 3.69656 9.93848 3.47391 9.93848C3.14871 9.93848 2.8909 10.0146 2.70047 10.167C2.51297 10.3164 2.41922 10.4731 2.41922 10.6372C2.41922 10.7485 2.4573 10.8569 2.53348 10.9624C2.61258 11.0649 2.72684 11.1455 2.87625 11.2041C2.97586 11.2451 3.25564 11.311 3.71561 11.4019C4.1785 11.4927 4.53299 11.5923 4.77908 11.7007C5.02811 11.8091 5.23465 11.979 5.39871 12.2104C5.56277 12.4419 5.6448 12.7173 5.6448 13.0366C5.6448 13.4819 5.48807 13.8379 5.17459 14.1045C4.75857 14.4561 4.2283 14.6318 3.58377 14.6318C3.33475 14.6318 3.09158 14.6011 2.85428 14.5396C2.6199 14.481 2.39139 14.3916 2.16873 14.2715ZM9.615 12.2632V13.5991H10.2214C10.4382 13.5991 10.5921 13.6416 10.6829 13.7266C10.7766 13.8086 10.8235 13.917 10.8235 14.0518C10.8235 14.1836 10.7766 14.292 10.6829 14.377C10.5921 14.459 10.4382 14.5 10.2214 14.5H8.10768C7.89381 14.5 7.74 14.459 7.64625 14.377C7.55543 14.292 7.51002 14.1821 7.51002 14.0474C7.51002 13.9155 7.55543 13.8086 7.64625 13.7266C7.74 13.6416 7.89381 13.5991 8.10768 13.5991H8.71412V12.2632L7.22438 10.0747C7.02516 10.0747 6.87867 10.0322 6.78492 9.94727C6.6941 9.8623 6.64869 9.75391 6.64869 9.62207C6.64869 9.4873 6.6941 9.37891 6.78492 9.29688C6.87867 9.21191 7.03395 9.16943 7.25074 9.16943L8.06813 9.17383C8.28492 9.17383 8.43873 9.21484 8.52955 9.29688C8.6233 9.37891 8.67018 9.4873 8.67018 9.62207C8.67018 9.82422 8.55152 9.9751 8.31422 10.0747L9.16676 11.3315L10.0017 10.0747C9.86988 10.0249 9.77613 9.96191 9.72047 9.88574C9.6648 9.80957 9.63697 9.72168 9.63697 9.62207C9.63697 9.4873 9.68238 9.37891 9.7732 9.29688C9.86695 9.21484 10.0222 9.17236 10.239 9.16943L11.0872 9.17383C11.304 9.17383 11.4578 9.21484 11.5486 9.29688C11.6423 9.37891 11.6892 9.4873 11.6892 9.62207C11.6892 9.75684 11.6423 9.8667 11.5486 9.95166C11.4548 10.0337 11.3025 10.0747 11.0916 10.0747L9.615 12.2632ZM13.7082 10.8745V13.5991H14.0334C14.2502 13.5991 14.404 13.6416 14.4949 13.7266C14.5886 13.8086 14.6355 13.917 14.6355 14.0518C14.6355 14.1836 14.5886 14.292 14.4949 14.377C14.404 14.459 14.2502 14.5 14.0334 14.5H12.8513C12.6345 14.5 12.4792 14.459 12.3855 14.377C12.2947 14.292 12.2493 14.1821 12.2493 14.0474C12.2493 13.9185 12.2947 13.8115 12.3855 13.7266C12.4763 13.6416 12.6169 13.5991 12.8074 13.5991V10.0747H12.6667C12.4499 10.0747 12.2947 10.0337 12.2009 9.95166C12.1101 9.8667 12.0647 9.75684 12.0647 9.62207C12.0647 9.4873 12.1101 9.37891 12.2009 9.29688C12.2947 9.21191 12.4499 9.16943 12.6667 9.16943L13.7082 9.17383L16.011 12.7861V10.0747H15.6858C15.469 10.0747 15.3137 10.0337 15.22 9.95166C15.1291 9.8667 15.0837 9.75684 15.0837 9.62207C15.0837 9.4873 15.1291 9.37891 15.22 9.29688C15.3137 9.21191 15.469 9.16943 15.6858 9.16943L16.8679 9.17383C17.0847 9.17383 17.2385 9.21484 17.3293 9.29688C17.4231 9.37891 17.47 9.4873 17.47 9.62207C17.47 9.75391 17.4246 9.8623 17.3337 9.94727C17.2429 10.0322 17.1038 10.0747 16.9163 10.0747V14.5H16.0242L13.7082 10.8745ZM21.9236 9.40234C21.9792 9.32617 22.0393 9.26904 22.1037 9.23096C22.1711 9.19287 22.2429 9.17383 22.3191 9.17383C22.4509 9.17383 22.5578 9.21924 22.6399 9.31006C22.7248 9.40088 22.7673 9.55469 22.7673 9.77148V10.5361C22.7673 10.7529 22.7248 10.9082 22.6399 11.002C22.5578 11.0928 22.4509 11.1382 22.3191 11.1382C22.1989 11.1382 22.1023 11.1045 22.029 11.0371C21.9558 10.9697 21.9016 10.8438 21.8664 10.6592C21.8459 10.5361 21.8049 10.4409 21.7434 10.3735C21.6233 10.2417 21.4548 10.1362 21.238 10.0571C21.0241 9.97803 20.8088 9.93848 20.592 9.93848C20.3225 9.93848 20.0749 9.99707 19.8493 10.1143C19.6237 10.2314 19.4245 10.4219 19.2517 10.6855C19.0788 10.9492 18.9924 11.2627 18.9924 11.626V12.2104C18.9924 12.644 19.1491 13.0059 19.4626 13.2959C19.779 13.5859 20.217 13.731 20.7766 13.731C21.1106 13.731 21.3933 13.6855 21.6247 13.5947C21.7595 13.542 21.903 13.438 22.0554 13.2827C22.1491 13.189 22.2224 13.1289 22.2751 13.1025C22.3279 13.0732 22.3879 13.0586 22.4553 13.0586C22.5754 13.0586 22.6809 13.104 22.7717 13.1948C22.8625 13.2856 22.9079 13.3926 22.9079 13.5156C22.9079 13.6387 22.8464 13.7705 22.7234 13.9111C22.5446 14.1162 22.3147 14.2773 22.0334 14.3945C21.6555 14.5527 21.238 14.6318 20.781 14.6318C20.2478 14.6318 19.7673 14.522 19.3396 14.3022C18.9939 14.1265 18.6994 13.8496 18.4563 13.4717C18.2131 13.0908 18.0915 12.6763 18.0915 12.228V11.6172C18.0915 11.1484 18.1999 10.7119 18.4167 10.3076C18.6364 9.90039 18.9397 9.58691 19.3264 9.36719C19.7131 9.14746 20.1233 9.0376 20.5569 9.0376C20.8176 9.0376 21.0608 9.06836 21.2863 9.12988C21.5149 9.18848 21.7273 9.2793 21.9236 9.40234Z"}),(0,l.Y)("rect",{x:"23",y:"22.5",width:"22",height:"2",rx:"1",transform:"rotate(-180 23 22.5)"}),(0,l.Y)("rect",{x:"21.5",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 21.5 22.5)"}),(0,l.Y)("rect",{x:"14.6667",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 14.6667 22.5)"}),(0,l.Y)("rect",{x:"7.83333",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 7.83333 22.5)"}),(0,l.Y)("rect",{x:"1",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 1 22.5)"})]})})}):null},nd=function(e,t){(0,s.useLayoutEffect)((function(){var n=e.current;n&&(n.style.transform="translateX(".concat(t,"px)"))}),[e,t])},rd={rulerArea:"RulerArea-module_rulerArea__Kix1O",rulerInput:"RulerArea-module_rulerInput__nCNOa",rulerInputDragging:"RulerArea-module_rulerInputDragging__saoOk",rulerScale:"RulerArea-module_rulerScale__4YOKH",rulerHandle:"RulerArea-module_rulerHandle__g4GPl"},od=(0,s.memo)((function(e){var t=e.lineLengthValue,n=e.offsetX,r=e.isDragging,o=e.layoutMode,i=e.onCommitValue,c=(0,s.useRef)(null);nd(c,n);var u=t.toString(),d=(0,s.useState)(null),p=(0,a.A)(d,2),m=p[0],f=p[1],h=null!==m?m:u;return(0,l.Y)("input",{className:(0,K.A)(rd.rulerInput,r&&rd.rulerInputDragging),type:"text",inputMode:"numeric",pattern:"[0-9]*",value:h,onChange:function(e){f(e.target.value)},onBlur:function(){if(m&&""!==m.trim()){var e=Number(m);if(Number.isNaN(e)||e<1)f(null);else{var t="sequence-layout-mode"===o?10*Math.round(e/10):e;f(null),i(t)}}else f(null)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())},"data-testid":"ruler-input",disabled:r,ref:c})})),id=f.SnakeLayoutCellWidth,ad=(0,s.memo)((function(e){var t=e.transform,n=e.layoutMode,r=(0,s.useRef)(null),o=t.k-.5<Number.EPSILON,i=(0,s.useMemo)((function(){return Array.from({length:"snake-layout-mode"===n?101:20},(function(e,t){return"sequence-layout-mode"===n?50+10*t*20+10*(t-1):"snake-layout-mode"===n?25+t*id:0}))}),[n]),a=(0,s.useMemo)((function(){var e=[];return i.forEach((function(r,a){if("sequence-layout-mode"===n)e.push((0,l.Y)("line",{x1:t.applyX(r),y1:14,x2:t.applyX(r),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(a)));else if("snake-layout-mode"===n){if(o)a%5===0?e.push((0,l.Y)("text",{x:t.applyX(r),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:a},"ruler-label-".concat(a))):e.push((0,l.Y)("line",{x1:t.applyX(r),y1:14,x2:t.applyX(r),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(a)));else e.push((0,l.Y)("text",{x:t.applyX(r),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:a},"ruler-label-".concat(a)))}a!==i.length-1&&(o&&"snake-layout-mode"===n||e.push((0,l.Y)("line",{x1:t.applyX(r+10),y1:18,x2:t.applyX(i[a+1]-10),y2:18,stroke:"#B4B9D6",strokeDasharray:"2,2",strokeWidth:1},"ruler-fill-".concat(a))))})),e}),[i,n,t,o]);return(0,l.Y)("svg",{className:rd.rulerScale,ref:r,"data-testid":"ruler-scale",children:a})})),ld=(0,s.memo)((function(e){var t=e.offsetX,n=e.onDragStart,r=e.onDrag,o=e.onDragEnd,i=(0,s.useRef)(null),a=(0,s.useRef)(null);return nd(i,t),(0,s.useEffect)((function(){if(a.current){var e=(0,V.Ltv)(a.current),t=(0,V.$Er)().on("start",n).on("drag",r).on("end",o);return e.call(t),function(){e.on(".drag",null)}}}),[r,o,n]),(0,l.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",className:rd.rulerHandle,viewBox:"0 0 16 13",fill:"none",pointerEvents:"none",ref:i,"data-testid":"ruler-handle",children:(0,l.FD)("g",{cursor:"pointer",pointerEvents:"all",ref:a,children:[(0,l.Y)("mask",{id:"ruler-handle-mask",fill:"#fff",children:(0,l.Y)("path",{fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"})}),(0,l.Y)("path",{fill:"#CAD3DD",fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"}),(0,l.Y)("path",{fill:"#B4B9D6",d:"m15.6 6.925-.6-.8.6.8Zm-8.2 5.25.6-.8-.6.8Zm-7-5.25.6-.8-.6.8Zm.6-5.3h14v-2H1v2Zm0 4.5v-4.5h-2v4.5h2Zm7 5.25-7-5.25-1.2 1.6 7 5.25 1.2-1.6Zm7-5.25-7 5.25 1.2 1.6 7-5.25-1.2-1.6Zm0-4.5v4.5h2v-4.5h-2Zm1.2 6.1a2 2 0 0 0 .8-1.6h-2l1.2 1.6Zm-9.4 5.25a2 2 0 0 0 2.4 0l-1.2-1.6-1.2 1.6ZM-1 6.125a2 2 0 0 0 .8 1.6l1.2-1.6h-2Zm16-4.5h2a2 2 0 0 0-2-2v2Zm-14-2a2 2 0 0 0-2 2h2v-2Z",mask:"url(#ruler-handle-mask)"})]})})})),cd=function(){var e,t,n,r=wr(),o=(0,c.d4)(He)[r],i=(0,c.d4)(Pe),u=(0,s.useState)(new V.uVw(1,0,0)),d=(0,a.A)(u,2),p=d[0],m=d[1],h=(0,s.useRef)(0),v=(0,s.useState)(0),g=(0,a.A)(v,2),b=g[0],y=g[1],x=(0,s.useState)(!1),A=(0,a.A)(x,2),w=A[0],C=A[1];(0,s.useEffect)((function(){var e=f.ZoomTool.instance;if(e){var t=function(e){e&&m(e)};return e.subscribeOnZoomEvent(t),function(){e.unsubscribeOnZoomEvent(t)}}}),[f.ZoomTool.instance]);var M=o/10-1,k=(0,s.useMemo)((function(){return"sequence-layout-mode"===r?50+10*M+20*o:"snake-layout-mode"===r?25+o*id:0}),[r,M,o]),S=(0,s.useMemo)((function(){var e=p.applyX(k)+b,t=e-8,n=e+10,r=null===i||void 0===i?void 0:i.canvas.width.baseVal.value;if(0===r)return[n,t];var o=null===i||void 0===i?void 0:i.canvas.parentElement,a=(null===o||void 0===o?void 0:o.scrollLeft)||0,l=a,c=a+((null===o||void 0===o?void 0:o.clientWidth)||r);return n+26>c&&(n=c-26),n<l&&(n=l),[n,t]}),[null===i||void 0===i?void 0:i.canvas.width.baseVal.value,null===i||void 0===i?void 0:i.canvas.parentElement,p,k,b]),I=(0,a.A)(S,2),O=I[0],D=I[1],P=(0,s.useCallback)((function(e){i.events.setEditorLineLength.dispatch((0,L.A)({},r,e))}),[null===i||void 0===i||null===(e=i.events)||void 0===e?void 0:e.setEditorLineLength,r]),E=(0,s.useCallback)((function(e){if("sequence-layout-mode"===r){var t=(e-10*M-50)/20;return Math.max(10,10*Math.round(t/10))}if("snake-layout-mode"===r){var n=(e-25)/id;return Math.max(1,Math.round(n))}return o}),[r,M,o]),N=(0,s.useCallback)((function(e){var t=e-h.current,n=p.applyX(k)+t;return[t,p.invertX(n)]}),[p,k]),j=(0,s.useMemo)((function(){if(!w)return o;var e=N(h.current+b),t=(0,a.A)(e,2)[1];return E(t)}),[w,o,N,h,b,E]),Y=(0,s.useCallback)((function(e){C(!0),h.current=e.sourceEvent.clientX,i.events.toggleLineLengthHighlighting.dispatch(!0,k)}),[null===i||void 0===i||null===(t=i.events)||void 0===t?void 0:t.toggleLineLengthHighlighting,k]),F=(0,s.useCallback)((function(e){var t=N(e.sourceEvent.clientX),n=(0,a.A)(t,2),r=n[0],o=n[1];y(r),i.events.toggleLineLengthHighlighting.dispatch(!0,o)}),[null===i||void 0===i||null===(n=i.events)||void 0===n?void 0:n.toggleLineLengthHighlighting,N]),T=(0,s.useCallback)((function(e){C(!1);var t=N(e.sourceEvent.clientX),n=(0,a.A)(t,2)[1],r=E(n);r!==o&&P(r),y(0),h.current=0,i.events.toggleLineLengthHighlighting.dispatch(!1)}),[N,E,o,null===i||void 0===i?void 0:i.events.toggleLineLengthHighlighting,P]);return"flex-layout-mode"===r?null:!window._ketcher_isChainLengthRulerDisabled?(0,l.FD)("div",{className:(0,K.A)(rd.rulerArea,w&&rd.rulerAreaDragging),"data-testid":"ruler-area",children:[(0,l.Y)(od,{lineLengthValue:w?j:o,offsetX:O,isDragging:w,layoutMode:r,onCommitValue:P}),(0,l.Y)(ld,{offsetX:D,onDragStart:Y,onDrag:F,onDragEnd:T}),(0,l.Y)(ad,{transform:p,layoutMode:r})]}):null},sd=(0,p.A)({});function ud(e){var t=e.onInit,n=e.theme,r=e.togglerComponent,o=e.monomersLibraryUpdate,i=e.isMacromoleculesEditorTurnedOn,a=(0,s.useRef)(null),p=n?(0,m.merge)(Bn,n):Bn,f=(0,m.merge)(sd,{ketcher:p});return(0,l.Y)(c.Kq,{store:Ln,children:(0,l.FD)(d.a,{theme:f,children:[(0,l.Y)(u.mL,{styles:zn}),(0,l.Y)(kr,{rootRef:a,isMacromoleculesEditorTurnedOn:i,children:(0,l.Y)(tc,{ref:a,className:h.$2,children:(0,l.Y)(dd,{theme:p,togglerComponent:r,monomersLibraryUpdate:o,onInit:t})})})]})})}function dd(e){var t=e.theme,n=e.togglerComponent,r=e.monomersLibraryUpdate,o=e.onInit,i=xr(),c=(0,s.useRef)(null),u=Ar(jt),d=Ar(Pe),p=Ar(je),m=function(){var e=f.ketcherProvider.getKetcher(),t=(0,s.useState)(!1),n=(0,a.A)(t,2),r=n[0],o=n[1],i=(0,s.useCallback)((function(){return o(!0)}),[o]),l=(0,s.useCallback)((function(){return o(!1)}),[o]);return(0,s.useEffect)((function(){return e.eventBus.addListener(f.KetcherAsyncEvents.LOADING,i),e.eventBus.addListener(f.KetcherAsyncEvents.SUCCESS,l),e.eventBus.addListener(f.KetcherAsyncEvents.FAILURE,l),function(){e.eventBus.removeListener(f.KetcherAsyncEvents.LOADING,i),e.eventBus.removeListener(f.KetcherAsyncEvents.SUCCESS,l),e.eventBus.removeListener(f.KetcherAsyncEvents.FAILURE,l)}}),[e.eventBus,l,i]),r}(),h=(0,s.useState)(!1),v=(0,a.A)(h,2),g=v[0],b=v[1],y=function(){var e=Ar(Pe),t=Ar(Ee),n=(0,s.useState)(t),r=(0,a.A)(n,2),o=r[0],i=r[1],l=function(e){i(e)};return(0,s.useEffect)((function(){return null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.add(l),function(){null===e||void 0===e||e.events.toggleSequenceEditInRNABuilderMode.remove(l)}}),[l,null===e||void 0===e?void 0:e.events.toggleSequenceEditInRNABuilderMode]),o}(),x=(0,s.useState)(),A=(0,a.A)(x,2),w=A[0],C=A[1],M=(0,s.useState)(),k=(0,a.A)(M,2),S=k[0],I=k[1],O=(0,s.useState)([]),D=(0,a.A)(O,2),P=D[0],E=D[1],N=(0,_.EF)({id:zr.FOR_SEQUENCE}).show,Y=(0,_.EF)({id:zr.FOR_POLYMER_BOND}).show,L=(0,_.EF)({id:zr.FOR_SELECTED_MONOMERS}).show;(0,s.useEffect)((function(){return i(ve({theme:t,canvas:c.current,monomersLibraryUpdate:r,onInit:o})),function(){i(ge(null))}}),[i]),function(){var e=xr(),t=Ar(Pe);(0,s.useEffect)((function(){if(t){var n=t.monomersLibrary,r=t.defaultRnaPresetsLibraryItems,o=(0,F.A)(br(n,r,!0)),i=zt(),a=[],l=o.map((function(e){return e.name}));if(i){var c,s=lc(i);try{for(s.s();!(c=s.n()).done;){for(var u=c.value,d=0,p=u.name;l.includes(p);)d++,p="".concat(u.name).concat("_Copy".repeat(d));p!==u.name&&qt(ac(ac({},u),{},{name:p}))}}catch(m){s.e(m)}finally{s.f()}i=zt(),a=br(n,i)}return e(vt(n)),e(gt(null)),e(On(o)),i&&e(Dn(a)),e(Nn()),function(){e(vt([])),e(jn())}}}),[t])}(),(0,s.useEffect)((function(){null===d||void 0===d||d.events.rightClickSequence.add((function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];C(r),I(n),window.dispatchEvent(new Event("hidePreview")),i(ye(!0)),N({event:n,props:{sequenceItemRenderer:n.target.__data__}})})),null===d||void 0===d||d.events.rightClickPolymerBond.add((function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];I(n),Y({event:n,props:{polymerBondRenderer:r}})})),null===d||void 0===d||d.events.rightClickSelectedMonomers.add((function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];E(r),I(n),L({event:n,props:{selectedMonomers:r}})})),null===d||void 0===d||d.events.rightClickCanvas.add((function(e){var t=(0,a.A)(e,2),n=t[0],r=t[1];I(n),window.dispatchEvent(new Event("hidePreview")),i(ye(!0)),d.mode instanceof f.SequenceMode?(C(r),N({event:n,props:{}})):(E(r),L({event:n,props:{selectedMonomers:r}}))})),null===d||void 0===d||d.events.toggleMacromoleculesPropertiesVisibility.add((function(){i(Ae({}))}))}),[d]),(0,s.useEffect)((function(){return null===d||void 0===d||d.zoomTool.observeCanvasResize(),function(){null===d||void 0===d||d.zoomTool.destroy()}}),[d]),(0,s.useEffect)((function(){var e=function(e){var t=e.detail;t&&i(ke(t))};return window.addEventListener(f.SetEditorLineLengthAction,e),function(){window.removeEventListener(f.SetEditorLineLengthAction,e)}}),[i]);var T=function(){i(It())},B=(0,s.useCallback)((function(){b((function(e){return!e}))}),[]);return(0,l.FD)(l.FK,{children:[(0,l.FD)(or,{children:[(0,l.FD)(or.Top,{shortened:g,"data-testid":"top-toolbar",children:[(0,l.Y)(Tu,{}),(0,l.FD)(nc,{children:[(0,l.Y)(td,{}),(0,l.Y)(Dc,{}),(0,l.Y)(js,{}),(0,l.Y)(rc,{className:y?"toggler-component-wrapper--disabled":"",children:n}),(0,l.Y)(pc,{}),(0,l.Y)(kc,{}),(0,l.Y)(Zu,{})]})]}),(0,l.Y)(or.Left,{children:(0,l.Y)(Bu,{})}),(0,l.FD)(or.Main,{children:[(0,l.Y)(Ju,{}),(0,l.Y)(cd,{}),(0,l.FD)(oc,{id:"polymer-editor-canvas","data-testid":"ketcher-canvas",preserveAspectRatio:"xMidYMid meet",ref:c,width:"100%",height:"100%",style:{overflow:"hidden",overflowClipMargin:"content-box"},children:[(0,l.FD)("defs",{children:[(0,l.Y)(Vl,{}),(0,l.Y)(Ul,{}),(0,l.Y)(Kl,{}),(0,l.Y)(Wl,{}),(0,l.Y)(Zl,{}),(0,l.Y)(Gl,{}),(0,l.Y)(Ql,{}),(0,l.Y)(Jl,{}),(0,l.Y)(Xl,{})]}),(0,l.Y)("g",{className:"drawn-structures"}),p&&(0,l.Y)("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",pointerEvents:"all"})]}),m&&(0,l.Y)(uc,{})]}),(0,l.Y)(or.Right,{hide:g,children:(0,l.Y)(Si,{toggleLibraryVisibility:B})}),(0,l.Y)(or.Bottom,{children:(0,l.Y)(Nu,{})}),(0,l.Y)(or.InsideRoot,{children:g&&(0,l.Y)(Oi,{onClick:B})})]}),(0,l.Y)(Es,{}),(0,l.Y)(Uc,{selections:w,contextMenuEvent:S}),(0,l.Y)(Gu,{}),(0,l.Y)($u,{selectedMonomers:P,contextMenuEvent:S}),(0,l.Y)(Rl,{}),(0,l.Y)(ec,{}),(0,l.Y)(j.A,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Boolean(u),onClose:T,autoHideDuration:6e3,children:(0,l.FD)(ql,{id:"error-tooltip",children:[(0,l.Y)(Hl,{"data-testid":"error-tooltip",children:u}),(0,l.Y)(_l,{testId:"error-tooltip-close",iconName:"close",onClick:T})]})})]})}}}]);